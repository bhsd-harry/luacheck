"use strict";(()=>{var pa=Object.create;var Lt=Object.defineProperty;var wa=Object.getOwnPropertyDescriptor;var ka=Object.getOwnPropertyNames;var ya=Object.getPrototypeOf,va=Object.prototype.hasOwnProperty;var jt=h=>{throw TypeError(h)};var Be=(h=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(h,{get:(T,F)=>(typeof require!="undefined"?require:T)[F]}):h)(function(h){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var Ot=(h,T)=>()=>(T||h((T={exports:{}}).exports,T),T.exports);var Ea=(h,T,F,V)=>{if(T&&typeof T=="object"||typeof T=="function")for(let le of ka(T))!va.call(h,le)&&le!==F&&Lt(h,le,{get:()=>T[le],enumerable:!(V=wa(T,le))||V.enumerable});return h};var Ta=(h,T,F)=>(F=h!=null?pa(ya(h)):{},Ea(T||!h||!h.__esModule?Lt(F,"default",{value:h,enumerable:!0}):F,h));var Kt=(h,T,F)=>T.has(h)||jt("Cannot "+F);var me=(h,T,F)=>(Kt(h,T,"read from private field"),F?F.call(h):T.get(h)),tn=(h,T,F)=>T.has(h)?jt("Cannot add the same private member more than once"):T instanceof WeakSet?T.add(h):T.set(h,F),Me=(h,T,F,V)=>(Kt(h,T,"write to private field"),V?V.call(h,F):T.set(h,F),F);var Ut=Ot((an,St)=>{(function(h,T){typeof an=="object"&&typeof St!="undefined"?T(an):typeof define=="function"&&define.amd?define(["exports"],T):(h=typeof globalThis!="undefined"?globalThis:h||self,T(h.wasmoon={}))})(an,function(h){"use strict";var T=typeof document!="undefined"?document.currentScript:null;h.LuaReturn=void 0,function(b){b[b.Ok=0]="Ok",b[b.Yield=1]="Yield",b[b.ErrorRun=2]="ErrorRun",b[b.ErrorSyntax=3]="ErrorSyntax",b[b.ErrorMem=4]="ErrorMem",b[b.ErrorErr=5]="ErrorErr",b[b.ErrorFile=6]="ErrorFile"}(h.LuaReturn||(h.LuaReturn={}));let F=4,V=-1,le=1e6,J=-le-1e3;h.LuaType=void 0,function(b){b[b.None=-1]="None",b[b.Nil=0]="Nil",b[b.Boolean=1]="Boolean",b[b.LightUserdata=2]="LightUserdata",b[b.Number=3]="Number",b[b.String=4]="String",b[b.Table=5]="Table",b[b.Function=6]="Function",b[b.Userdata=7]="Userdata",b[b.Thread=8]="Thread"}(h.LuaType||(h.LuaType={})),h.LuaEventCodes=void 0,function(b){b[b.Call=0]="Call",b[b.Ret=1]="Ret",b[b.Line=2]="Line",b[b.Count=3]="Count",b[b.TailCall=4]="TailCall"}(h.LuaEventCodes||(h.LuaEventCodes={})),h.LuaEventMasks=void 0,function(b){b[b.Call=1]="Call",b[b.Ret=2]="Ret",b[b.Line=4]="Line",b[b.Count=8]="Count"}(h.LuaEventMasks||(h.LuaEventMasks={})),h.LuaLibraries=void 0,function(b){b.Base="_G",b.Coroutine="coroutine",b.Table="table",b.IO="io",b.OS="os",b.String="string",b.UTF8="utf8",b.Math="math",b.Debug="debug",b.Package="package"}(h.LuaLibraries||(h.LuaLibraries={}));class rn extends Error{}class ee{constructor(t,r){this.target=t,this.options=r}}function Pt(b,t){return new ee(b,t)}class In extends Number{}class pe extends Array{}let At=1e3;class we{constructor(t,r,u,s){this.closed=!1,this.lua=t,this.typeExtensions=r,this.address=u,this.parent=s}newThread(){let t=this.lua.lua_newthread(this.address);if(!t)throw new Error("lua_newthread returned a null pointer");return new we(this.lua,this.typeExtensions,t,this.parent||this)}resetThread(){this.assertOk(this.lua.lua_resetthread(this.address))}loadString(t,r){let u=this.lua.module.lengthBytesUTF8(t),s=u+1,g=this.lua.module._malloc(s);try{this.lua.module.stringToUTF8(t,g,s),this.assertOk(this.lua.luaL_loadbufferx(this.address,g,u,r!=null?r:g,null))}finally{this.lua.module._free(g)}}loadFile(t){this.assertOk(this.lua.luaL_loadfilex(this.address,t,null))}resume(t=0){let r=this.lua.module._malloc(F);try{return this.lua.module.setValue(r,0,"i32"),{result:this.lua.lua_resume(this.address,null,t,r),resultCount:this.lua.module.getValue(r,"i32")}}finally{this.lua.module._free(r)}}getTop(){return this.lua.lua_gettop(this.address)}setTop(t){this.lua.lua_settop(this.address,t)}remove(t){return this.lua.lua_remove(this.address,t)}setField(t,r,u){t=this.lua.lua_absindex(this.address,t),this.pushValue(u),this.lua.lua_setfield(this.address,t,r)}async run(t=0,r){let u=this.timeout;try{(r==null?void 0:r.timeout)!==void 0&&this.setTimeout(Date.now()+r.timeout);let s=this.resume(t);for(;s.result===h.LuaReturn.Yield;){if(this.timeout&&Date.now()>this.timeout)throw s.resultCount>0&&this.pop(s.resultCount),new rn("thread timeout exceeded");if(s.resultCount>0){let g=this.getValue(-1);this.pop(s.resultCount),g===Promise.resolve(g)?await g:await new Promise(k=>setImmediate(k))}else await new Promise(g=>setImmediate(g));s=this.resume(0)}return this.assertOk(s.result),this.getStackValues()}finally{(r==null?void 0:r.timeout)!==void 0&&this.setTimeout(u)}}runSync(t=0){let r=this.getTop()-t-1;return this.assertOk(this.lua.lua_pcallk(this.address,t,V,0,0,null)),this.getStackValues(r)}pop(t=1){this.lua.lua_pop(this.address,t)}call(t,...r){let u=this.lua.lua_getglobal(this.address,t);if(u!==h.LuaType.Function)throw new Error(`A function of type '${u}' was pushed, expected is ${h.LuaType.Function}`);for(let g of r)this.pushValue(g);let s=this.getTop()-r.length-1;return this.lua.lua_callk(this.address,r.length,V,0,null),this.getStackValues(s)}getStackValues(t=0){let r=this.getTop()-t,u=new pe(r);for(let s=0;s<r;s++)u[s]=this.getValue(t+s+1);return u}stateToThread(t){var r;return t===((r=this.parent)===null||r===void 0?void 0:r.address)?this.parent:new we(this.lua,this.typeExtensions,t,this.parent||this)}pushValue(t,r){let u=this.getValueDecorations(t),s=u.target;if(s instanceof we){this.lua.lua_pushthread(s.address)===1||this.lua.lua_xmove(s.address,this.address,1);return}let g=this.getTop();switch(typeof s){case"undefined":this.lua.lua_pushnil(this.address);break;case"number":Number.isInteger(s)?this.lua.lua_pushinteger(this.address,BigInt(s)):this.lua.lua_pushnumber(this.address,s);break;case"string":this.lua.lua_pushstring(this.address,s);break;case"boolean":this.lua.lua_pushboolean(this.address,s?1:0);break;default:if(!this.typeExtensions.find(k=>k.extension.pushValue(this,u,r)))throw new Error(`The type '${typeof s}' is not supported by Lua`)}if(u.options.metatable&&this.setMetatable(-1,u.options.metatable),this.getTop()!==g+1)throw new Error(`pushValue expected stack size ${g+1}, got ${this.getTop()}`)}setMetatable(t,r){if(t=this.lua.lua_absindex(this.address,t),this.lua.lua_getmetatable(this.address,t)){this.pop(1);let u=this.getMetatableName(t);throw new Error(`data already has associated metatable: ${u||"unknown name"}`)}this.pushValue(r),this.lua.lua_setmetatable(this.address,t)}getMetatableName(t){let r=this.lua.luaL_getmetafield(this.address,t,"__name");if(r===h.LuaType.Nil)return;if(r!==h.LuaType.String){this.pop(1);return}let u=this.lua.lua_tolstring(this.address,-1,null);return this.pop(1),u}getValue(t,r,u){t=this.lua.lua_absindex(this.address,t);let s=r!=null?r:this.lua.lua_type(this.address,t);switch(s){case h.LuaType.None:return;case h.LuaType.Nil:return null;case h.LuaType.Number:return this.lua.lua_tonumberx(this.address,t,null);case h.LuaType.String:return this.lua.lua_tolstring(this.address,t,null);case h.LuaType.Boolean:return!!this.lua.lua_toboolean(this.address,t);case h.LuaType.Thread:return this.stateToThread(this.lua.lua_tothread(this.address,t));default:{let g;(s===h.LuaType.Table||s===h.LuaType.Userdata)&&(g=this.getMetatableName(t));let k=this.typeExtensions.find(O=>O.extension.isType(this,t,s,g));return k?k.extension.getValue(this,t,u):(console.warn(`The type '${this.lua.lua_typename(this.address,s)}' returned is not supported on JS`),new In(this.lua.lua_topointer(this.address,t)))}}}close(){this.isClosed()||(this.hookFunctionPointer&&this.lua.module.removeFunction(this.hookFunctionPointer),this.closed=!0)}setTimeout(t){t&&t>0?(this.hookFunctionPointer||(this.hookFunctionPointer=this.lua.module.addFunction(()=>{Date.now()>t&&(this.pushValue(new rn("thread timeout exceeded")),this.lua.lua_error(this.address))},"vii")),this.lua.lua_sethook(this.address,this.hookFunctionPointer,h.LuaEventMasks.Count,At),this.timeout=t):this.hookFunctionPointer&&(this.hookFunctionPointer=void 0,this.timeout=void 0,this.lua.lua_sethook(this.address,null,0,0))}getTimeout(){return this.timeout}getPointer(t){return new In(this.lua.lua_topointer(this.address,t))}isClosed(){var t;return!this.address||this.closed||!!(!((t=this.parent)===null||t===void 0)&&t.isClosed())}indexToString(t){let r=this.lua.luaL_tolstring(this.address,t,null);return this.pop(),r}dumpStack(t=console.log){let r=this.getTop();for(let u=1;u<=r;u++){let s=this.lua.lua_type(this.address,u),g=this.lua.lua_typename(this.address,s),k=this.getPointer(u),O=this.indexToString(u),E=this.getValue(u,s);t(u,g,k,O,E)}}assertOk(t){if(t!==h.LuaReturn.Ok&&t!==h.LuaReturn.Yield){let r=h.LuaReturn[t],u=new Error(`Lua Error(${r}/${t})`);if(this.getTop()>0)if(t===h.LuaReturn.ErrorMem)u.message=this.lua.lua_tolstring(this.address,-1,null);else{let s=this.getValue(-1);s instanceof Error&&(u.stack=s.stack),u.message=this.indexToString(-1)}if(t!==h.LuaReturn.ErrorMem)try{this.lua.luaL_traceback(this.address,this.address,null,1);let s=this.lua.lua_tolstring(this.address,-1,null);s.trim()!=="stack traceback:"&&(u.message=`${u.message}
${s}`),this.pop(1)}catch(s){console.warn("Failed to generate stack trace",s)}throw u}}getValueDecorations(t){return t instanceof ee?t:new ee(t,{})}}class Fn extends we{constructor(t,r){if(r){let u={memoryUsed:0},s=t.module.addFunction((k,O,E,P)=>{if(P===0)return O&&(u.memoryUsed-=E,t.module._free(O)),0;let M=O?P-E:P,I=u.memoryUsed+M;if(P>E&&u.memoryMax&&I>u.memoryMax)return 0;let R=t.module._realloc(O,P);return R&&(u.memoryUsed=I),R},"iiiii"),g=t.lua_newstate(s,null);if(!g)throw t.module.removeFunction(s),new Error("lua_newstate returned a null pointer");super(t,[],g),this.memoryStats=u,this.allocatorFunctionPointer=s}else super(t,[],t.luaL_newstate());if(this.isClosed())throw new Error("Global state could not be created (probably due to lack of memory)")}close(){if(!this.isClosed()){super.close(),this.lua.lua_close(this.address),this.allocatorFunctionPointer&&this.lua.module.removeFunction(this.allocatorFunctionPointer);for(let t of this.typeExtensions)t.extension.close()}}registerTypeExtension(t,r){this.typeExtensions.push({extension:r,priority:t}),this.typeExtensions.sort((u,s)=>s.priority-u.priority)}loadLibrary(t){switch(t){case h.LuaLibraries.Base:this.lua.luaopen_base(this.address);break;case h.LuaLibraries.Coroutine:this.lua.luaopen_coroutine(this.address);break;case h.LuaLibraries.Table:this.lua.luaopen_table(this.address);break;case h.LuaLibraries.IO:this.lua.luaopen_io(this.address);break;case h.LuaLibraries.OS:this.lua.luaopen_os(this.address);break;case h.LuaLibraries.String:this.lua.luaopen_string(this.address);break;case h.LuaLibraries.UTF8:this.lua.luaopen_string(this.address);break;case h.LuaLibraries.Math:this.lua.luaopen_math(this.address);break;case h.LuaLibraries.Debug:this.lua.luaopen_debug(this.address);break;case h.LuaLibraries.Package:this.lua.luaopen_package(this.address);break}this.lua.lua_setglobal(this.address,t)}get(t){let r=this.lua.lua_getglobal(this.address,t),u=this.getValue(-1,r);return this.pop(),u}set(t,r){this.pushValue(r),this.lua.lua_setglobal(this.address,t)}getTable(t,r){let u=this.getTop(),s=this.lua.lua_getglobal(this.address,t);try{if(s!==h.LuaType.Table)throw new TypeError(`Unexpected type in ${t}. Expected ${h.LuaType[h.LuaType.Table]}. Got ${h.LuaType[s]}.`);r(u+1)}finally{this.getTop()!==u+1&&console.warn(`getTable: expected stack size ${u} got ${this.getTop()}`),this.setTop(u)}}getMemoryUsed(){return this.getMemoryStatsRef().memoryUsed}getMemoryMax(){return this.getMemoryStatsRef().memoryMax}setMemoryMax(t){this.getMemoryStatsRef().memoryMax=t}getMemoryStatsRef(){if(!this.memoryStats)throw new Error("Memory allocations is not being traced, please build engine with { traceAllocations: true }");return this.memoryStats}}class ie{constructor(t,r){this.thread=t,this.name=r}isType(t,r,u,s){return u===h.LuaType.Userdata&&s===this.name}getValue(t,r,u){let s=t.lua.luaL_testudata(t.address,r,this.name);if(!s)throw new Error(`data does not have the expected metatable: ${this.name}`);let g=t.lua.module.getValue(s,"*");return t.lua.getRef(g)}pushValue(t,r,u){let{target:s}=r,g=t.lua.ref(s),k=t.lua.lua_newuserdatauv(t.address,F,0);if(t.lua.module.setValue(k,g,"*"),h.LuaType.Nil===t.lua.luaL_getmetatable(t.address,this.name))throw t.pop(2),new Error(`metatable not found: ${this.name}`);return t.lua.lua_setmetatable(t.address,-2),!0}}class It extends ie{constructor(t,r){if(super(t,"js_error"),this.gcPointer=t.lua.module.addFunction(u=>{let s=t.lua.luaL_checkudata(u,1,this.name),g=t.lua.module.getValue(s,"*");return t.lua.unref(g),h.LuaReturn.Ok},"ii"),t.lua.luaL_newmetatable(t.address,this.name)){let u=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,u,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,u,"__gc"),t.pushValue((s,g)=>g==="message"?s.message:null),t.lua.lua_setfield(t.address,u,"__index"),t.pushValue(s=>s.message),t.lua.lua_setfield(t.address,u,"__tostring")}t.lua.lua_pop(t.address,1),r&&t.set("Error",{create:u=>{if(u&&typeof u!="string")throw new Error("message must be a string");return new Error(u)}})}pushValue(t,r){return r.target instanceof Error?super.pushValue(t,r):!1}close(){this.thread.lua.module.removeFunction(this.gcPointer)}}function Ft(b,t){return new It(b,t)}class Qe{constructor(t){this.count=t}}function ln(b,t){return new ee(b,t)}class Dt extends ie{constructor(t,r){super(t,"js_function"),this.functionRegistry=typeof FinalizationRegistry!="undefined"?new FinalizationRegistry(u=>{this.thread.isClosed()||this.thread.lua.luaL_unref(this.thread.address,J,u)}):void 0,this.options=r,this.callbackContext=t.newThread(),this.callbackContextIndex=this.thread.lua.luaL_ref(t.address,J),this.functionRegistry||console.warn("FunctionTypeExtension: FinalizationRegistry not found. Memory leaks likely."),this.gcPointer=t.lua.module.addFunction(u=>{t.lua.luaL_checkudata(u,1,this.name);let s=t.lua.luaL_checkudata(u,1,this.name),g=t.lua.module.getValue(s,"*");return t.lua.unref(g),h.LuaReturn.Ok},"ii"),t.lua.luaL_newmetatable(t.address,this.name)&&(t.lua.lua_pushstring(t.address,"__gc"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_settable(t.address,-3),t.lua.lua_pushstring(t.address,"__metatable"),t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_settable(t.address,-3)),t.lua.lua_pop(t.address,1),this.functionWrapper=t.lua.module.addFunction(u=>{let s=t.stateToThread(u),g=t.lua.luaL_checkudata(u,t.lua.lua_upvalueindex(1),this.name),k=t.lua.module.getValue(g,"*"),{target:O,options:E}=t.lua.getRef(k),P=s.getTop(),M=[];if(E.receiveThread&&M.push(s),E.receiveArgsQuantity)M.push(P);else for(let I=1;I<=P;I++){let R=s.getValue(I);(I!==1||!(E!=null&&E.self)||R!==E.self)&&M.push(R)}try{let I=O.apply(E==null?void 0:E.self,M);if(I===void 0)return 0;if(I instanceof Qe)return I.count;if(I instanceof pe){for(let R of I)s.pushValue(R);return I.length}else return s.pushValue(I),1}catch(I){if(I===1/0)throw I;return s.pushValue(I),s.lua.lua_error(s.address)}},"ii")}close(){this.thread.lua.module.removeFunction(this.gcPointer),this.thread.lua.module.removeFunction(this.functionWrapper),this.callbackContext.close(),this.callbackContext.lua.luaL_unref(this.callbackContext.address,J,this.callbackContextIndex)}isType(t,r,u){return u===h.LuaType.Function}pushValue(t,r){if(typeof r.target!="function")return!1;let u=t.lua.ref(r),s=t.lua.lua_newuserdatauv(t.address,F,0);if(t.lua.module.setValue(s,u,"*"),h.LuaType.Nil===t.lua.luaL_getmetatable(t.address,this.name))throw t.pop(1),t.lua.unref(u),new Error(`metatable not found: ${this.name}`);return t.lua.lua_setmetatable(t.address,-2),t.lua.lua_pushcclosure(t.address,this.functionWrapper,1),!0}getValue(t,r){var u;t.lua.lua_pushvalue(t.address,r);let s=t.lua.luaL_ref(t.address,J),g=(...k)=>{var O;if(this.callbackContext.isClosed()){console.warn("Tried to call a function after closing lua state");return}let E=this.callbackContext.newThread();try{let P=E.lua.lua_rawgeti(E.address,J,BigInt(s));if(P!==h.LuaType.Function){let I=E.lua.luaL_getmetafield(E.address,-1,"__call");if(E.pop(),I!==h.LuaType.Function)throw new Error(`A value of type '${P}' was pushed but it is not callable`)}for(let I of k)E.pushValue(I);!((O=this.options)===null||O===void 0)&&O.functionTimeout&&E.setTimeout(Date.now()+this.options.functionTimeout);let M=E.lua.lua_pcallk(E.address,k.length,1,0,0,null);if(M===h.LuaReturn.Yield)throw new Error("cannot yield in callbacks from javascript");return E.assertOk(M),E.getTop()>0?E.getValue(-1):void 0}finally{E.close(),this.callbackContext.pop()}};return(u=this.functionRegistry)===null||u===void 0||u.register(g,s),g}}function Nt(b,t){return new Dt(b,t)}class Rt extends ie{constructor(t){if(super(t,"js_null"),this.gcPointer=t.lua.module.addFunction(r=>{let u=t.lua.luaL_checkudata(r,1,this.name),s=t.lua.module.getValue(u,"*");return t.lua.unref(s),h.LuaReturn.Ok},"ii"),t.lua.luaL_newmetatable(t.address,this.name)){let r=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,r,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,r,"__gc"),t.pushValue(()=>null),t.lua.lua_setfield(t.address,r,"__index"),t.pushValue(()=>"null"),t.lua.lua_setfield(t.address,r,"__tostring"),t.pushValue((u,s)=>u===s),t.lua.lua_setfield(t.address,r,"__eq")}t.lua.lua_pop(t.address,1),super.pushValue(t,new ee({},{})),t.lua.lua_setglobal(t.address,"null")}getValue(t,r){if(!t.lua.luaL_testudata(t.address,r,this.name))throw new Error(`data does not have the expected metatable: ${this.name}`);return null}pushValue(t,r){return(r==null?void 0:r.target)!==null?!1:(t.lua.lua_getglobal(t.address,"null"),!0)}close(){this.thread.lua.module.removeFunction(this.gcPointer)}}function Ct(b){return new Rt(b)}class Ht extends ie{constructor(t,r){if(super(t,"js_promise"),this.gcPointer=t.lua.module.addFunction(u=>{let s=t.lua.luaL_checkudata(u,1,this.name),g=t.lua.module.getValue(s,"*");return t.lua.unref(g),h.LuaReturn.Ok},"ii"),t.lua.luaL_newmetatable(t.address,this.name)){let u=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,u,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,u,"__gc");let s=g=>{if(Promise.resolve(g)!==g&&typeof g.then!="function")throw new Error("promise method called without self instance");return!0};t.pushValue({next:(g,...k)=>s(g)&&g.then(...k),catch:(g,...k)=>s(g)&&g.catch(...k),finally:(g,...k)=>s(g)&&g.finally(...k),await:ln((g,k)=>{if(s(k),g.address===t.address)throw new Error("cannot await in the main thread");let O,E=k.then(M=>{O={status:"fulfilled",value:M}}).catch(M=>{O={status:"rejected",value:M}}),P=this.thread.lua.module.addFunction(M=>{if(!O)return t.lua.lua_yieldk(g.address,0,0,P);this.thread.lua.module.removeFunction(P);let I=t.stateToThread(M);if(O.status==="rejected")return I.pushValue(O.value||new Error("promise rejected with no error")),this.thread.lua.lua_error(M);if(O.value instanceof Qe)return O.value.count;if(O.value instanceof pe){for(let R of O.value)I.pushValue(R);return O.value.length}else return I.pushValue(O.value),1},"iiii");return g.pushValue(E),new Qe(t.lua.lua_yieldk(g.address,1,0,P))},{receiveThread:!0})}),t.lua.lua_setfield(t.address,u,"__index"),t.pushValue((g,k)=>g===k),t.lua.lua_setfield(t.address,u,"__eq")}t.lua.lua_pop(t.address,1),r&&t.set("Promise",{create:u=>new Promise(u),all:u=>{if(!Array.isArray(u))throw new Error("argument must be an array of promises");return Promise.all(u.map(s=>Promise.resolve(s)))},resolve:u=>Promise.resolve(u)})}close(){this.thread.lua.module.removeFunction(this.gcPointer)}pushValue(t,r){return Promise.resolve(r.target)!==r.target&&typeof r.target.then!="function"?!1:super.pushValue(t,r)}}function Bt(b,t){return new Ht(b,t)}function Dn(b,t){return new ee(b,t||{})}class Vt extends ie{constructor(t){if(super(t,"js_proxy"),this.gcPointer=t.lua.module.addFunction(r=>{let u=t.lua.luaL_checkudata(r,1,this.name),s=t.lua.module.getValue(u,"*");return t.lua.unref(s),h.LuaReturn.Ok},"ii"),t.lua.luaL_newmetatable(t.address,this.name)){let r=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,r,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,r,"__gc"),t.pushValue((u,s)=>{switch(typeof s){case"number":s=s-1;case"string":break;default:throw new Error("Only strings or numbers can index js objects")}let g=u[s];return typeof g=="function"?ln(g,{self:u}):g}),t.lua.lua_setfield(t.address,r,"__index"),t.pushValue((u,s,g)=>{switch(typeof s){case"number":s=s-1;case"string":break;default:throw new Error("Only strings or numbers can index js objects")}u[s]=g}),t.lua.lua_setfield(t.address,r,"__newindex"),t.pushValue(u=>{var s,g;return(g=(s=u.toString)===null||s===void 0?void 0:s.call(u))!==null&&g!==void 0?g:typeof u}),t.lua.lua_setfield(t.address,r,"__tostring"),t.pushValue(u=>u.length||0),t.lua.lua_setfield(t.address,r,"__len"),t.pushValue(u=>{let s=Object.getOwnPropertyNames(u),g=0;return pe.of(()=>{let k=pe.of(s[g],u[s[g]]);return g++,k},u,null)}),t.lua.lua_setfield(t.address,r,"__pairs"),t.pushValue((u,s)=>u===s),t.lua.lua_setfield(t.address,r,"__eq"),t.pushValue((u,...s)=>(s[0]===u&&s.shift(),u(...s))),t.lua.lua_setfield(t.address,r,"__call")}t.lua.lua_pop(t.address,1)}isType(t,r,u,s){return u===h.LuaType.Userdata&&s===this.name}getValue(t,r){let u=t.lua.lua_touserdata(t.address,r),s=t.lua.module.getValue(u,"*");return t.lua.getRef(s)}pushValue(t,r){var u;let{target:s,options:g}=r;if(g.proxy===void 0){if(s==null||typeof s!="object"&&!(typeof s=="function"&&((u=s.prototype)===null||u===void 0?void 0:u.constructor)===s&&s.toString().startsWith("class "))||Promise.resolve(s)===s||typeof s.then=="function")return!1}else if(g.proxy===!1)return!1;return g.metatable&&!(g.metatable instanceof ee)?(r.options.metatable=Dn(g.metatable,{proxy:!1}),!1):super.pushValue(t,r)}close(){this.thread.lua.module.removeFunction(this.gcPointer)}}function Qt(b){return new Vt(b)}class Gt extends ie{constructor(t){super(t,"js_table")}close(){}isType(t,r,u){return u===h.LuaType.Table}getValue(t,r,u){let s=u||new Map,g=t.lua.lua_topointer(t.address,r),k=s.get(g);if(!k){let O=this.readTableKeys(t,r);k=O.length>0&&O.every((P,M)=>P===String(M+1))?[]:{},s.set(g,k),this.readTableValues(t,r,s,k)}return k}pushValue(t,{target:r},u){if(typeof r!="object"||r===null)return!1;let s=u||new Map,g=s.get(r);if(g!==void 0)return t.lua.lua_rawgeti(t.address,J,BigInt(g)),!0;try{let k=t.getTop()+1,O=(E,P)=>{t.lua.lua_createtable(t.address,E,P);let M=t.lua.luaL_ref(t.address,J);s.set(r,M),t.lua.lua_rawgeti(t.address,J,BigInt(M))};if(Array.isArray(r)){O(r.length,0);for(let E=0;E<r.length;E++)t.pushValue(E+1,s),t.pushValue(r[E],s),t.lua.lua_settable(t.address,k)}else{O(0,Object.getOwnPropertyNames(r).length);for(let E in r)t.pushValue(E,s),t.pushValue(r[E],s),t.lua.lua_settable(t.address,k)}}finally{if(u===void 0)for(let k of s.values())t.lua.luaL_unref(t.address,J,k)}return!0}readTableKeys(t,r){let u=[];for(t.lua.lua_pushnil(t.address);t.lua.lua_next(t.address,r);){let s=t.indexToString(-2);u.push(s),t.pop()}return u}readTableValues(t,r,u,s){let g=Array.isArray(s);for(t.lua.lua_pushnil(t.address);t.lua.lua_next(t.address,r);){let k=t.indexToString(-2),O=t.getValue(-1,void 0,u);g?s.push(O):s[k]=O,t.pop()}}}function zt(b){return new Gt(b)}function Wt(b){return new ee(b,{reference:!0})}class qt extends ie{constructor(t){if(super(t,"js_userdata"),this.gcPointer=t.lua.module.addFunction(r=>{let u=t.lua.luaL_checkudata(r,1,this.name),s=t.lua.module.getValue(u,"*");return t.lua.unref(s),h.LuaReturn.Ok},"ii"),t.lua.luaL_newmetatable(t.address,this.name)){let r=t.lua.lua_gettop(t.address);t.lua.lua_pushstring(t.address,"protected metatable"),t.lua.lua_setfield(t.address,r,"__metatable"),t.lua.lua_pushcclosure(t.address,this.gcPointer,0),t.lua.lua_setfield(t.address,r,"__gc")}t.lua.lua_pop(t.address,1)}isType(t,r,u,s){return u===h.LuaType.Userdata&&s===this.name}getValue(t,r){let u=t.lua.lua_touserdata(t.address,r),s=t.lua.module.getValue(u,"*");return t.lua.getRef(s)}pushValue(t,r){return r.options.reference?super.pushValue(t,r):!1}close(){this.thread.lua.module.removeFunction(this.gcPointer)}}function Jt(b){return new qt(b)}class Nn{constructor(t,{openStandardLibs:r=!0,injectObjects:u=!1,enableProxy:s=!0,traceAllocations:g=!1,functionTimeout:k=void 0}={}){this.cmodule=t,this.global=new Fn(this.cmodule,g),this.global.registerTypeExtension(0,zt(this.global)),this.global.registerTypeExtension(0,Nt(this.global,{functionTimeout:k})),this.global.registerTypeExtension(1,Bt(this.global,u)),u&&this.global.registerTypeExtension(5,Ct(this.global)),s?this.global.registerTypeExtension(3,Qt(this.global)):this.global.registerTypeExtension(1,Ft(this.global,u)),this.global.registerTypeExtension(4,Jt(this.global)),r&&this.cmodule.luaL_openlibs(this.global.address)}doString(t){return this.callByteCode(r=>r.loadString(t))}doFile(t){return this.callByteCode(r=>r.loadFile(t))}doStringSync(t){return this.global.loadString(t),this.global.runSync()[0]}doFileSync(t){return this.global.loadFile(t),this.global.runSync()[0]}async callByteCode(t){let r=this.global.newThread(),u=this.global.getTop();try{t(r);let s=await r.run(0);return s.length>0?(this.cmodule.lua_xmove(r.address,this.global.address,s.length),this.global.getValue(this.global.getTop()-s.length+1)):void 0}finally{this.global.remove(u)}}}var Yt=(()=>{var b=typeof document=="undefined"&&typeof location=="undefined"?Be("url").pathToFileURL(__filename).href:typeof document=="undefined"?location.href:T&&T.src||new URL("index.js",document.baseURI).href;return async function(t={}){var r=t,u,s;r.ready=new Promise((e,n)=>{u=e,s=n}),"_malloc _free _realloc _luaL_checkversion_ _luaL_getmetafield _luaL_callmeta _luaL_tolstring _luaL_argerror _luaL_typeerror _luaL_checklstring _luaL_optlstring _luaL_checknumber _luaL_optnumber _luaL_checkinteger _luaL_optinteger _luaL_checkstack _luaL_checktype _luaL_checkany _luaL_newmetatable _luaL_setmetatable _luaL_testudata _luaL_checkudata _luaL_where _luaL_fileresult _luaL_execresult _luaL_ref _luaL_unref _luaL_loadfilex _luaL_loadbufferx _luaL_loadstring _luaL_newstate _luaL_len _luaL_addgsub _luaL_gsub _luaL_setfuncs _luaL_getsubtable _luaL_traceback _luaL_requiref _luaL_buffinit _luaL_prepbuffsize _luaL_addlstring _luaL_addstring _luaL_addvalue _luaL_pushresult _luaL_pushresultsize _luaL_buffinitsize _lua_newstate _lua_close _lua_newthread _lua_resetthread _lua_atpanic _lua_version _lua_absindex _lua_gettop _lua_settop _lua_pushvalue _lua_rotate _lua_copy _lua_checkstack _lua_xmove _lua_isnumber _lua_isstring _lua_iscfunction _lua_isinteger _lua_isuserdata _lua_type _lua_typename _lua_tonumberx _lua_tointegerx _lua_toboolean _lua_tolstring _lua_rawlen _lua_tocfunction _lua_touserdata _lua_tothread _lua_topointer _lua_arith _lua_rawequal _lua_compare _lua_pushnil _lua_pushnumber _lua_pushinteger _lua_pushlstring _lua_pushstring _lua_pushcclosure _lua_pushboolean _lua_pushlightuserdata _lua_pushthread _lua_getglobal _lua_gettable _lua_getfield _lua_geti _lua_rawget _lua_rawgeti _lua_rawgetp _lua_createtable _lua_newuserdatauv _lua_getmetatable _lua_getiuservalue _lua_setglobal _lua_settable _lua_setfield _lua_seti _lua_rawset _lua_rawseti _lua_rawsetp _lua_setmetatable _lua_setiuservalue _lua_callk _lua_pcallk _lua_load _lua_dump _lua_yieldk _lua_resume _lua_status _lua_isyieldable _lua_setwarnf _lua_warning _lua_error _lua_next _lua_concat _lua_len _lua_stringtonumber _lua_getallocf _lua_setallocf _lua_toclose _lua_closeslot _lua_getstack _lua_getinfo _lua_getlocal _lua_setlocal _lua_getupvalue _lua_setupvalue _lua_upvalueid _lua_upvaluejoin _lua_sethook _lua_gethook _lua_gethookmask _lua_gethookcount _lua_setcstacklimit _luaopen_base _luaopen_coroutine _luaopen_table _luaopen_io _luaopen_os _luaopen_string _luaopen_utf8 _luaopen_math _luaopen_debug _luaopen_package _luaL_openlibs _memory ___indirect_function_table _fflush onRuntimeInitialized".split(" ").forEach(e=>{Object.getOwnPropertyDescriptor(r.ready,e)||Object.defineProperty(r.ready,e,{get:()=>C("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>C("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})});var g=Object.assign({},r),k="./this.program",O=(e,n)=>{throw n},E=typeof window=="object",P=typeof importScripts=="function",M=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I=!E&&!M&&!P;if(r.ENVIRONMENT)throw Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var R="",ke,ye,ve;if(M){if(typeof process=="undefined"||!process.release||process.release.name!=="node")throw Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var Rn=process.versions.node,Ae=Rn.split(".").slice(0,3);if(Ae=1e4*Ae[0]+100*Ae[1]+1*Ae[2].split("-")[0],16e4>Ae)throw Error("This emscripten-generated code requires node v16.0.0 (detected v"+Rn+")");let{createRequire:e}=await import("module");var Ee=e(typeof document=="undefined"&&typeof location=="undefined"?Be("url").pathToFileURL(__filename).href:typeof document=="undefined"?location.href:T&&T.src||new URL("index.js",document.baseURI).href),on=Ee("fs"),sn=Ee("path");P?R=sn.dirname(R)+"/":R=Ee("url").fileURLToPath(new URL("./",typeof document=="undefined"&&typeof location=="undefined"?Be("url").pathToFileURL(__filename).href:typeof document=="undefined"?location.href:T&&T.src||new URL("index.js",document.baseURI).href)),ke=(n,a)=>(n=Re(n)?new URL(n):sn.normalize(n),on.readFileSync(n,a?void 0:"utf8")),ve=n=>(n=ke(n,!0),n.buffer||(n=new Uint8Array(n)),m(n.buffer),n),ye=(n,a,l,o=!0)=>{n=Re(n)?new URL(n):sn.normalize(n),on.readFile(n,o?void 0:"utf8",(c,_)=>{c?l(c):a(o?_.buffer:_)})},!r.thisProgram&&1<process.argv.length&&(k=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),O=(n,a)=>{throw process.exitCode=n,a},r.inspect=()=>"[Emscripten Module object]"}else if(I){if(typeof process=="object"&&typeof Ee=="function"||typeof window=="object"||typeof importScripts=="function")throw Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");typeof read!="undefined"&&(ke=read),ve=e=>typeof readbuffer=="function"?new Uint8Array(readbuffer(e)):(e=read(e,"binary"),m(typeof e=="object"),e),ye=(e,n)=>{setTimeout(()=>n(ve(e)))},typeof clearTimeout=="undefined"&&(globalThis.clearTimeout=()=>{}),typeof setTimeout=="undefined"&&(globalThis.setTimeout=e=>typeof e=="function"?e():C()),typeof quit=="function"&&(O=(e,n)=>{throw setTimeout(()=>{if(!(n instanceof Zn)){let a=n;n&&typeof n=="object"&&n.stack&&(a=[n,n.stack]),H(`exiting due to exception: ${a}`)}quit(e)}),n}),typeof print!="undefined"&&(typeof console=="undefined"&&(console={}),console.log=print,console.warn=console.error=typeof printErr!="undefined"?printErr:print)}else if(E||P){if(P?R=self.location.href:typeof document!="undefined"&&document.currentScript&&(R=document.currentScript.src),b&&(R=b),R.indexOf("blob:")!==0?R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1):R="",typeof window!="object"&&typeof importScripts!="function")throw Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");ke=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},P&&(ve=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),ye=(e,n,a)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?n(l.response):a()},l.onerror=a,l.send(null)}}else throw Error("environment detection error");var Te=console.log.bind(console),H=console.error.bind(console);Object.assign(r,g),g=null,x("ENVIRONMENT"),x("GL_MAX_TEXTURE_IMAGE_UNITS"),x("SDL_canPlayWithWebAudio"),x("SDL_numSimultaneouslyQueuedBuffers"),x("INITIAL_MEMORY"),x("wasmMemory"),x("arguments"),x("buffer"),x("canvas"),x("doNotCaptureKeyboard"),x("dynamicLibraries"),x("elementPointerLock"),x("extraStackTrace"),x("forcedAspectRatio"),x("instantiateWasm"),x("keyboardListeningElement"),x("freePreloadedMediaOnUse"),x("loadSplitModule"),x("logReadFiles"),x("mainScriptUrlOrBlob"),x("mem"),x("monitorRunDependencies"),x("noExitRuntime"),x("noInitialRun"),x("onAbort"),x("onCustomMessage"),x("onExit"),x("onFree"),x("onFullScreen"),x("onMalloc"),x("onRealloc"),x("onRuntimeInitialized"),x("postMainLoop"),x("postRun"),x("preInit"),x("preMainLoop"),x("preinitializedWebGLContext"),x("memoryInitializerRequest"),x("preloadPlugins"),x("print"),x("printErr"),x("quit"),x("setStatus"),x("statusMessage"),x("stderr"),x("stdin"),x("stdout"),x("thisProgram"),x("wasm"),x("wasmBinary"),x("websocket"),x("fetchSettings"),ne("arguments","arguments_"),ne("thisProgram","thisProgram"),ne("quit","quit_"),m(typeof r.memoryInitializerPrefixURL=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),m(typeof r.pthreadMainPrefixURL=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),m(typeof r.cdInitializerPrefixURL=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),m(typeof r.filePackagePrefixURL=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),m(typeof r.read=="undefined","Module.read option was removed (modify read_ in JS)"),m(typeof r.readAsync=="undefined","Module.readAsync option was removed (modify readAsync in JS)"),m(typeof r.readBinary=="undefined","Module.readBinary option was removed (modify readBinary in JS)"),m(typeof r.setWindowTitle=="undefined","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),m(typeof r.TOTAL_MEMORY=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),ne("asm","wasmExports"),ne("read","read_"),ne("readAsync","readAsync"),ne("readBinary","readBinary"),ne("setWindowTitle","setWindowTitle"),m(!I,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),ne("wasmBinary","wasmBinary"),typeof WebAssembly!="object"&&C("no native wasm support detected");var Ie,Fe=!1;function m(e,n){e||C("Assertion failed"+(n?": "+n:""))}var Q,ze,xe,y,N,un,We,cn;function Cn(){var e=Ie.buffer;r.HEAP8=Q=new Int8Array(e),r.HEAP16=xe=new Int16Array(e),r.HEAPU8=ze=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAP32=y=new Int32Array(e),r.HEAPU32=N=new Uint32Array(e),r.HEAPF32=un=new Float32Array(e),r.HEAPF64=cn=new Float64Array(e),r.HEAP64=We=new BigInt64Array(e),r.HEAPU64=new BigUint64Array(e)}m(!r.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),m(typeof Int32Array!="undefined"&&typeof Float64Array!="undefined"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),m(!r.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),m(!r.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");function dn(){if(!Fe){var e=Mn();e==0&&(e+=4);var n=N[e>>2],a=N[e+4>>2];n==34821223&&a==2310721022||C(`Stack overflow! Stack cookie has been overwritten at ${Ce(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Ce(a)} ${Ce(n)}`),N[0]!=1668509029&&C("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var Hn=new Int16Array(1),Bn=new Int8Array(Hn.buffer);if(Hn[0]=25459,Bn[0]!==115||Bn[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";var fn=[],hn=[],Vn=[],_n=!1;m(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),m(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),m(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),m(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var De=0,ue=null,Ne=null,Le={};function Qn(e){for(var n=e;;){if(!Le[e])return e;e=n+Math.random()}}function gn(e){De++,e?(m(!Le[e]),Le[e]=1,ue===null&&typeof setInterval!="undefined"&&(ue=setInterval(()=>{if(Fe)clearInterval(ue),ue=null;else{var n=!1,a;for(a in Le)n||(n=!0,H("still waiting on run dependencies:")),H(`dependency: ${a}`);n&&H("(end of list)")}},1e4))):H("warning: run dependency added without ID")}function qe(e){De--,e?(m(Le[e]),delete Le[e]):H("warning: run dependency removed without ID"),De==0&&(ue!==null&&(clearInterval(ue),ue=null),Ne&&(e=Ne,Ne=null,e()))}function C(e){throw e="Aborted("+e+")",H(e),Fe=!0,e=new WebAssembly.RuntimeError(e),s(e),e}var Gn=e=>e.startsWith("data:application/octet-stream;base64,"),Re=e=>e.startsWith("file://");function d(e){return function(){m(_n,`native function \`${e}\` called before runtime initialization`);var n=be[e];return m(n,`exported native function \`${e}\` not found`),n.apply(null,arguments)}}var oe;if(r.locateFile){if(oe="glue.wasm",!Gn(oe)){var zn=oe;oe=r.locateFile?r.locateFile(zn,R):R+zn}}else oe=new URL("glue.wasm",typeof document=="undefined"&&typeof location=="undefined"?Be("url").pathToFileURL(__filename).href:typeof document=="undefined"?location.href:T&&T.src||new URL("index.js",document.baseURI).href).href;function Wn(e){if(ve)return ve(e);throw"both async and sync fetching of the wasm failed"}function $t(e){if(E||P){if(typeof fetch=="function"&&!Re(e))return fetch(e,{credentials:"same-origin"}).then(n=>{if(!n.ok)throw"failed to load wasm binary file at '"+e+"'";return n.arrayBuffer()}).catch(()=>Wn(e));if(ye)return new Promise((n,a)=>{ye(e,l=>n(new Uint8Array(l)),a)})}return Promise.resolve().then(()=>Wn(e))}function qn(e,n,a){return $t(e).then(l=>WebAssembly.instantiate(l,n)).then(l=>l).then(a,l=>{H(`failed to asynchronously prepare wasm: ${l}`),Re(oe)&&H(`warning: Loading from a file URI (${oe}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),C(l)})}function ea(e,n){var a=oe;return typeof WebAssembly.instantiateStreaming!="function"||Gn(a)||Re(a)||M||typeof fetch!="function"?qn(a,e,n):fetch(a,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(n,function(o){return H(`wasm streaming compile failed: ${o}`),H("falling back to ArrayBuffer instantiation"),qn(a,e,n)}))}function ne(e,n){Object.getOwnPropertyDescriptor(r,e)||Object.defineProperty(r,e,{configurable:!0,get(){C(`\`Module.${e}\` has been replaced by \`${n}\` (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)`)}})}function x(e){Object.getOwnPropertyDescriptor(r,e)&&C(`\`Module.${e}\` was supplied but \`${e}\` not included in INCOMING_MODULE_JS_API`)}function Jn(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function Yn(e,n){typeof globalThis!="undefined"&&Object.defineProperty(globalThis,e,{configurable:!0,get(){je(`\`${e}\` is not longer defined by emscripten. ${n}`)}})}Yn("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Yn("asm","Please use wasmExports instead");function Xn(e){Object.getOwnPropertyDescriptor(r,e)||Object.defineProperty(r,e,{configurable:!0,get(){var n=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;Jn(e)&&(n+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),C(n)}})}function Zn(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var Ce=e=>(m(typeof e=="number"),"0x"+(e>>>0).toString(16).padStart(8,"0")),je=e=>{bn||(bn={}),bn[e]||(bn[e]=1,M&&(e="warning: "+e),H(e))},bn,$n=(e,n)=>{for(var a=0,l=e.length-1;0<=l;l--){var o=e[l];o==="."?e.splice(l,1):o===".."?(e.splice(l,1),a++):a&&(e.splice(l,1),a--)}if(n)for(;a;a--)e.unshift("..");return e},te=e=>{var n=e.charAt(0)==="/",a=e.substr(-1)==="/";return(e=$n(e.split("/").filter(l=>!!l),!n).join("/"))||n||(e="."),e&&a&&(e+="/"),(n?"/":"")+e},mn=e=>{var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=n[0],n=n[1],!e&&!n?".":(n&&(n=n.substr(0,n.length-1)),e+n)},ce=e=>{if(e==="/")return"/";e=te(e),e=e.replace(/\/$/,"");var n=e.lastIndexOf("/");return n===-1?e:e.substr(n+1)},na=(e,n)=>te(e+"/"+n),ta=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return a=>crypto.getRandomValues(a);if(M)try{var e=Ee("crypto");if(e.randomFillSync)return a=>e.randomFillSync(a);var n=e.randomBytes;return a=>(a.set(n(a.byteLength)),a)}catch{}C("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")},et=e=>(et=ta())(e);function de(){for(var e="",n=!1,a=arguments.length-1;-1<=a&&!n;a--){if(n=0<=a?arguments[a]:i.cwd(),typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,n=n.charAt(0)==="/"}return e=$n(e.split("/").filter(l=>!!l),!n).join("/"),(n?"/":"")+e||"."}var nt=(e,n)=>{function a(_){for(var p=0;p<_.length&&_[p]==="";p++);for(var S=_.length-1;0<=S&&_[S]==="";S--);return p>S?[]:_.slice(p,S-p+1)}e=de(e).substr(1),n=de(n).substr(1),e=a(e.split("/")),n=a(n.split("/"));for(var l=Math.min(e.length,n.length),o=l,c=0;c<l;c++)if(e[c]!==n[c]){o=c;break}for(l=[],c=o;c<e.length;c++)l.push("..");return l=l.concat(n.slice(o)),l.join("/")},tt=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0,Oe=(e,n)=>{for(var a=n+NaN,l=n;e[l]&&!(l>=a);)++l;if(16<l-n&&e.buffer&&tt)return tt.decode(e.subarray(n,l));for(a="";n<l;){var o=e[n++];if(o&128){var c=e[n++]&63;if((o&224)==192)a+=String.fromCharCode((o&31)<<6|c);else{var _=e[n++]&63;(o&240)==224?o=(o&15)<<12|c<<6|_:((o&248)!=240&&je("Invalid UTF-8 leading byte "+Ce(o)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(o&7)<<18|c<<12|_<<6|e[n++]&63),65536>o?a+=String.fromCharCode(o):(o-=65536,a+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else a+=String.fromCharCode(o)}return a},pn=[],Ke=e=>{for(var n=0,a=0;a<e.length;++a){var l=e.charCodeAt(a);127>=l?n++:2047>=l?n+=2:55296<=l&&57343>=l?(n+=4,++a):n+=3}return n},wn=(e,n,a,l)=>{if(m(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(0<l))return 0;var o=a;l=a+l-1;for(var c=0;c<e.length;++c){var _=e.charCodeAt(c);if(55296<=_&&57343>=_){var p=e.charCodeAt(++c);_=65536+((_&1023)<<10)|p&1023}if(127>=_){if(a>=l)break;n[a++]=_}else{if(2047>=_){if(a+1>=l)break;n[a++]=192|_>>6}else{if(65535>=_){if(a+2>=l)break;n[a++]=224|_>>12}else{if(a+3>=l)break;1114111<_&&je("Invalid Unicode code point "+Ce(_)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),n[a++]=240|_>>18,n[a++]=128|_>>12&63}n[a++]=128|_>>6&63}n[a++]=128|_&63}}return n[a]=0,a-o};function Je(e,n){var a=Array(Ke(e)+1);return e=wn(e,a,0,a.length),n&&(a.length=e),a}var kn=[];function at(e,n){kn[e]={input:[],output:[],K:n},vn(e,aa)}var aa={open(e){var n=kn[e.node.rdev];if(!n)throw new i.g(43);e.tty=n,e.seekable=!1},close(e){e.tty.K.fsync(e.tty)},fsync(e){e.tty.K.fsync(e.tty)},read(e,n,a,l){if(!e.tty||!e.tty.K.ra)throw new i.g(60);for(var o=0,c=0;c<l;c++){try{var _=e.tty.K.ra(e.tty)}catch{throw new i.g(29)}if(_===void 0&&o===0)throw new i.g(6);if(_==null)break;o++,n[a+c]=_}return o&&(e.node.timestamp=Date.now()),o},write(e,n,a,l){if(!e.tty||!e.tty.K.ia)throw new i.g(60);try{for(var o=0;o<l;o++)e.tty.K.ia(e.tty,n[a+o])}catch{throw new i.g(29)}return l&&(e.node.timestamp=Date.now()),o}},ra={ra(){e:{if(!pn.length){var e=null;if(M){var n=Buffer.alloc(256),a=0,l=process.stdin.fd;try{a=on.readSync(l,n)}catch(o){if(o.toString().includes("EOF"))a=0;else throw o}0<a?e=n.slice(0,a).toString("utf-8"):e=null}else typeof window!="undefined"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`));if(!e){e=null;break e}pn=Je(e,!0)}e=pn.shift()}return e},ia(e,n){n===null||n===10?(Te(Oe(e.output,0)),e.output=[]):n!=0&&e.output.push(n)},fsync(e){e.output&&0<e.output.length&&(Te(Oe(e.output,0)),e.output=[])},Ia(){return{ab:25856,cb:5,$a:191,bb:35387,Za:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ja(){return 0},Ka(){return[24,80]}},la={ia(e,n){n===null||n===10?(H(Oe(e.output,0)),e.output=[]):n!=0&&e.output.push(n)},fsync(e){e.output&&0<e.output.length&&(H(Oe(e.output,0)),e.output=[])}},rt=()=>{C("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")};function lt(e,n){var a=e.m?e.m.length:0;a>=n||(n=Math.max(n,a*(1048576>a?2:1.125)>>>0),a!=0&&(n=Math.max(n,256)),a=e.m,e.m=new Uint8Array(n),0<e.o&&e.m.set(a.subarray(0,e.o),0))}var U={G:null,s(){return U.createNode(null,"/",16895,0)},createNode(e,n,a,l){if((a&61440)===24576||i.isFIFO(a))throw new i.g(63);return U.G||(U.G={dir:{node:{C:U.h.C,v:U.h.v,lookup:U.h.lookup,J:U.h.J,rename:U.h.rename,unlink:U.h.unlink,rmdir:U.h.rmdir,readdir:U.h.readdir,symlink:U.h.symlink},stream:{D:U.l.D}},file:{node:{C:U.h.C,v:U.h.v},stream:{D:U.l.D,read:U.l.read,write:U.l.write,T:U.l.T,S:U.l.S,V:U.l.V}},link:{node:{C:U.h.C,v:U.h.v,readlink:U.h.readlink},stream:{}},na:{node:{C:U.h.C,v:U.h.v},stream:i.Da}}),a=i.createNode(e,n,a,l),z(a.mode)?(a.h=U.G.dir.node,a.l=U.G.dir.stream,a.m={}):i.isFile(a.mode)?(a.h=U.G.file.node,a.l=U.G.file.stream,a.o=0,a.m=null):(a.mode&61440)===40960?(a.h=U.G.link.node,a.l=U.G.link.stream):(a.mode&61440)===8192&&(a.h=U.G.na.node,a.l=U.G.na.stream),a.timestamp=Date.now(),e&&(e.m[n]=a,e.timestamp=a.timestamp),a},lb(e){return e.m?e.m.subarray?e.m.subarray(0,e.o):new Uint8Array(e.m):new Uint8Array(0)},h:{C(e){var n={};return n.dev=(e.mode&61440)===8192?e.id:1,n.ino=e.id,n.mode=e.mode,n.nlink=1,n.uid=0,n.gid=0,n.rdev=e.rdev,z(e.mode)?n.size=4096:i.isFile(e.mode)?n.size=e.o:(e.mode&61440)===40960?n.size=e.link.length:n.size=0,n.atime=new Date(e.timestamp),n.mtime=new Date(e.timestamp),n.ctime=new Date(e.timestamp),n.Ba=4096,n.blocks=Math.ceil(n.size/n.Ba),n},v(e,n){if(n.mode!==void 0&&(e.mode=n.mode),n.timestamp!==void 0&&(e.timestamp=n.timestamp),n.size!==void 0&&(n=n.size,e.o!=n))if(n==0)e.m=null,e.o=0;else{var a=e.m;e.m=new Uint8Array(n),a&&e.m.set(a.subarray(0,Math.min(n,e.o))),e.o=n}},lookup(){throw i.da[44]},J(e,n,a,l){return U.createNode(e,n,a,l)},rename(e,n,a){if(z(e.mode)){try{var l=ae(n,a)}catch{}if(l)for(var o in l.m)throw new i.g(55)}delete e.parent.m[e.name],e.parent.timestamp=Date.now(),e.name=a,n.m[a]=e,n.timestamp=e.parent.timestamp,e.parent=n},unlink(e,n){delete e.m[n],e.timestamp=Date.now()},rmdir(e,n){var a=ae(e,n),l;for(l in a.m)throw new i.g(55);delete e.m[n],e.timestamp=Date.now()},readdir(e){var n=[".",".."],a;for(a in e.m)e.m.hasOwnProperty(a)&&n.push(a);return n},symlink(e,n,a){return e=U.createNode(e,n,41471,0),e.link=a,e},readlink(e){if((e.mode&61440)!==40960)throw new i.g(28);return e.link}},l:{read(e,n,a,l,o){var c=e.node.m;if(o>=e.node.o)return 0;if(e=Math.min(e.node.o-o,l),m(0<=e),8<e&&c.subarray)n.set(c.subarray(o,o+e),a);else for(l=0;l<e;l++)n[a+l]=c[o+l];return e},write(e,n,a,l,o,c){if(m(!(n instanceof ArrayBuffer)),n.buffer===Q.buffer&&(c=!1),!l)return 0;if(e=e.node,e.timestamp=Date.now(),n.subarray&&(!e.m||e.m.subarray)){if(c)return m(o===0,"canOwn must imply no weird position inside the file"),e.m=n.subarray(a,a+l),e.o=l;if(e.o===0&&o===0)return e.m=n.slice(a,a+l),e.o=l;if(o+l<=e.o)return e.m.set(n.subarray(a,a+l),o),l}if(lt(e,o+l),e.m.subarray&&n.subarray)e.m.set(n.subarray(a,a+l),o);else for(c=0;c<l;c++)e.m[o+c]=n[a+c];return e.o=Math.max(e.o,o+l),l},D(e,n,a){if(a===1?n+=e.position:a===2&&i.isFile(e.node.mode)&&(n+=e.node.o),0>n)throw new i.g(28);return n},T(e,n,a){lt(e.node,n+a),e.node.o=Math.max(e.node.o,n+a)},S(e,n,a,l,o){if(!i.isFile(e.node.mode))throw new i.g(43);if(e=e.node.m,o&2||e.buffer!==Q.buffer){if((0<a||a+n<e.length)&&(e.subarray?e=e.subarray(a,a+n):e=Array.prototype.slice.call(e,a,a+n)),a=!0,n=rt(),!n)throw new i.g(48);Q.set(e,n)}else a=!1,n=e.byteOffset;return{Ra:n,Aa:a}},V(e,n,a,l){return U.l.write(e,n,0,l,a,!1),0}}},ia=(e,n,a)=>{var l=Qn(`al ${e}`);ye(e,o=>{m(o,`Loading data file "${e}" failed (no arrayBuffer).`),n(new Uint8Array(o)),l&&qe(l)},()=>{if(a)a();else throw`Loading data file "${e}" failed.`}),l&&gn(l)},oa=[],sa=(e,n,a,l)=>{typeof Browser!="undefined"&&Browser.R();var o=!1;return oa.forEach(c=>{!o&&c.canHandle(n)&&(c.handle(e,n,a,l),o=!0)}),o},yn=(e,n)=>{var a=0;return e&&(a|=365),n&&(a|=146),a},ua={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},it={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},ca=e=>e.replace(/\b_Z[\w\d_]+/g,function(n){return je("warning: build with -sDEMANGLE_SUPPORT to link in libcxxabi demangling"),n===n?n:n+" ["+n+"]"});function vn(e,n){i.pa[e]={l:n}}function z(e){return(e&61440)===16384}function ae(e,n){var a;if(a=(a=he(e,"x"))?a:e.h.lookup?0:2)throw new i.g(a,e);for(a=i.F[En(e.id,n)];a;a=a.N){var l=a.name;if(a.parent.id===e.id&&l===n)return a}return i.lookup(e,n)}function B(e,n={}){if(e=de(e),!e)return{path:"",node:null};if(n=Object.assign({ba:!0,ka:0},n),8<n.ka)throw new i.g(32);e=e.split("/").filter(_=>!!_);for(var a=i.root,l="/",o=0;o<e.length;o++){var c=o===e.length-1;if(c&&n.parent)break;if(a=ae(a,e[o]),l=te(l+"/"+e[o]),a.A&&(!c||c&&n.ba)&&(a=a.A.root),!c||n.B){for(c=0;(a.mode&61440)===40960;)if(a=i.readlink(l),l=de(mn(l),a),a=B(l,{ka:n.ka+1}).node,40<c++)throw new i.g(32)}}return{path:l,node:a}}function fe(e){for(var n;;){if(i.Z(e))return e=e.s.ua,n?e[e.length-1]!=="/"?`${e}/${n}`:e+n:e;n=n?`${e.name}/${n}`:e.name,e=e.parent}}function En(e,n){for(var a=0,l=0;l<n.length;l++)a=(a<<5)-a+n.charCodeAt(l)|0;return(e+a>>>0)%i.F.length}function ot(e){var n=En(e.parent.id,e.name);e.N=i.F[n],i.F[n]=e}function Ye(e){var n=En(e.parent.id,e.name);if(i.F[n]===e)i.F[n]=e.N;else for(n=i.F[n];n;){if(n.N===e){n.N=e.N;break}n=n.N}}function st(e){var n=["r","w","rw"][e&3];return e&512&&(n+="w"),n}function he(e,n){if(i.ta)return 0;if(!n.includes("r")||e.mode&292){if(n.includes("w")&&!(e.mode&146)||n.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function Tn(e,n){try{return ae(e,n),20}catch{}return he(e,"wx")}function Xe(e,n,a){try{var l=ae(e,n)}catch(o){return o.u}if(e=he(e,"wx"))return e;if(a){if(!z(l.mode))return 54;if(i.Z(l)||fe(l)===i.cwd())return 10}else if(z(l.mode))return 31;return 0}function da(){for(var e=0;e<=i.xa;e++)if(!i.streams[e])return e;throw new i.g(33)}function Y(e){if(e=i.qa(e),!e)throw new i.g(8);return e}function xn(e,n=-1){return i.X||(i.X=function(){this.I={}},i.X.prototype={},Object.defineProperties(i.X.prototype,{object:{get(){return this.node},set(a){this.node=a}},flags:{get(){return this.I.flags},set(a){this.I.flags=a}},position:{get(){return this.I.position},set(a){this.I.position=a}}})),e=Object.assign(new i.X,e),n==-1&&(n=da()),e.fd=n,i.streams[n]=e}function ut(e){var n=[];for(e=[e];e.length;){var a=e.pop();n.push(a),e.push.apply(e,a.U)}return n}function Ze(e,n,a){return typeof a=="undefined"&&(a=n,n=438),i.J(e,n|8192,a)}function ct(){i.g||(i.g=function(e,n){this.name="ErrnoError",this.node=n,this.Sa=function(a){this.u=a;for(var l in it)if(it[l]===a){this.code=l;break}},this.Sa(e),this.message=ua[e],this.stack&&(Object.defineProperty(this,"stack",{value:Error().stack,writable:!0}),this.stack=ca(this.stack))},i.g.prototype=Error(),i.g.prototype.constructor=i.g,[44].forEach(e=>{i.da[e]=new i.g(e),i.da[e].stack="<generic error, no stack>"}))}function dt(e,n){try{var a=B(e,{B:!n});e=a.path}catch{}var l={Z:!1,exists:!1,error:0,name:null,path:null,object:null,Oa:!1,Qa:null,Pa:null};try{a=B(e,{parent:!0}),l.Oa=!0,l.Qa=a.path,l.Pa=a.node,l.name=ce(e),a=B(e,{B:!n}),l.exists=!0,l.path=a.path,l.object=a.node,l.name=a.node.name,l.Z=a.path==="/"}catch(o){l.error=o.u}return l}function fa(e,n,a,l){return e=typeof e=="string"?e:fe(e),n=te(e+"/"+n),i.create(n,yn(a,l))}function Ln(e){if(!(e.La||e.Ma||e.link||e.m)){if(typeof XMLHttpRequest!="undefined")throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(ke)try{e.m=Je(ke(e.url),!0),e.o=e.m.length}catch{throw new i.g(29)}else throw Error("Cannot load without read() or XMLHttpRequest.")}}var i={root:null,U:[],pa:{},streams:[],Na:1,F:null,oa:"/",Y:!1,ta:!0,g:null,da:{},Fa:null,W:0,createNode(e,n,a,l){return m(typeof e=="object"),e=new i.wa(e,n,a,l),ot(e),e},Z(e){return e===e.parent},isFile(e){return(e&61440)===32768},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},xa:4096,qa:e=>i.streams[e],Da:{open(e){e.l=i.Ga(e.node.rdev).l,e.l.open&&e.l.open(e)},D(){throw new i.g(70)}},ha:e=>e>>8,nb:e=>e&255,M:(e,n)=>e<<8|n,Ga:e=>i.pa[e],va(e,n){function a(_){return m(0<i.W),i.W--,n(_)}function l(_){if(_){if(!l.Ea)return l.Ea=!0,a(_)}else++c>=o.length&&a(null)}typeof e=="function"&&(n=e,e=!1),i.W++,1<i.W&&H(`warning: ${i.W} FS.syncfs operations in flight at once, probably just doing extra work`);var o=ut(i.root.s),c=0;o.forEach(_=>{if(!_.type.va)return l(null);_.type.va(_,e,l)})},s(e,n,a){if(typeof e=="string")throw e;var l=a==="/",o=!a;if(l&&i.root)throw new i.g(10);if(!l&&!o){var c=B(a,{ba:!1});if(a=c.path,c=c.node,c.A)throw new i.g(10);if(!z(c.mode))throw new i.g(54)}return n={type:e,rb:n,ua:a,U:[]},e=e.s(n),e.s=n,n.root=e,l?i.root=e:c&&(c.A=n,c.s&&c.s.U.push(n)),e},xb(e){if(e=B(e,{ba:!1}),!e.node.A)throw new i.g(28);e=e.node;var n=e.A,a=ut(n);Object.keys(i.F).forEach(l=>{for(l=i.F[l];l;){var o=l.N;a.includes(l.s)&&Ye(l),l=o}}),e.A=null,n=e.s.U.indexOf(n),m(n!==-1),e.s.U.splice(n,1)},lookup(e,n){return e.h.lookup(e,n)},J(e,n,a){var l=B(e,{parent:!0}).node;if(e=ce(e),!e||e==="."||e==="..")throw new i.g(28);var o=Tn(l,e);if(o)throw new i.g(o);if(!l.h.J)throw new i.g(63);return l.h.J(l,e,n,a)},create(e,n){return i.J(e,(n!==void 0?n:438)&4095|32768,0)},mkdir(e,n){return i.J(e,(n!==void 0?n:511)&1023|16384,0)},ob(e,n){e=e.split("/");for(var a="",l=0;l<e.length;++l)if(e[l]){a+="/"+e[l];try{i.mkdir(a,n)}catch(o){if(o.u!=20)throw o}}},symlink(e,n){if(!de(e))throw new i.g(44);var a=B(n,{parent:!0}).node;if(!a)throw new i.g(44);n=ce(n);var l=Tn(a,n);if(l)throw new i.g(l);if(!a.h.symlink)throw new i.g(63);return a.h.symlink(a,n,e)},rename(e,n){var a=mn(e),l=mn(n),o=ce(e),c=ce(n),_=B(e,{parent:!0}),p=_.node;if(_=B(n,{parent:!0}),_=_.node,!p||!_)throw new i.g(44);if(p.s!==_.s)throw new i.g(75);var S=ae(p,o);if(e=nt(e,l),e.charAt(0)!==".")throw new i.g(28);if(e=nt(n,a),e.charAt(0)!==".")throw new i.g(55);try{var w=ae(_,c)}catch{}if(S!==w){if(n=z(S.mode),o=Xe(p,o,n))throw new i.g(o);if(o=w?Xe(_,c,n):Tn(_,c))throw new i.g(o);if(!p.h.rename)throw new i.g(63);if(S.A||w&&w.A)throw new i.g(10);if(_!==p&&(o=he(p,"w")))throw new i.g(o);Ye(S);try{p.h.rename(S,_,c)}catch(K){throw K}finally{ot(S)}}},rmdir(e){var n=B(e,{parent:!0}).node;e=ce(e);var a=ae(n,e),l=Xe(n,e,!0);if(l)throw new i.g(l);if(!n.h.rmdir)throw new i.g(63);if(a.A)throw new i.g(10);n.h.rmdir(n,e),Ye(a)},readdir(e){if(e=B(e,{B:!0}).node,!e.h.readdir)throw new i.g(54);return e.h.readdir(e)},unlink(e){var n=B(e,{parent:!0}).node;if(!n)throw new i.g(44);e=ce(e);var a=ae(n,e),l=Xe(n,e,!1);if(l)throw new i.g(l);if(!n.h.unlink)throw new i.g(63);if(a.A)throw new i.g(10);n.h.unlink(n,e),Ye(a)},readlink(e){if(e=B(e).node,!e)throw new i.g(44);if(!e.h.readlink)throw new i.g(28);return de(fe(e.parent),e.h.readlink(e))},stat(e,n){if(e=B(e,{B:!n}).node,!e)throw new i.g(44);if(!e.h.C)throw new i.g(63);return e.h.C(e)},lstat(e){return i.stat(e,!0)},chmod(e,n,a){if(e=typeof e=="string"?B(e,{B:!a}).node:e,!e.h.v)throw new i.g(63);e.h.v(e,{mode:n&4095|e.mode&-4096,timestamp:Date.now()})},lchmod(e,n){i.chmod(e,n,!0)},fchmod(e,n){e=Y(e),i.chmod(e.node,n)},chown(e,n,a,l){if(e=typeof e=="string"?B(e,{B:!l}).node:e,!e.h.v)throw new i.g(63);e.h.v(e,{timestamp:Date.now()})},lchown(e,n,a){i.chown(e,n,a,!0)},fchown(e,n,a){e=Y(e),i.chown(e.node,n,a)},truncate(e,n){if(0>n)throw new i.g(28);if(e=typeof e=="string"?B(e,{B:!0}).node:e,!e.h.v)throw new i.g(63);if(z(e.mode))throw new i.g(31);if(!i.isFile(e.mode))throw new i.g(28);var a=he(e,"w");if(a)throw new i.g(a);e.h.v(e,{size:n,timestamp:Date.now()})},kb(e,n){if(e=Y(e),!(e.flags&2097155))throw new i.g(28);i.truncate(e.node,n)},yb(e,n,a){e=B(e,{B:!0}).node,e.h.v(e,{timestamp:Math.max(n,a)})},open(e,n,a){if(e==="")throw new i.g(44);if(typeof n=="string"){var l={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[n];if(typeof l=="undefined")throw Error(`Unknown file open mode: ${n}`);n=l}if(a=n&64?(typeof a=="undefined"?438:a)&4095|32768:0,typeof e=="object")var o=e;else{e=te(e);try{o=B(e,{B:!(n&131072)}).node}catch{}}if(l=!1,n&64)if(o){if(n&128)throw new i.g(20)}else o=i.J(e,a,0),l=!0;if(!o)throw new i.g(44);if((o.mode&61440)===8192&&(n&=-513),n&65536&&!z(o.mode))throw new i.g(54);if(!l&&(a=o?(o.mode&61440)===40960?32:z(o.mode)&&(st(n)!=="r"||n&512)?31:he(o,st(n)):44))throw new i.g(a);return n&512&&!l&&i.truncate(o,0),n&=-131713,o=xn({node:o,path:fe(o),flags:n,seekable:!0,position:0,l:o.l,Xa:[],error:!1}),o.l.open&&o.l.open(o),!r.logReadFiles||n&1||(i.ja||(i.ja={}),e in i.ja||(i.ja[e]=1)),o},close(e){if(e.fd===null)throw new i.g(8);e.ea&&(e.ea=null);try{e.l.close&&e.l.close(e)}catch(n){throw n}finally{i.streams[e.fd]=null}e.fd=null},D(e,n,a){if(e.fd===null)throw new i.g(8);if(!e.seekable||!e.l.D)throw new i.g(70);if(a!=0&&a!=1&&a!=2)throw new i.g(28);return e.position=e.l.D(e,n,a),e.Xa=[],e.position},read(e,n,a,l,o){if(m(0<=a),0>l||0>o)throw new i.g(28);if(e.fd===null)throw new i.g(8);if((e.flags&2097155)===1)throw new i.g(8);if(z(e.node.mode))throw new i.g(31);if(!e.l.read)throw new i.g(28);var c=typeof o!="undefined";if(!c)o=e.position;else if(!e.seekable)throw new i.g(70);return n=e.l.read(e,n,a,l,o),c||(e.position+=n),n},write(e,n,a,l,o,c){if(m(0<=a),0>l||0>o)throw new i.g(28);if(e.fd===null)throw new i.g(8);if(!(e.flags&2097155))throw new i.g(8);if(z(e.node.mode))throw new i.g(31);if(!e.l.write)throw new i.g(28);e.seekable&&e.flags&1024&&i.D(e,0,2);var _=typeof o!="undefined";if(!_)o=e.position;else if(!e.seekable)throw new i.g(70);return n=e.l.write(e,n,a,l,o,c),_||(e.position+=n),n},T(e,n,a){if(e.fd===null)throw new i.g(8);if(0>n||0>=a)throw new i.g(28);if(!(e.flags&2097155))throw new i.g(8);if(!i.isFile(e.node.mode)&&!z(e.node.mode))throw new i.g(43);if(!e.l.T)throw new i.g(138);e.l.T(e,n,a)},S(e,n,a,l,o){if(l&2&&!(o&2)&&(e.flags&2097155)!==2)throw new i.g(2);if((e.flags&2097155)===1)throw new i.g(2);if(!e.l.S)throw new i.g(43);return e.l.S(e,n,a,l,o)},V(e,n,a,l,o){return m(0<=a),e.l.V?e.l.V(e,n,a,l,o):0},qb:()=>0,fa(e,n,a){if(!e.l.fa)throw new i.g(59);return e.l.fa(e,n,a)},readFile(e,n={}){if(n.flags=n.flags||0,n.encoding=n.encoding||"binary",n.encoding!=="utf8"&&n.encoding!=="binary")throw Error(`Invalid encoding type "${n.encoding}"`);var a,l=i.open(e,n.flags);e=i.stat(e).size;var o=new Uint8Array(e);return i.read(l,o,0,e,0),n.encoding==="utf8"?a=Oe(o,0):n.encoding==="binary"&&(a=o),i.close(l),a},writeFile(e,n,a={}){if(a.flags=a.flags||577,e=i.open(e,a.flags,a.mode),typeof n=="string"){var l=new Uint8Array(Ke(n)+1);n=wn(n,l,0,l.length),i.write(e,l,0,n,void 0,a.Ca)}else if(ArrayBuffer.isView(n))i.write(e,n,0,n.byteLength,void 0,a.Ca);else throw Error("Unsupported data type");i.close(e)},cwd:()=>i.oa,chdir(e){if(e=B(e,{B:!0}),e.node===null)throw new i.g(44);if(!z(e.node.mode))throw new i.g(54);var n=he(e.node,"x");if(n)throw new i.g(n);i.oa=e.path},R(e,n,a){m(!i.R.Y,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),i.R.Y=!0,ct(),r.stdin=e||r.stdin,r.stdout=n||r.stdout,r.stderr=a||r.stderr,r.stdin?i.L("/dev","stdin",r.stdin):i.symlink("/dev/tty","/dev/stdin"),r.stdout?i.L("/dev","stdout",null,r.stdout):i.symlink("/dev/tty","/dev/stdout"),r.stderr?i.L("/dev","stderr",null,r.stderr):i.symlink("/dev/tty1","/dev/stderr"),e=i.open("/dev/stdin",0),n=i.open("/dev/stdout",1),a=i.open("/dev/stderr",1),m(e.fd===0,`invalid handle for stdin (${e.fd})`),m(n.fd===1,`invalid handle for stdout (${n.fd})`),m(a.fd===2,`invalid handle for stderr (${a.fd})`)},sb(){i.R.Y=!1,kt(0);for(var e=0;e<i.streams.length;e++){var n=i.streams[e];n&&i.close(n)}},jb(e,n){return e=dt(e,n),e.exists?e.object:null},hb(e,n){for(e=typeof e=="string"?e:fe(e),n=n.split("/").reverse();n.length;){var a=n.pop();if(a){var l=te(e+"/"+a);try{i.mkdir(l)}catch{}e=l}}return l},L(e,n,a,l){e=na(typeof e=="string"?e:fe(e),n),n=yn(!!a,!!l),i.L.ha||(i.L.ha=64);var o=i.M(i.L.ha++,0);return vn(o,{open(c){c.seekable=!1},close(){l&&l.buffer&&l.buffer.length&&l(10)},read(c,_,p,S){for(var w=0,K=0;K<S;K++){try{var v=a()}catch{throw new i.g(29)}if(v===void 0&&w===0)throw new i.g(6);if(v==null)break;w++,_[p+K]=v}return w&&(c.node.timestamp=Date.now()),w},write(c,_,p,S){for(var w=0;w<S;w++)try{l(_[p+w])}catch{throw new i.g(29)}return S&&(c.node.timestamp=Date.now()),w}}),Ze(e,n,o)},fb(e,n,a,l,o){function c(){this.ga=!1,this.I=[]}function _(v,D,f,j,L){if(v=v.node.m,L>=v.length)return 0;if(j=Math.min(v.length-L,j),m(0<=j),v.slice)for(var A=0;A<j;A++)D[f+A]=v[L+A];else for(A=0;A<j;A++)D[f+A]=v.get(L+A);return j}if(c.prototype.get=function(v){if(!(v>this.length-1||0>v)){var D=v%this.chunkSize;return this.sa(v/this.chunkSize|0)[D]}},c.prototype.Ha=function(v){this.sa=v},c.prototype.ma=function(){var v=new XMLHttpRequest;if(v.open("HEAD",a,!1),v.send(null),!(200<=v.status&&300>v.status||v.status===304))throw Error("Couldn't load "+a+". Status: "+v.status);var D=Number(v.getResponseHeader("Content-length")),f,j=(f=v.getResponseHeader("Accept-Ranges"))&&f==="bytes";v=(f=v.getResponseHeader("Content-Encoding"))&&f==="gzip";var L=1048576;j||(L=D);var A=this;A.Ha(G=>{var X=G*L,Z=(G+1)*L-1;if(Z=Math.min(Z,D-1),typeof A.I[G]=="undefined"){var Pn=A.I;if(X>Z)throw Error("invalid range ("+X+", "+Z+") or no bytes requested!");if(Z>D-1)throw Error("only "+D+" bytes available! programmer error!");var q=new XMLHttpRequest;if(q.open("GET",a,!1),D!==L&&q.setRequestHeader("Range","bytes="+X+"-"+Z),q.responseType="arraybuffer",q.overrideMimeType&&q.overrideMimeType("text/plain; charset=x-user-defined"),q.send(null),!(200<=q.status&&300>q.status||q.status===304))throw Error("Couldn't load "+a+". Status: "+q.status);X=q.response!==void 0?new Uint8Array(q.response||[]):Je(q.responseText||"",!0),Pn[G]=X}if(typeof A.I[G]=="undefined")throw Error("doXHR failed!");return A.I[G]}),(v||!D)&&(L=D=1,L=D=this.sa(0).length,Te("LazyFiles on gzip forces download of the whole file when length is accessed")),this.za=D,this.ya=L,this.ga=!0},typeof XMLHttpRequest!="undefined"){if(!P)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p=new c;Object.defineProperties(p,{length:{get:function(){return this.ga||this.ma(),this.za}},chunkSize:{get:function(){return this.ga||this.ma(),this.ya}}});var S=void 0}else S=a,p=void 0;var w=fa(e,n,l,o);p?w.m=p:S&&(w.m=null,w.url=S),Object.defineProperties(w,{o:{get:function(){return this.m.length}}});var K={};return Object.keys(w.l).forEach(v=>{var D=w.l[v];K[v]=function(){return Ln(w),D.apply(null,arguments)}}),K.read=(v,D,f,j,L)=>(Ln(w),_(v,D,f,j,L)),K.S=(v,D,f)=>{Ln(w);var j=rt();if(!j)throw new i.g(48);return _(v,Q,j,D,f),{Ra:j,Aa:!0}},w.l=K,w},Ya(){C("FS.absolutePath has been removed; use PATH_FS.resolve instead")},eb(){C("FS.createFolder has been removed; use FS.mkdir instead")},gb(){C("FS.createLink has been removed; use FS.symlink instead")},mb(){C("FS.joinPath has been removed; use PATH.join instead")},pb(){C("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},vb(){C("FS.standardizePath has been removed; use PATH.normalize instead")}},$=e=>(m(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?Oe(ze,e):"");function He(e,n){if(n.charAt(0)==="/")return n;if(e=e===-100?i.cwd():Y(e).path,n.length==0)throw new i.g(44);return te(e+"/"+n)}var Se=void 0;function re(){m(Se!=null);var e=y[+Se>>2];return Se+=4,e}var $e=(e,n,a)=>(m(typeof a=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),wn(e,ze,n,a)),Ue=e=>e%4===0&&(e%100!==0||e%400===0),ft=[0,31,60,91,121,152,182,213,244,274,305,335],ht=[0,31,59,90,120,151,181,212,243,273,304,334],jn=e=>{var n=Ke(e)+1,a=_a(n);return a&&$e(e,a,n),a},en={},_t=()=>{if(!On){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:k||"./this.program"},n;for(n in en)en[n]===void 0?delete e[n]:e[n]=en[n];var a=[];for(n in e)a.push(`${n}=${e[n]}`);On=a}return On},On,gt=[31,29,31,30,31,30,31,31,30,31,30,31],bt=[31,28,31,30,31,30,31,31,30,31,30,31],mt=(e,n)=>{m(0<=e.length,"writeArrayToMemory array must have a length (should be an array or typed array)"),Q.set(e,n)},_e=[],W,Kn=e=>{var n=_e[e];return n||(e>=_e.length&&(_e.length=e+1),_e[e]=n=W.get(e)),m(W.get(e)==n,"JavaScript-side Wasm function table mirror is out of date!"),n},ha=e=>{var n=r["_"+e];return m(n,"Cannot call unknown function "+e+", make sure it is exported"),n},ge,Sn=[];function pt(e,n,a,l){e||(e=this),this.parent=e,this.s=e.s,this.A=null,this.id=i.Na++,this.name=n,this.mode=a,this.h={},this.l={},this.rdev=l}Object.defineProperties(pt.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}},Ma:{get:function(){return z(this.mode)}},La:{get:function(){return(this.mode&61440)===8192}}}),i.wa=pt,i.ib=(e,n,a,l,o,c,_,p,S,w)=>{function K(f){function j(L){if(w&&w(),!p){var A=e,G=n;if(A&&(A=typeof A=="string"?A:fe(A),G=n?te(A+"/"+n):A),A=yn(l,o),G=i.create(G,A),L){if(typeof L=="string"){for(var X=Array(L.length),Z=0,Pn=L.length;Z<Pn;++Z)X[Z]=L.charCodeAt(Z);L=X}i.chmod(G,A|146),X=i.open(G,577),i.write(X,L,0,L.length,0,S),i.close(X),i.chmod(G,A)}}c&&c(),qe(D)}sa(f,v,j,()=>{_&&_(),qe(D)})||j(f)}var v=n?de(te(e+"/"+n)):e,D=Qn(`cp ${v}`);gn(D),typeof a=="string"?ia(a,f=>K(f),_):K(a)},ct(),i.F=Array(4096),i.s(U,{},"/"),i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user"),function(){i.mkdir("/dev"),vn(i.M(1,3),{read:()=>0,write:(l,o,c,_)=>_}),Ze("/dev/null",i.M(1,3)),at(i.M(5,0),ra),at(i.M(6,0),la),Ze("/dev/tty",i.M(5,0)),Ze("/dev/tty1",i.M(6,0));var e=new Uint8Array(1024),n=0,a=()=>(n===0&&(n=et(e).byteLength),e[--n]);i.L("/dev","random",a),i.L("/dev","urandom",a),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")}(),function(){i.mkdir("/proc");var e=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.s({s(){var n=i.createNode(e,"fd",16895,73);return n.h={lookup(a,l){var o=Y(+l);return a={parent:null,s:{ua:"fake"},h:{readlink:()=>o.path}},a.parent=a}},n}},{},"/proc/self/fd")}(),i.Fa={MEMFS:U};var wt={__syscall_dup3:function(e,n,a){try{var l=Y(e);if(m(!a),l.fd===n)return-28;var o=i.qa(n);return o&&i.close(o),xn(l,n).fd}catch(c){if(typeof i=="undefined"||c.name!=="ErrnoError")throw c;return-c.u}},__syscall_fcntl64:function(e,n,a){Se=a;try{var l=Y(e);switch(n){case 0:var o=re();if(0>o)return-28;for(;i.streams[o];)o++;return xn(l,o).fd;case 1:case 2:return 0;case 3:return l.flags;case 4:return o=re(),l.flags|=o,0;case 5:return o=re(),xe[o+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return y[Un()>>2]=28,-1;default:return-28}}catch(c){if(typeof i=="undefined"||c.name!=="ErrnoError")throw c;return-c.u}},__syscall_ioctl:function(e,n,a){Se=a;try{var l=Y(e);switch(n){case 21509:return l.tty?0:-59;case 21505:if(!l.tty)return-59;if(l.tty.K.Ia){e=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var o=re();y[o>>2]=25856,y[o+4>>2]=5,y[o+8>>2]=191,y[o+12>>2]=35387;for(var c=0;32>c;c++)Q[o+c+17>>0]=e[c]||0}return 0;case 21510:case 21511:case 21512:return l.tty?0:-59;case 21506:case 21507:case 21508:if(!l.tty)return-59;if(l.tty.K.Ja)for(o=re(),e=[],c=0;32>c;c++)e.push(Q[o+c+17>>0]);return 0;case 21519:return l.tty?(o=re(),y[o>>2]=0):-59;case 21520:return l.tty?-28:-59;case 21531:return o=re(),i.fa(l,n,o);case 21523:return l.tty?(l.tty.K.Ka&&(c=[24,80],o=re(),xe[o>>1]=c[0],xe[o+2>>1]=c[1]),0):-59;case 21524:return l.tty?0:-59;case 21515:return l.tty?0:-59;default:return-28}}catch(_){if(typeof i=="undefined"||_.name!=="ErrnoError")throw _;return-_.u}},__syscall_openat:function(e,n,a,l){Se=l;try{n=$(n),n=He(e,n);var o=l?re():0;return i.open(n,a,o).fd}catch(c){if(typeof i=="undefined"||c.name!=="ErrnoError")throw c;return-c.u}},__syscall_readlinkat:function(e,n,a,l){try{if(n=$(n),n=He(e,n),0>=l)return-28;var o=i.readlink(n),c=Math.min(l,Ke(o)),_=Q[a+c];return $e(o,a,l+1),Q[a+c]=_,c}catch(p){if(typeof i=="undefined"||p.name!=="ErrnoError")throw p;return-p.u}},__syscall_renameat:function(e,n,a,l){try{return n=$(n),l=$(l),n=He(e,n),l=He(a,l),i.rename(n,l),0}catch(o){if(typeof i=="undefined"||o.name!=="ErrnoError")throw o;return-o.u}},__syscall_rmdir:function(e){try{return e=$(e),i.rmdir(e),0}catch(n){if(typeof i=="undefined"||n.name!=="ErrnoError")throw n;return-n.u}},__syscall_unlinkat:function(e,n,a){try{return n=$(n),n=He(e,n),a===0?i.unlink(n):a===512?i.rmdir(n):C("Invalid flags passed to unlinkat"),0}catch(l){if(typeof i=="undefined"||l.name!=="ErrnoError")throw l;return-l.u}},_emscripten_get_now_is_monotonic:()=>1,_emscripten_throw_longjmp:()=>{throw 1/0},_gmtime_js:function(e,n){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),y[n>>2]=e.getUTCSeconds(),y[n+4>>2]=e.getUTCMinutes(),y[n+8>>2]=e.getUTCHours(),y[n+12>>2]=e.getUTCDate(),y[n+16>>2]=e.getUTCMonth(),y[n+20>>2]=e.getUTCFullYear()-1900,y[n+24>>2]=e.getUTCDay(),y[n+28>>2]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},_localtime_js:function(e,n){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),y[n>>2]=e.getSeconds(),y[n+4>>2]=e.getMinutes(),y[n+8>>2]=e.getHours(),y[n+12>>2]=e.getDate(),y[n+16>>2]=e.getMonth(),y[n+20>>2]=e.getFullYear()-1900,y[n+24>>2]=e.getDay(),y[n+28>>2]=(Ue(e.getFullYear())?ft:ht)[e.getMonth()]+e.getDate()-1|0,y[n+36>>2]=-(60*e.getTimezoneOffset());var a=new Date(e.getFullYear(),6,1).getTimezoneOffset(),l=new Date(e.getFullYear(),0,1).getTimezoneOffset();y[n+32>>2]=(a!=l&&e.getTimezoneOffset()==Math.min(l,a))|0},_mktime_js:function(e){var n=new Date(y[e+20>>2]+1900,y[e+16>>2],y[e+12>>2],y[e+8>>2],y[e+4>>2],y[e>>2],0),a=y[e+32>>2],l=n.getTimezoneOffset(),o=new Date(n.getFullYear(),6,1).getTimezoneOffset(),c=new Date(n.getFullYear(),0,1).getTimezoneOffset(),_=Math.min(c,o);return 0>a?y[e+32>>2]=+(o!=c&&_==l):0<a!=(_==l)&&(o=Math.max(c,o),n.setTime(n.getTime()+6e4*((0<a?_:o)-l))),y[e+24>>2]=n.getDay(),y[e+28>>2]=(Ue(n.getFullYear())?ft:ht)[n.getMonth()]+n.getDate()-1|0,y[e>>2]=n.getSeconds(),y[e+4>>2]=n.getMinutes(),y[e+8>>2]=n.getHours(),y[e+12>>2]=n.getDate(),y[e+16>>2]=n.getMonth(),y[e+20>>2]=n.getYear(),e=n.getTime(),isNaN(e)?(y[Un()>>2]=61,e=-1):e/=1e3,BigInt(e)},_tzset_js:(e,n,a)=>{function l(S){return(S=S.toTimeString().match(/\(([A-Za-z ]+)\)$/))?S[1]:"GMT"}var o=new Date().getFullYear(),c=new Date(o,0,1),_=new Date(o,6,1);o=c.getTimezoneOffset();var p=_.getTimezoneOffset();N[e>>2]=60*Math.max(o,p),y[n>>2]=+(o!=p),e=l(c),n=l(_),e=jn(e),n=jn(n),p<o?(N[a>>2]=e,N[a+4>>2]=n):(N[a>>2]=n,N[a+4>>2]=e)},abort:()=>{C("native code called abort()")},emscripten_date_now:()=>Date.now(),emscripten_get_now:()=>performance.now(),emscripten_resize_heap:e=>{var n=ze.length;if(e>>>=0,m(e>n),2147483648<e)return H(`Cannot enlarge memory, requested ${e} bytes, but the limit is ${2147483648} bytes!`),!1;for(var a=1;4>=a;a*=2){var l=n*(1+.2/a);l=Math.min(l,e+100663296);var o=Math;l=Math.max(e,l),o=o.min.call(o,2147483648,l+(65536-l%65536)%65536);e:{l=o;var c=Ie.buffer,_=(l-c.byteLength+65535)/65536;try{Ie.grow(_),Cn();var p=1;break e}catch(S){H(`growMemory: Attempted to grow heap from ${c.byteLength} bytes to ${l} bytes, but got error: ${S}`)}p=void 0}if(p)return!0}return H(`Failed to grow the heap from ${n} bytes to ${o} bytes, not enough memory!`),!1},environ_get:(e,n)=>{var a=0;return _t().forEach((l,o)=>{var c=n+a;for(o=N[e+4*o>>2]=c,c=0;c<l.length;++c)m(l.charCodeAt(c)===(l.charCodeAt(c)&255)),Q[o++>>0]=l.charCodeAt(c);Q[o>>0]=0,a+=l.length+1}),0},environ_sizes_get:(e,n)=>{var a=_t();N[e>>2]=a.length;var l=0;return a.forEach(o=>l+=o.length+1),N[n>>2]=l,0},exit:e=>{ma(),Fe=!0,O(e,new Zn(e))},fd_close:function(e){try{var n=Y(e);return i.close(n),0}catch(a){if(typeof i=="undefined"||a.name!=="ErrnoError")throw a;return a.u}},fd_read:function(e,n,a,l){try{e:{var o=Y(e);e=n;for(var c,_=n=0;_<a;_++){var p=N[e>>2],S=N[e+4>>2];e+=8;var w=i.read(o,Q,p,S,c);if(0>w){var K=-1;break e}if(n+=w,w<S)break;typeof c!="undefined"&&(c+=w)}K=n}return N[l>>2]=K,0}catch(v){if(typeof i=="undefined"||v.name!=="ErrnoError")throw v;return v.u}},fd_seek:function(e,n,a,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n);try{if(isNaN(n))return 61;var o=Y(e);return i.D(o,n,a),We[l>>3]=BigInt(o.position),o.ea&&n===0&&a===0&&(o.ea=null),0}catch(c){if(typeof i=="undefined"||c.name!=="ErrnoError")throw c;return c.u}},fd_write:function(e,n,a,l){try{e:{var o=Y(e);e=n;for(var c,_=n=0;_<a;_++){var p=N[e>>2],S=N[e+4>>2];e+=8;var w=i.write(o,Q,p,S,c);if(0>w){var K=-1;break e}n+=w,typeof c!="undefined"&&(c+=w)}K=n}return N[l>>2]=K,0}catch(v){if(typeof i=="undefined"||v.name!=="ErrnoError")throw v;return v.u}},invoke_vii:ba,strftime:(e,n,a,l)=>{function o(f,j,L){for(f=typeof f=="number"?f.toString():f||"";f.length<j;)f=L[0]+f;return f}function c(f,j){return o(f,j,"0")}function _(f,j){function L(G){return 0>G?-1:0<G?1:0}var A;return(A=L(f.getFullYear()-j.getFullYear()))===0&&(A=L(f.getMonth()-j.getMonth()))===0&&(A=L(f.getDate()-j.getDate())),A}function p(f){switch(f.getDay()){case 0:return new Date(f.getFullYear()-1,11,29);case 1:return f;case 2:return new Date(f.getFullYear(),0,3);case 3:return new Date(f.getFullYear(),0,2);case 4:return new Date(f.getFullYear(),0,1);case 5:return new Date(f.getFullYear()-1,11,31);case 6:return new Date(f.getFullYear()-1,11,30)}}function S(f){var j=f.O;for(f=new Date(new Date(f.P+1900,0,1).getTime());0<j;){var L=f.getMonth(),A=(Ue(f.getFullYear())?gt:bt)[L];if(j>A-f.getDate())j-=A-f.getDate()+1,f.setDate(1),11>L?f.setMonth(L+1):(f.setMonth(0),f.setFullYear(f.getFullYear()+1));else{f.setDate(f.getDate()+j);break}}return L=new Date(f.getFullYear()+1,0,4),j=p(new Date(f.getFullYear(),0,4)),L=p(L),0>=_(j,f)?0>=_(L,f)?f.getFullYear()+1:f.getFullYear():f.getFullYear()-1}var w=N[l+40>>2];l={Va:y[l>>2],Ua:y[l+4>>2],$:y[l+8>>2],la:y[l+12>>2],aa:y[l+16>>2],P:y[l+20>>2],H:y[l+24>>2],O:y[l+28>>2],wb:y[l+32>>2],Ta:y[l+36>>2],Wa:w?$(w):""},a=$(a),w={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var K in w)a=a.replace(new RegExp(K,"g"),w[K]);var v="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),D="January February March April May June July August September October November December".split(" ");w={"%a":f=>v[f.H].substring(0,3),"%A":f=>v[f.H],"%b":f=>D[f.aa].substring(0,3),"%B":f=>D[f.aa],"%C":f=>c((f.P+1900)/100|0,2),"%d":f=>c(f.la,2),"%e":f=>o(f.la,2," "),"%g":f=>S(f).toString().substring(2),"%G":f=>S(f),"%H":f=>c(f.$,2),"%I":f=>(f=f.$,f==0?f=12:12<f&&(f-=12),c(f,2)),"%j":f=>{for(var j=0,L=0;L<=f.aa-1;j+=(Ue(f.P+1900)?gt:bt)[L++]);return c(f.la+j,3)},"%m":f=>c(f.aa+1,2),"%M":f=>c(f.Ua,2),"%n":()=>`
`,"%p":f=>0<=f.$&&12>f.$?"AM":"PM","%S":f=>c(f.Va,2),"%t":()=>"	","%u":f=>f.H||7,"%U":f=>c(Math.floor((f.O+7-f.H)/7),2),"%V":f=>{var j=Math.floor((f.O+7-(f.H+6)%7)/7);if(2>=(f.H+371-f.O-2)%7&&j++,j)j==53&&(L=(f.H+371-f.O)%7,L==4||L==3&&Ue(f.P)||(j=1));else{j=52;var L=(f.H+7-f.O-1)%7;(L==4||L==5&&Ue(f.P%400-1))&&j++}return c(j,2)},"%w":f=>f.H,"%W":f=>c(Math.floor((f.O+7-(f.H+6)%7)/7),2),"%y":f=>(f.P+1900).toString().substring(2),"%Y":f=>f.P+1900,"%z":f=>{f=f.Ta;var j=0<=f;return f=Math.abs(f)/60,(j?"+":"-")+("0000"+(f/60*100+f%60)).slice(-4)},"%Z":f=>f.Wa,"%%":()=>"%"},a=a.replace(/%%/g,"\0\0");for(K in w)a.includes(K)&&(a=a.replace(new RegExp(K,"g"),w[K](l)));return a=a.replace(/\0\0/g,"%"),K=Je(a,!1),K.length>n?0:(mt(K,e),K.length-1)},system:e=>{if(M){if(!e)return 1;if(e=$(e),!e.length)return 0;e=Ee("child_process").ub(e,[],{tb:!0,stdio:"inherit"});var n=(a,l)=>a<<8|l;return e.status===null?n(0,(a=>{switch(a){case"SIGHUP":return 1;case"SIGQUIT":return 3;case"SIGFPE":return 8;case"SIGKILL":return 9;case"SIGALRM":return 14;case"SIGTERM":return 15}return 2})(e.signal)):e.status<<8|0}return e?(y[Un()>>2]=52,-1):0}},be=function(){var e={env:wt,wasi_snapshot_preview1:wt};gn("wasm-instantiate");var n=r;return ea(e,function(a){m(r===n,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),n=null,be=a.instance.exports,Ie=be.memory,m(Ie,"memory not found in wasm exports"),Cn(),W=be.__indirect_function_table,m(W,"table not found in wasm exports"),hn.unshift(be.__wasm_call_ctors),qe("wasm-instantiate")}).catch(s),{}}();r._lua_checkstack=d("lua_checkstack"),r._lua_xmove=d("lua_xmove"),r._lua_atpanic=d("lua_atpanic"),r._lua_version=d("lua_version"),r._lua_absindex=d("lua_absindex"),r._lua_gettop=d("lua_gettop"),r._lua_settop=d("lua_settop"),r._lua_closeslot=d("lua_closeslot"),r._lua_rotate=d("lua_rotate"),r._lua_copy=d("lua_copy"),r._lua_pushvalue=d("lua_pushvalue"),r._lua_type=d("lua_type"),r._lua_typename=d("lua_typename"),r._lua_iscfunction=d("lua_iscfunction"),r._lua_isinteger=d("lua_isinteger"),r._lua_isnumber=d("lua_isnumber"),r._lua_isstring=d("lua_isstring"),r._lua_isuserdata=d("lua_isuserdata"),r._lua_rawequal=d("lua_rawequal"),r._lua_arith=d("lua_arith"),r._lua_compare=d("lua_compare"),r._lua_stringtonumber=d("lua_stringtonumber"),r._lua_tonumberx=d("lua_tonumberx"),r._lua_tointegerx=d("lua_tointegerx"),r._lua_toboolean=d("lua_toboolean"),r._lua_tolstring=d("lua_tolstring"),r._lua_rawlen=d("lua_rawlen"),r._lua_tocfunction=d("lua_tocfunction"),r._lua_touserdata=d("lua_touserdata"),r._lua_tothread=d("lua_tothread"),r._lua_topointer=d("lua_topointer"),r._lua_pushnil=d("lua_pushnil"),r._lua_pushnumber=d("lua_pushnumber"),r._lua_pushinteger=d("lua_pushinteger"),r._lua_pushlstring=d("lua_pushlstring"),r._lua_pushstring=d("lua_pushstring"),r._lua_pushcclosure=d("lua_pushcclosure"),r._lua_pushboolean=d("lua_pushboolean"),r._lua_pushlightuserdata=d("lua_pushlightuserdata"),r._lua_pushthread=d("lua_pushthread"),r._lua_getglobal=d("lua_getglobal"),r._lua_gettable=d("lua_gettable"),r._lua_getfield=d("lua_getfield"),r._lua_geti=d("lua_geti"),r._lua_rawget=d("lua_rawget"),r._lua_rawgeti=d("lua_rawgeti"),r._lua_rawgetp=d("lua_rawgetp"),r._lua_createtable=d("lua_createtable"),r._lua_getmetatable=d("lua_getmetatable"),r._lua_getiuservalue=d("lua_getiuservalue"),r._lua_setglobal=d("lua_setglobal"),r._lua_settable=d("lua_settable"),r._lua_setfield=d("lua_setfield"),r._lua_seti=d("lua_seti"),r._lua_rawset=d("lua_rawset"),r._lua_rawsetp=d("lua_rawsetp"),r._lua_rawseti=d("lua_rawseti"),r._lua_setmetatable=d("lua_setmetatable"),r._lua_setiuservalue=d("lua_setiuservalue"),r._lua_callk=d("lua_callk"),r._lua_pcallk=d("lua_pcallk"),r._lua_load=d("lua_load"),r._lua_dump=d("lua_dump"),r._lua_status=d("lua_status"),r._lua_error=d("lua_error"),r._lua_next=d("lua_next"),r._lua_toclose=d("lua_toclose"),r._lua_concat=d("lua_concat"),r._lua_len=d("lua_len"),r._lua_getallocf=d("lua_getallocf"),r._lua_setallocf=d("lua_setallocf"),r._lua_setwarnf=d("lua_setwarnf"),r._lua_warning=d("lua_warning"),r._lua_newuserdatauv=d("lua_newuserdatauv"),r._lua_getupvalue=d("lua_getupvalue"),r._lua_setupvalue=d("lua_setupvalue"),r._lua_upvalueid=d("lua_upvalueid"),r._lua_upvaluejoin=d("lua_upvaluejoin"),r._luaL_traceback=d("luaL_traceback"),r._lua_getstack=d("lua_getstack"),r._lua_getinfo=d("lua_getinfo"),r._luaL_buffinit=d("luaL_buffinit"),r._luaL_addstring=d("luaL_addstring"),r._luaL_prepbuffsize=d("luaL_prepbuffsize"),r._luaL_addvalue=d("luaL_addvalue"),r._luaL_pushresult=d("luaL_pushresult"),r._luaL_argerror=d("luaL_argerror"),r._luaL_typeerror=d("luaL_typeerror"),r._luaL_getmetafield=d("luaL_getmetafield"),r._luaL_where=d("luaL_where"),r._luaL_fileresult=d("luaL_fileresult");var Un=d("__errno_location");r._luaL_execresult=d("luaL_execresult"),r._luaL_newmetatable=d("luaL_newmetatable"),r._luaL_setmetatable=d("luaL_setmetatable"),r._luaL_testudata=d("luaL_testudata"),r._luaL_checkudata=d("luaL_checkudata"),r._luaL_optlstring=d("luaL_optlstring"),r._luaL_checklstring=d("luaL_checklstring"),r._luaL_checkstack=d("luaL_checkstack"),r._luaL_checktype=d("luaL_checktype"),r._luaL_checkany=d("luaL_checkany"),r._luaL_checknumber=d("luaL_checknumber"),r._luaL_optnumber=d("luaL_optnumber"),r._luaL_checkinteger=d("luaL_checkinteger"),r._luaL_optinteger=d("luaL_optinteger"),r._luaL_setfuncs=d("luaL_setfuncs"),r._luaL_addlstring=d("luaL_addlstring"),r._luaL_pushresultsize=d("luaL_pushresultsize"),r._luaL_buffinitsize=d("luaL_buffinitsize"),r._luaL_ref=d("luaL_ref"),r._luaL_unref=d("luaL_unref"),r._luaL_loadfilex=d("luaL_loadfilex"),r._luaL_loadbufferx=d("luaL_loadbufferx"),r._luaL_loadstring=d("luaL_loadstring"),r._luaL_callmeta=d("luaL_callmeta"),r._luaL_len=d("luaL_len"),r._luaL_tolstring=d("luaL_tolstring"),r._luaL_getsubtable=d("luaL_getsubtable"),r._luaL_requiref=d("luaL_requiref"),r._luaL_addgsub=d("luaL_addgsub"),r._luaL_gsub=d("luaL_gsub"),r._luaL_newstate=d("luaL_newstate"),r._lua_newstate=d("lua_newstate"),r._free=d("free"),r._realloc=d("realloc");var kt=r._fflush=d("fflush");r._luaL_checkversion_=d("luaL_checkversion_"),r._luaopen_base=d("luaopen_base"),r._luaopen_coroutine=d("luaopen_coroutine"),r._lua_newthread=d("lua_newthread"),r._lua_yieldk=d("lua_yieldk"),r._lua_isyieldable=d("lua_isyieldable"),r._lua_resetthread=d("lua_resetthread"),r._lua_resume=d("lua_resume"),r._luaopen_debug=d("luaopen_debug"),r._lua_gethookmask=d("lua_gethookmask"),r._lua_gethook=d("lua_gethook"),r._lua_gethookcount=d("lua_gethookcount"),r._lua_getlocal=d("lua_getlocal"),r._lua_sethook=d("lua_sethook"),r._lua_setlocal=d("lua_setlocal"),r._lua_setcstacklimit=d("lua_setcstacklimit");var _a=r._malloc=d("malloc");r._luaL_openlibs=d("luaL_openlibs"),r._luaopen_package=d("luaopen_package"),r._luaopen_table=d("luaopen_table"),r._luaopen_io=d("luaopen_io"),r._luaopen_os=d("luaopen_os"),r._luaopen_string=d("luaopen_string"),r._luaopen_math=d("luaopen_math"),r._luaopen_utf8=d("luaopen_utf8"),r._lua_close=d("lua_close");var ga=d("setThrew"),yt=()=>(yt=be.emscripten_stack_init)(),Mn=()=>(Mn=be.emscripten_stack_get_end)(),vt=d("stackSave"),Et=d("stackRestore"),Tt=d("stackAlloc");function ba(e,n,a){var l=vt();try{Kn(e)(n,a)}catch(o){if(Et(l),o!==o+0)throw o;ga(1,0)}}r.ENV=en,r.ccall=(e,n,a,l)=>{var o={string:w=>{var K=0;if(w!=null&&w!==0){K=Ke(w)+1;var v=Tt(K);$e(w,v,K),K=v}return K},array:w=>{var K=Tt(w.length);return mt(w,K),K}};e=ha(e);var c=[],_=0;if(m(n!=="array",'Return type should not be "array".'),l)for(var p=0;p<l.length;p++){var S=o[a[p]];S?(_===0&&(_=vt()),c[p]=S(l[p])):c[p]=l[p]}return a=e.apply(null,c),a=function(w){return _!==0&&Et(_),n==="string"?$(w):n==="boolean"?!!w:w}(a)},r.addFunction=(e,n)=>{if(m(typeof e!="undefined"),!ge){ge=new WeakMap;var a=W.length;if(ge)for(var l=0;l<0+a;l++){var o=Kn(l);o&&ge.set(o,l)}}if(a=ge.get(e)||0)return a;if(Sn.length)a=Sn.pop();else{try{W.grow(1)}catch(p){throw p instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":p}a=W.length-1}try{l=a,W.set(l,e),_e[l]=W.get(l)}catch(p){if(!(p instanceof TypeError))throw p;if(m(typeof n!="undefined","Missing signature argument to addFunction: "+e),typeof WebAssembly.Function=="function"){l=WebAssembly.Function,o={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var c={parameters:[],results:n[0]=="v"?[]:[o[n[0]]]},_=1;_<n.length;++_)m(n[_]in o,"invalid signature char: "+n[_]),c.parameters.push(o[n[_]]);n=new l(c,e)}else{for(l=[1],o=n.slice(0,1),n=n.slice(1),c={i:127,p:127,j:126,f:125,d:124,e:111},l.push(96),_=n.length,m(16384>_),128>_?l.push(_):l.push(_%128|128,_>>7),_=0;_<n.length;++_)m(n[_]in c,"invalid signature char: "+n[_]),l.push(c[n[_]]);o=="v"?l.push(0):l.push(1,c[o]),n=[0,97,115,109,1,0,0,0,1],o=l.length,m(16384>o),128>o?n.push(o):n.push(o%128|128,o>>7),n.push.apply(n,l),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),n=new WebAssembly.Module(new Uint8Array(n)),n=new WebAssembly.Instance(n,{e:{f:e}}).exports.f}l=a,W.set(l,n),_e[l]=W.get(l)}return ge.set(e,a),a},r.removeFunction=e=>{ge.delete(Kn(e)),W.set(e,null),_e[e]=W.get(e),Sn.push(e)},r.setValue=function(e,n,a="i8"){switch(a.endsWith("*")&&(a="*"),a){case"i1":Q[e>>0]=n;break;case"i8":Q[e>>0]=n;break;case"i16":xe[e>>1]=n;break;case"i32":y[e>>2]=n;break;case"i64":We[e>>3]=BigInt(n);break;case"float":un[e>>2]=n;break;case"double":cn[e>>3]=n;break;case"*":N[e>>2]=n;break;default:C(`invalid type for setValue: ${a}`)}},r.getValue=function(e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":return Q[e>>0];case"i8":return Q[e>>0];case"i16":return xe[e>>1];case"i32":return y[e>>2];case"i64":return We[e>>3];case"float":return un[e>>2];case"double":return cn[e>>3];case"*":return N[e>>2];default:C(`invalid type for getValue: ${n}`)}},r.stringToUTF8=$e,r.lengthBytesUTF8=Ke,r.stringToNewUTF8=jn,r.FS=i,"writeI53ToI64 writeI53ToI64Clamped writeI53ToI64Signaling writeI53ToU64Clamped writeI53ToU64Signaling readI53FromI64 readI53FromU64 convertI32PairToI53 convertI32PairToI53Checked convertU32PairToI53 inetPton4 inetNtop4 inetPton6 inetNtop6 readSockaddr writeSockaddr getHostByName getCallstack emscriptenLog convertPCtoSourceLocation readEmAsmArgs jstoi_q jstoi_s listenOnce autoResumeAudioContext getDynCaller dynCall handleException runtimeKeepalivePush runtimeKeepalivePop callUserCallback maybeExit asmjsMangle handleAllocatorInit HandleAllocator getNativeTypeSize STACK_SIZE STACK_ALIGN POINTER_SIZE ASSERTIONS cwrap reallyNegative unSign strLen reSign formatString intArrayToString AsciiToString UTF16ToString stringToUTF16 lengthBytesUTF16 UTF32ToString stringToUTF32 lengthBytesUTF32 registerKeyEventCallback maybeCStringToJsString findEventTarget findCanvasEventTarget getBoundingClientRect fillMouseEventData registerMouseEventCallback registerWheelEventCallback registerUiEventCallback registerFocusEventCallback fillDeviceOrientationEventData registerDeviceOrientationEventCallback fillDeviceMotionEventData registerDeviceMotionEventCallback screenOrientation fillOrientationChangeEventData registerOrientationChangeEventCallback fillFullscreenChangeEventData registerFullscreenChangeEventCallback JSEvents_requestFullscreen JSEvents_resizeCanvasForFullscreen registerRestoreOldStyle hideEverythingExceptGivenElement restoreHiddenElements setLetterbox softFullscreenResizeWebGLRenderTarget doRequestFullscreen fillPointerlockChangeEventData registerPointerlockChangeEventCallback registerPointerlockErrorEventCallback requestPointerLock fillVisibilityChangeEventData registerVisibilityChangeEventCallback registerTouchEventCallback fillGamepadEventData registerGamepadEventCallback registerBeforeUnloadEventCallback fillBatteryEventData battery registerBatteryEventCallback setCanvasElementSize getCanvasElementSize jsStackTrace stackTrace checkWasiClock wasiRightsToMuslOFlags wasiOFlagsToMuslOFlags createDyncallWrapper safeSetTimeout setImmediateWrapped clearImmediateWrapped polyfillSetImmediate getPromise makePromise idsToPromises makePromiseCallback setMainLoop getSocketFromFD getSocketAddress FS_unlink FS_mkdirTree _setNetworkCallback".split(" ").forEach(function(e){typeof globalThis=="undefined"||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){var n=`\`${e}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,a=e;a.startsWith("_")||(a="$"+e),n+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${a}')`,Jn(e)&&(n+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),je(n)}}),Xn(e)}),"run addOnPreRun addOnInit addOnPreMain addOnExit addOnPostRun addRunDependency removeRunDependency FS_createFolder FS_createPath FS_createLazyFile FS_createLink FS_createDevice FS_readFile out err callMain abort wasmMemory wasmExports stackAlloc stackSave stackRestore getTempRet0 setTempRet0 writeStackCookie checkStackCookie MAX_INT53 MIN_INT53 bigintToI53Checked ptrToString zeroMemory exitJS getHeapMax growMemory MONTH_DAYS_REGULAR MONTH_DAYS_LEAP MONTH_DAYS_REGULAR_CUMULATIVE MONTH_DAYS_LEAP_CUMULATIVE isLeapYear ydayFromDate arraySum addDays ERRNO_CODES ERRNO_MESSAGES setErrNo DNS Protocols Sockets initRandomFill randomFill timers warnOnce UNWIND_CACHE readEmAsmArgsArray getExecutableName keepRuntimeAlive asyncLoad alignMemory mmapAlloc wasmTable noExitRuntime getCFunc uleb128Encode sigToWasmTypes generateFuncType convertJsFunctionToWasm freeTableIndexes functionsInTableMap getEmptyTableSlot updateTableMap getFunctionAddress PATH PATH_FS UTF8Decoder UTF8ArrayToString UTF8ToString stringToUTF8Array intArrayFromString stringToAscii UTF16Decoder stringToUTF8OnStack writeArrayToMemory JSEvents specialHTMLTargets currentFullscreenStrategy restoreOldWindowedStyle demangle demangleAll ExitStatus getEnvStrings doReadv doWritev promiseMap Browser wget SYSCALLS preloadPlugins FS_createPreloadedFile FS_modeStringToFlags FS_getMode FS_stdin_getChar_buffer FS_stdin_getChar FS_createDataFile MEMFS TTY PIPEFS SOCKFS".split(" ").forEach(Xn);var nn;Ne=function e(){nn||xt(),nn||(Ne=e)};function xt(){if(!(0<De)){yt();var e=Mn();if(m((e&3)==0),e==0&&(e+=4),N[e>>2]=34821223,N[e+4>>2]=2310721022,N[0]=1668509029,r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),fn.unshift(e);for(;0<fn.length;)fn.shift()(r);if(!(0<De)){if(!nn&&(nn=!0,r.calledRun=!0,!Fe)){for(m(!_n),_n=!0,dn(),r.noFSInit||i.R.Y||i.R(),i.ta=!1;0<hn.length;)hn.shift()(r);for(u(r),m(!r._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),dn();0<Vn.length;)Vn.shift()(r)}dn()}}}function ma(){var e=Te,n=H,a=!1;Te=H=()=>{a=!0};try{kt(0),["stdout","stderr"].forEach(function(l){(l=dt("/dev/"+l))&&(l=kn[l.object.rdev])&&l.output&&l.output.length&&(a=!0)})}catch{}Te=e,H=n,a&&je("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the Emscripten FAQ), or make sure to emit a newline when you printf etc.")}return xt(),t.ready}})();class Ge{static async initialize(t,r){let u=await Yt({locateFile:(s,g)=>t||g+s,preRun:s=>{typeof r=="object"&&Object.entries(r).forEach(([g,k])=>s.ENV[g]=k)}});return new Ge(u)}constructor(t){this.referenceTracker=new WeakMap,this.referenceMap=new Map,this.availableReferences=[],this.module=t,this.luaL_checkversion_=this.cwrap("luaL_checkversion_",null,["number","number","number"]),this.luaL_getmetafield=this.cwrap("luaL_getmetafield","number",["number","number","string"]),this.luaL_callmeta=this.cwrap("luaL_callmeta","number",["number","number","string"]),this.luaL_tolstring=this.cwrap("luaL_tolstring","string",["number","number","number"]),this.luaL_argerror=this.cwrap("luaL_argerror","number",["number","number","string"]),this.luaL_typeerror=this.cwrap("luaL_typeerror","number",["number","number","string"]),this.luaL_checklstring=this.cwrap("luaL_checklstring","string",["number","number","number"]),this.luaL_optlstring=this.cwrap("luaL_optlstring","string",["number","number","string","number"]),this.luaL_checknumber=this.cwrap("luaL_checknumber","number",["number","number"]),this.luaL_optnumber=this.cwrap("luaL_optnumber","number",["number","number","number"]),this.luaL_checkinteger=this.cwrap("luaL_checkinteger","number",["number","number"]),this.luaL_optinteger=this.cwrap("luaL_optinteger","number",["number","number","number"]),this.luaL_checkstack=this.cwrap("luaL_checkstack",null,["number","number","string"]),this.luaL_checktype=this.cwrap("luaL_checktype",null,["number","number","number"]),this.luaL_checkany=this.cwrap("luaL_checkany",null,["number","number"]),this.luaL_newmetatable=this.cwrap("luaL_newmetatable","number",["number","string"]),this.luaL_setmetatable=this.cwrap("luaL_setmetatable",null,["number","string"]),this.luaL_testudata=this.cwrap("luaL_testudata","number",["number","number","string"]),this.luaL_checkudata=this.cwrap("luaL_checkudata","number",["number","number","string"]),this.luaL_where=this.cwrap("luaL_where",null,["number","number"]),this.luaL_fileresult=this.cwrap("luaL_fileresult","number",["number","number","string"]),this.luaL_execresult=this.cwrap("luaL_execresult","number",["number","number"]),this.luaL_ref=this.cwrap("luaL_ref","number",["number","number"]),this.luaL_unref=this.cwrap("luaL_unref",null,["number","number","number"]),this.luaL_loadfilex=this.cwrap("luaL_loadfilex","number",["number","string","string"]),this.luaL_loadbufferx=this.cwrap("luaL_loadbufferx","number",["number","string|number","number","string|number","string"]),this.luaL_loadstring=this.cwrap("luaL_loadstring","number",["number","string"]),this.luaL_newstate=this.cwrap("luaL_newstate","number",[]),this.luaL_len=this.cwrap("luaL_len","number",["number","number"]),this.luaL_addgsub=this.cwrap("luaL_addgsub",null,["number","string","string","string"]),this.luaL_gsub=this.cwrap("luaL_gsub","string",["number","string","string","string"]),this.luaL_setfuncs=this.cwrap("luaL_setfuncs",null,["number","number","number"]),this.luaL_getsubtable=this.cwrap("luaL_getsubtable","number",["number","number","string"]),this.luaL_traceback=this.cwrap("luaL_traceback",null,["number","number","string","number"]),this.luaL_requiref=this.cwrap("luaL_requiref",null,["number","string","number","number"]),this.luaL_buffinit=this.cwrap("luaL_buffinit",null,["number","number"]),this.luaL_prepbuffsize=this.cwrap("luaL_prepbuffsize","string",["number","number"]),this.luaL_addlstring=this.cwrap("luaL_addlstring",null,["number","string","number"]),this.luaL_addstring=this.cwrap("luaL_addstring",null,["number","string"]),this.luaL_addvalue=this.cwrap("luaL_addvalue",null,["number"]),this.luaL_pushresult=this.cwrap("luaL_pushresult",null,["number"]),this.luaL_pushresultsize=this.cwrap("luaL_pushresultsize",null,["number","number"]),this.luaL_buffinitsize=this.cwrap("luaL_buffinitsize","string",["number","number","number"]),this.lua_newstate=this.cwrap("lua_newstate","number",["number","number"]),this.lua_close=this.cwrap("lua_close",null,["number"]),this.lua_newthread=this.cwrap("lua_newthread","number",["number"]),this.lua_resetthread=this.cwrap("lua_resetthread","number",["number"]),this.lua_atpanic=this.cwrap("lua_atpanic","number",["number","number"]),this.lua_version=this.cwrap("lua_version","number",["number"]),this.lua_absindex=this.cwrap("lua_absindex","number",["number","number"]),this.lua_gettop=this.cwrap("lua_gettop","number",["number"]),this.lua_settop=this.cwrap("lua_settop",null,["number","number"]),this.lua_pushvalue=this.cwrap("lua_pushvalue",null,["number","number"]),this.lua_rotate=this.cwrap("lua_rotate",null,["number","number","number"]),this.lua_copy=this.cwrap("lua_copy",null,["number","number","number"]),this.lua_checkstack=this.cwrap("lua_checkstack","number",["number","number"]),this.lua_xmove=this.cwrap("lua_xmove",null,["number","number","number"]),this.lua_isnumber=this.cwrap("lua_isnumber","number",["number","number"]),this.lua_isstring=this.cwrap("lua_isstring","number",["number","number"]),this.lua_iscfunction=this.cwrap("lua_iscfunction","number",["number","number"]),this.lua_isinteger=this.cwrap("lua_isinteger","number",["number","number"]),this.lua_isuserdata=this.cwrap("lua_isuserdata","number",["number","number"]),this.lua_type=this.cwrap("lua_type","number",["number","number"]),this.lua_typename=this.cwrap("lua_typename","string",["number","number"]),this.lua_tonumberx=this.cwrap("lua_tonumberx","number",["number","number","number"]),this.lua_tointegerx=this.cwrap("lua_tointegerx","number",["number","number","number"]),this.lua_toboolean=this.cwrap("lua_toboolean","number",["number","number"]),this.lua_tolstring=this.cwrap("lua_tolstring","string",["number","number","number"]),this.lua_rawlen=this.cwrap("lua_rawlen","number",["number","number"]),this.lua_tocfunction=this.cwrap("lua_tocfunction","number",["number","number"]),this.lua_touserdata=this.cwrap("lua_touserdata","number",["number","number"]),this.lua_tothread=this.cwrap("lua_tothread","number",["number","number"]),this.lua_topointer=this.cwrap("lua_topointer","number",["number","number"]),this.lua_arith=this.cwrap("lua_arith",null,["number","number"]),this.lua_rawequal=this.cwrap("lua_rawequal","number",["number","number","number"]),this.lua_compare=this.cwrap("lua_compare","number",["number","number","number","number"]),this.lua_pushnil=this.cwrap("lua_pushnil",null,["number"]),this.lua_pushnumber=this.cwrap("lua_pushnumber",null,["number","number"]),this.lua_pushinteger=this.cwrap("lua_pushinteger",null,["number","number"]),this.lua_pushlstring=this.cwrap("lua_pushlstring","string",["number","string|number","number"]),this.lua_pushstring=this.cwrap("lua_pushstring","string",["number","string|number"]),this.lua_pushcclosure=this.cwrap("lua_pushcclosure",null,["number","number","number"]),this.lua_pushboolean=this.cwrap("lua_pushboolean",null,["number","number"]),this.lua_pushlightuserdata=this.cwrap("lua_pushlightuserdata",null,["number","number"]),this.lua_pushthread=this.cwrap("lua_pushthread","number",["number"]),this.lua_getglobal=this.cwrap("lua_getglobal","number",["number","string"]),this.lua_gettable=this.cwrap("lua_gettable","number",["number","number"]),this.lua_getfield=this.cwrap("lua_getfield","number",["number","number","string"]),this.lua_geti=this.cwrap("lua_geti","number",["number","number","number"]),this.lua_rawget=this.cwrap("lua_rawget","number",["number","number"]),this.lua_rawgeti=this.cwrap("lua_rawgeti","number",["number","number","number"]),this.lua_rawgetp=this.cwrap("lua_rawgetp","number",["number","number","number"]),this.lua_createtable=this.cwrap("lua_createtable",null,["number","number","number"]),this.lua_newuserdatauv=this.cwrap("lua_newuserdatauv","number",["number","number","number"]),this.lua_getmetatable=this.cwrap("lua_getmetatable","number",["number","number"]),this.lua_getiuservalue=this.cwrap("lua_getiuservalue","number",["number","number","number"]),this.lua_setglobal=this.cwrap("lua_setglobal",null,["number","string"]),this.lua_settable=this.cwrap("lua_settable",null,["number","number"]),this.lua_setfield=this.cwrap("lua_setfield",null,["number","number","string"]),this.lua_seti=this.cwrap("lua_seti",null,["number","number","number"]),this.lua_rawset=this.cwrap("lua_rawset",null,["number","number"]),this.lua_rawseti=this.cwrap("lua_rawseti",null,["number","number","number"]),this.lua_rawsetp=this.cwrap("lua_rawsetp",null,["number","number","number"]),this.lua_setmetatable=this.cwrap("lua_setmetatable","number",["number","number"]),this.lua_setiuservalue=this.cwrap("lua_setiuservalue","number",["number","number","number"]),this.lua_callk=this.cwrap("lua_callk",null,["number","number","number","number","number"]),this.lua_pcallk=this.cwrap("lua_pcallk","number",["number","number","number","number","number","number"]),this.lua_load=this.cwrap("lua_load","number",["number","number","number","string","string"]),this.lua_dump=this.cwrap("lua_dump","number",["number","number","number","number"]),this.lua_yieldk=this.cwrap("lua_yieldk","number",["number","number","number","number"]),this.lua_resume=this.cwrap("lua_resume","number",["number","number","number","number"]),this.lua_status=this.cwrap("lua_status","number",["number"]),this.lua_isyieldable=this.cwrap("lua_isyieldable","number",["number"]),this.lua_setwarnf=this.cwrap("lua_setwarnf",null,["number","number","number"]),this.lua_warning=this.cwrap("lua_warning",null,["number","string","number"]),this.lua_error=this.cwrap("lua_error","number",["number"]),this.lua_next=this.cwrap("lua_next","number",["number","number"]),this.lua_concat=this.cwrap("lua_concat",null,["number","number"]),this.lua_len=this.cwrap("lua_len",null,["number","number"]),this.lua_stringtonumber=this.cwrap("lua_stringtonumber","number",["number","string"]),this.lua_getallocf=this.cwrap("lua_getallocf","number",["number","number"]),this.lua_setallocf=this.cwrap("lua_setallocf",null,["number","number","number"]),this.lua_toclose=this.cwrap("lua_toclose",null,["number","number"]),this.lua_closeslot=this.cwrap("lua_closeslot",null,["number","number"]),this.lua_getstack=this.cwrap("lua_getstack","number",["number","number","number"]),this.lua_getinfo=this.cwrap("lua_getinfo","number",["number","string","number"]),this.lua_getlocal=this.cwrap("lua_getlocal","string",["number","number","number"]),this.lua_setlocal=this.cwrap("lua_setlocal","string",["number","number","number"]),this.lua_getupvalue=this.cwrap("lua_getupvalue","string",["number","number","number"]),this.lua_setupvalue=this.cwrap("lua_setupvalue","string",["number","number","number"]),this.lua_upvalueid=this.cwrap("lua_upvalueid","number",["number","number","number"]),this.lua_upvaluejoin=this.cwrap("lua_upvaluejoin",null,["number","number","number","number","number"]),this.lua_sethook=this.cwrap("lua_sethook",null,["number","number","number","number"]),this.lua_gethook=this.cwrap("lua_gethook","number",["number"]),this.lua_gethookmask=this.cwrap("lua_gethookmask","number",["number"]),this.lua_gethookcount=this.cwrap("lua_gethookcount","number",["number"]),this.lua_setcstacklimit=this.cwrap("lua_setcstacklimit","number",["number","number"]),this.luaopen_base=this.cwrap("luaopen_base","number",["number"]),this.luaopen_coroutine=this.cwrap("luaopen_coroutine","number",["number"]),this.luaopen_table=this.cwrap("luaopen_table","number",["number"]),this.luaopen_io=this.cwrap("luaopen_io","number",["number"]),this.luaopen_os=this.cwrap("luaopen_os","number",["number"]),this.luaopen_string=this.cwrap("luaopen_string","number",["number"]),this.luaopen_utf8=this.cwrap("luaopen_utf8","number",["number"]),this.luaopen_math=this.cwrap("luaopen_math","number",["number"]),this.luaopen_debug=this.cwrap("luaopen_debug","number",["number"]),this.luaopen_package=this.cwrap("luaopen_package","number",["number"]),this.luaL_openlibs=this.cwrap("luaL_openlibs",null,["number"])}lua_remove(t,r){this.lua_rotate(t,r,-1),this.lua_pop(t,1)}lua_pop(t,r){this.lua_settop(t,-r-1)}luaL_getmetatable(t,r){return this.lua_getfield(t,J,r)}lua_yield(t,r){return this.lua_yieldk(t,r,0,null)}lua_upvalueindex(t){return J-t}ref(t){let r=this.referenceTracker.get(t);if(r)return r.refCount++,r.index;let u=this.availableReferences.pop(),s=u===void 0?this.referenceMap.size+1:u;return this.referenceMap.set(s,t),this.referenceTracker.set(t,{refCount:1,index:s}),this.lastRefIndex=s,s}unref(t){let r=this.referenceMap.get(t);if(r===void 0)return;let u=this.referenceTracker.get(r);if(u===void 0){this.referenceTracker.delete(r),this.availableReferences.push(t);return}u.refCount--,u.refCount<=0&&(this.referenceTracker.delete(r),this.referenceMap.delete(t),this.availableReferences.push(t))}getRef(t){return this.referenceMap.get(t)}getLastRefIndex(){return this.lastRefIndex}printRefs(){for(let[t,r]of this.referenceMap.entries())console.log(t,r)}cwrap(t,r,u){return u.some(g=>g==="string|number")?(...g)=>{let k=[],O=u.map((E,P)=>{var M;if(E==="string|number"){if(typeof g[P]=="number")return"number";if(((M=g[P])===null||M===void 0?void 0:M.length)>1024){let I=this.module.stringToNewUTF8(g[P]);return g[P]=I,k.push(I),"number"}else return"string"}return E});try{return this.module.ccall(t,r,O,g)}finally{for(let E of k)this.module._free(E)}}:(...g)=>this.module.ccall(t,r,u,g)}}var Xt="1.16.0";class Zt{constructor(t,r){var u;t===void 0&&(typeof window=="object"&&typeof window.document!="undefined"||typeof self=="object"&&((u=self==null?void 0:self.constructor)===null||u===void 0?void 0:u.name)==="DedicatedWorkerGlobalScope")&&(t=`https://unpkg.com/wasmoon@${Xt}/dist/glue.wasm`),this.luaWasmPromise=Ge.initialize(t,r)}async mountFile(t,r){this.mountFileSync(await this.getLuaModule(),t,r)}mountFileSync(t,r,u){let s=r.lastIndexOf("/"),g=r.substring(s+1),k=r.substring(0,r.length-g.length-1);if(k.length>0){let O=k.split("/").reverse(),E="";for(;O.length;){let P=O.pop();if(!P)continue;let M=`${E}/${P}`;try{t.module.FS.mkdir(M)}catch{}E=M}}t.module.FS.writeFile(r,u)}async createEngine(t={}){return new Nn(await this.getLuaModule(),t)}async getLuaModule(){return this.luaWasmPromise}}h.Decoration=ee,h.LUAI_MAXSTACK=le,h.LUA_MULTRET=V,h.LUA_REGISTRYINDEX=J,h.LuaEngine=Nn,h.LuaFactory=Zt,h.LuaGlobal=Fn,h.LuaMultiReturn=pe,h.LuaRawResult=Qe,h.LuaThread=we,h.LuaTimeoutError=rn,h.LuaTypeExtension=ie,h.LuaWasm=Ge,h.PointerSize=F,h.decorate=Pt,h.decorateFunction=ln,h.decorateProxy=Dn,h.decorateUserdata=Wt})});var Mt=Ot((Ua,xa)=>{xa.exports=`local a,b,c,d=(function(e)local f={[{}]=true}local g;local h={}local i;local j={}g=function(k,l)if not h[k]then h[k]=l end end;i=function(k)local m=j[k]if m then if m==f then return nil end else if not h[k]then if not e then local n=type(k)=='string'and'\\"'..k..'\\"'or tostring(k)error('Tried to require '..n..', but no such module has been registered')else return e(k)end end;j[k]=f;m=h[k](i,j,g,h)j[k]=m end;return m end;return i,j,g,h end)(nil)c("__root",function(i,o,c,d)local check=i("luacheck.check")local p=i("luacheck.filter")local q=i("luacheck.options")local r=i("luacheck.format")local s=i("luacheck.utils")local t={_VERSION="0.23.0"}local function u(v,w,x,y)local z,A=q.validate(q.all_options,w,x)if not z then if y then error(("bad argument #2 to '%s' (%s: %s)"):format(v,y,A))else error(("bad argument #2 to '%s' (%s)"):format(v,A))end end end;local function B(v,C,w,x)u(v,w)if w~=nil then for D in ipairs(C)do u(v,w[D],x,("invalid options at index [%d]"):format(D))if w[D]~=nil then for E,F in ipairs(w[D])do u(v,F,x,("invalid options at index [%d][%d]"):format(D,E))end end end end end;function t.get_report(G)local H=("bad argument #1 to 'luacheck.get_report' (string expected, got %s)"):format(type(G))assert(type(G)=="string",H)return check(G)end;function t.process_reports(I,w,x)local H=("bad argument #1 to 'luacheck.process_reports' (table expected, got %s)"):format(type(I))assert(type(I)=="table",H)B("luacheck.process_reports",I,w,x)local J=p.filter(I,w,x)J.warnings=0;J.errors=0;J.fatals=0;for K,L in ipairs(J)do if L.fatal then J.fatals=J.fatals+1 else for K,M in ipairs(L)do if M.code:sub(1,1)=="0"then J.errors=J.errors+1 else J.warnings=J.warnings+1 end end end end;return J end;function t.check_strings(N,w)local H=("bad argument #1 to 'luacheck.check_strings' (table expected, got %s)"):format(type(N))assert(type(N)=="table",H)for K,O in ipairs(N)do H=("bad argument #1 to 'luacheck.check_strings' (array of strings or tables expected, got %s)"):format(type(O))assert(type(O)=="string"or type(O)=="table",H)end;B("luacheck.check_strings",N,w)local I={}for D,G in ipairs(N)do if type(G)=="table"and G.fatal then I[D]=G else I[D]=t.get_report(G)end end;return t.process_reports(I,w)end;function t.check_files(P,w)local H=("bad argument #1 to 'luacheck.check_files' (table expected, got %s)"):format(type(P))assert(type(P)=="table",H)for K,O in ipairs(P)do H=("bad argument #1 to 'luacheck.check_files' (array of paths or file handles expected, got %s)"):format(type(O))assert(type(O)=="string"or io.type(O)=="file",H)end;B("luacheck.check_files",P,w)local N={}for D,Q in ipairs(P)do local G,A=s.read_file(Q)N[D]=G or{fatal="I/O",msg=A}end;return t.check_strings(N,w)end;function t.get_message(R)local H=("bad argument #1 to 'luacheck.get_message' (table expected, got %s)"):format(type(R))assert(type(R)=="table",H)return r.get_message(R)end;setmetatable(t,{__call=function(K,...)return t.check_files(...)end})return t end)c("luacheck.utils",function(i,o,c,d)local unpack=table.unpack or unpack;local S=table.pack or function(...)return{n=select("#",...),...}end;local s={}s.dir_sep=package.config:sub(1,1)s.is_windows=s.dir_sep=="\\\\"local T="\\239\\187\\191"function s.read_file(Q)local U;if type(Q)=="string"then local V;U,V=io.open(Q,"rb")if not U then V=s.unprefix(V,Q..": ")return nil,"couldn't read: "..V end else U=Q end;local W,X=U:read("*a")U:close()if not W then return nil,"couldn't read: "..X end;if W:sub(1,T:len())==T then W=W:sub(T:len()+1)end;return W end;if _VERSION:find"5.1"then function s.load(G,Y,Z)local _,A=loadstring(G,Z)if _ then if Y then setfenv(_,Y)end;return _ else return nil,A end end else function s.load(G,Y,Z)return load(G,Z,"t",Y or _ENV)end end;function s.load_config(a0,Y)Y=Y or{}local G,X=s.read_file(a0)if not G then return nil,"I/O",X end;local _,a1=s.load(G,Y,"chunk")if not _ then return nil,"syntax","line "..s.unprefix(a1,"[string \\"chunk\\"]:")end;local z,W=pcall(_)if not z then return nil,"runtime","line "..s.unprefix(W,"[string \\"chunk\\"]:")end;return Y,W end;function s.array_to_set(a2)local a3={}for a4,a5 in ipairs(a2)do a3[a5]=a4 end;return a3 end;function s.concat_arrays(a2)local W={}for K,a6 in ipairs(a2)do for K,O in ipairs(a6)do table.insert(W,O)end end;return W end;function s.update(a7,a8)for a9,aa in pairs(a8)do a7[a9]=aa end;return a7 end;local ab={}function ab.__call(ac,...)local ad=setmetatable({},ac)if ac.__init then local ae=S(ac.__init(ad,...))if ae.n>0 then return unpack(ae,1,ae.n)end end;return ad end;function s.class()local ac=setmetatable({},ab)ac.__index=ac;return ac end;function s.is_instance(af,ac)return rawequal(debug.getmetatable(af),ac)end;s.Stack=s.class()function s.Stack:__init()self.size=0 end;function s.Stack:push(a5)self.size=self.size+1;self[self.size]=a5;self.top=a5 end;function s.Stack:pop()local a5=self[self.size]self[self.size]=nil;self.size=self.size-1;self.top=self[self.size]return a5 end;local ag=s.class()function ag:__init(A,ah)self.err=A;self.traceback=ah end;function ag:__tostring()return tostring(self.err).."\\n"..self.traceback end;local function ai(A)if s.is_instance(A,ag)then return A else return ag(A,debug.traceback())end end;function s.try(aj,...)local ak={...}local al=select("#",...)local function am()return aj(unpack(ak,1,al))end;return xpcall(am,ai)end;local function an(a2,D)if D==1 then return nil else D=D-1;return D,a2[D]end end;function s.ripairs(a2)return an,a2,#a2+1 end;function s.sorted_pairs(ao)local ap={}for aq in pairs(ao)do table.insert(ap,aq)end;table.sort(ap)local a4=1;return function()local aq=ap[a4]if aq==nil then return end;a4=a4+1;return aq,ao[aq]end end;function s.unprefix(ar,as)if ar:sub(1,#as)==as then return ar:sub(#as+1)else return ar end end;function s.after(ar,at)local K,au=ar:find(at)if au then return ar:sub(au+1)end end;function s.strip(ar)local K,av=ar:find("^%s*")local aw=ar:find("%s*$")return ar:sub(av+1,aw-1)end;function s.split(ar,ax)local ay={}local at;if ax then at=ax.."([^"..ax.."]*)"ar=ax..ar else at="%S+"end;for az in ar:gmatch(at)do table.insert(ay,az)end;return ay end;s.InvalidPatternError=s.class()function s.InvalidPatternError:__init(A,at)self.err=A;self.pattern=at end;function s.InvalidPatternError:__tostring()return self.err end;function s.pmatch(ar,at)assert(type(ar)=="string")assert(type(at)=="string")local z,W=pcall(string.match,ar,at)if not z then error(s.InvalidPatternError(W,at),0)else return not not W end end;function s.map(_,a2)local W={}for D,O in ipairs(a2)do W[D]=_(O)end;return W end;function s.has_type(aA)return function(aB)if type(aB)==aA then return true else return false,("%s expected, got %s"):format(aA,type(aB))end end end;function s.has_type_or_false(aA)return function(aB)if type(aB)==aA then return true elseif type(aB)=="boolean"then if aB then return false,("%s or false expected, got true"):format(aA)else return true end else return false,("%s or false expected, got %s"):format(aA,type(aB))end end end;function s.has_either_type(aC,aD)return function(aB)if type(aB)==aC or type(aB)==aD then return true else return false,("%s or %s expected, got %s"):format(aC,aD,type(aB))end end end;function s.array_of(aA)return function(aB)if type(aB)~="table"then return false,("array of %ss expected, got %s"):format(aA,type(aB))end;for a4,O in ipairs(aB)do if type(O)~=aA then return false,("array of %ss expected, got %s at index [%d]"):format(aA,type(O),a4)end end;return true end end;return s end)c("luacheck.format",function(i,o,c,d)local aE=i("luacheck.stages.init")local s=i("luacheck.utils")local r={}local aF=not s.is_windows or os.getenv("ANSICON")local function aG(aH)local aI=assert(aE.warnings[aH.code],"Unkown warning code "..aH.code).message_format;if type(aI)=="function"then return aI(aH)else return aI end end;local function aJ(aK)return aK==1 and""or"s"end;local aL={reset=0,bright=1,red=31,green=32}local function aM(aN)return"\\27["..tostring(aL[aN]).."m"end;local function aO(ar,...)ar=ar..aM("reset")for K,aP in ipairs({...})do ar=aM(aP)..ar end;return aM("reset")..ar end;local function aQ(ar,aP,...)return aP and aO(ar,...)or ar end;local function aR(aK,aP)return aQ(tostring(aK),aP,"bright",aK>0 and"red"or"reset")end;local function aS(aT,aU,aP)return aT:gsub("{([_a-zA-Z0-9]+)(!?)}",function(aV,aW)local a5=tostring(assert(aU[aV],"No field "..aV))if aW=="!"then if aP then return aO(a5,"bright")else return"'"..a5 .."'"end else return a5 end end)end;local function aX(M,aP)return aS(aG(M),M,aP)end;function r.get_message(M)return aX(M)end;local function aY(ar)return ar:gsub("^.",string.upper)end;local function aZ(L)return aY(L.fatal).." error"end;local function a_(b0)local b1,b2=0,0;for K,M in ipairs(b0)do if M.code:sub(1,1)=="0"then b2=b2+1 else b1=b1+1 end end;return b1,b2 end;local function b3(J,b4,w)local b5="Checking "..b4;local b6;if J.fatal then b6=aQ(aZ(J),w.color,"bright")elseif#J==0 then b6=aQ("OK",w.color,"bright","green")else local b1,b2=a_(J)if b1>0 then b6=aQ(tostring(b1).." warning"..aJ(b1),w.color,"bright","red")end;if b2>0 then b6=b6 and b6 .." / "or""b6=b6 ..aQ(tostring(b2).." error"..aJ(b2),w.color,"bright")end end;return b5 ..(" "):rep(math.max(50-#b5,1))..b6 end;local function b7(Q,b8,w)local W=("%s:%d:%d"):format(Q,b8.line,b8.column)if w.ranges then W=("%s-%d"):format(W,b8.end_column)end;return W end;local function b9(M)return(M.code:sub(1,1)=="0"and"E"or"W")..M.code end;local function ba(b4,M,w)local bb=aX(M,w.color)if w.codes then bb=("(%s) %s"):format(b9(M),bb)end;return b7(b4,M,w)..": "..bb end;local function bc(J,b4,w)local bd={b3(J,b4,w)}if#J>0 then table.insert(bd,"")for K,M in ipairs(J)do table.insert(bd,"    "..ba(b4,M,w))end;table.insert(bd,"")elseif J.fatal then table.insert(bd,"")table.insert(bd,"    "..b4 ..": "..J.msg)table.insert(bd,"")end;return table.concat(bd,"\\n")end;local function be(ar)ar=ar:gsub("&","&amp;")ar=ar:gsub('"',"&quot;")ar=ar:gsub("'","&apos;")ar=ar:gsub("<","&lt;")ar=ar:gsub(">","&gt;")return ar end;r.builtin_formatters={}function r.builtin_formatters.default(J,bf,w)local bd={}if w.quiet<=2 then for D,L in ipairs(J)do if w.quiet==0 or L.fatal or#L>0 then table.insert(bd,(w.quiet==2 and b3 or bc)(L,bf[D],w))end end;if#bd>0 and bd[#bd]:sub(-1)~="\\n"then table.insert(bd,"")end end;local bg=("Total: %s warning%s / %s error%s in %d file%s"):format(aR(J.warnings,w.color),aJ(J.warnings),aR(J.errors,w.color),aJ(J.errors),#J-J.fatals,aJ(#J-J.fatals))if J.fatals>0 then bg=bg..(", couldn't check %s file%s"):format(J.fatals,aJ(J.fatals))end;table.insert(bd,bg)return table.concat(bd,"\\n")end;function r.builtin_formatters.TAP(J,bf,w)w.color=false;local bd={}for D,L in ipairs(J)do if L.fatal then table.insert(bd,("not ok %d %s: %s"):format(#bd+1,bf[D],aZ(L)))elseif#L==0 then table.insert(bd,("ok %d %s"):format(#bd+1,bf[D]))else for K,aH in ipairs(L)do table.insert(bd,("not ok %d %s"):format(#bd+1,ba(bf[D],aH,w)))end end end;table.insert(bd,1,"1.."..tostring(#bd))return table.concat(bd,"\\n")end;function r.builtin_formatters.JUnit(J,bf)local w={}local bd={[[<?xml version="1.0" encoding="UTF-8"?>]]}local bh=0;for K,L in ipairs(J)do if L.fatal or#L==0 then bh=bh+1 else bh=bh+#L end end;table.insert(bd,([[<testsuite name="Luacheck report" tests="%d">]]):format(bh))for bi,L in ipairs(J)do if L.fatal then table.insert(bd,([[    <testcase name="%s" classname="%s">]]):format(be(bf[bi]),be(bf[bi])))table.insert(bd,([[        <error type="%s"/>]]):format(be(aZ(L))))table.insert(bd,[[    </testcase>]])elseif#L==0 then table.insert(bd,([[    <testcase name="%s" classname="%s"/>]]):format(be(bf[bi]),be(bf[bi])))else for bj,M in ipairs(L)do table.insert(bd,([[    <testcase name="%s:%d" classname="%s">]]):format(be(bf[bi]),bj,be(bf[bi])))table.insert(bd,([[        <failure type="%s" message="%s"/>]]):format(be(b9(M)),be(ba(bf[bi],M,w))))table.insert(bd,[[    </testcase>]])end end end;table.insert(bd,[[</testsuite>]])return table.concat(bd,"\\n")end;local bk={["I/O"]="F1",["syntax"]="F2",["runtime"]="F3"}function r.builtin_formatters.visual_studio(J,bf)local bd={}for D,L in ipairs(J)do if L.fatal then table.insert(bd,("luacheck : fatal error %s: couldn't check %s: %s"):format(bk[L.fatal],bf[D],L.msg))else for K,M in ipairs(L)do local bl=M.code:sub(1,1)=="0"and"error"or"warning"local bb=aX(M)table.insert(bd,("%s(%d,%d) : %s %s: %s"):format(bf[D],M.line,M.column,bl,b9(M),bb))end end end;return table.concat(bd,"\\n")end;function r.builtin_formatters.plain(J,bf,w)w.color=false;local bd={}for D,L in ipairs(J)do if L.fatal then table.insert(bd,("%s: %s (%s)"):format(bf[D],aZ(L),L.msg))else for K,M in ipairs(L)do table.insert(bd,ba(bf[D],M,w))end end end;return table.concat(bd,"\\n")end;function r.format(J,bf,q)return r.builtin_formatters[q.formatter or"default"](J,bf,{quiet=q.quiet or 0,color=q.color~=false and aF,codes=q.codes,ranges=q.ranges})end;return r end)c("luacheck.stages.init",function(i,o,c,d)local s=i("luacheck.utils")local aE={}aE.modules={}table.insert(aE.modules,i("luacheck.stages.parse"))table.insert(aE.modules,i("luacheck.stages.unwrap_parens"))table.insert(aE.modules,i("luacheck.stages.linearize"))table.insert(aE.modules,i("luacheck.stages.parse_inline_options"))table.insert(aE.modules,i("luacheck.stages.name_functions"))table.insert(aE.modules,i("luacheck.stages.resolve_locals"))table.insert(aE.modules,i("luacheck.stages.detect_bad_whitespace"))table.insert(aE.modules,i("luacheck.stages.detect_cyclomatic_complexity"))table.insert(aE.modules,i("luacheck.stages.detect_empty_blocks"))table.insert(aE.modules,i("luacheck.stages.detect_empty_statements"))table.insert(aE.modules,i("luacheck.stages.detect_globals"))table.insert(aE.modules,i("luacheck.stages.detect_reversed_fornum_loops"))table.insert(aE.modules,i("luacheck.stages.detect_unbalanced_assignments"))table.insert(aE.modules,i("luacheck.stages.detect_uninit_accesses"))table.insert(aE.modules,i("luacheck.stages.detect_unreachable_code"))table.insert(aE.modules,i("luacheck.stages.detect_unused_fields"))table.insert(aE.modules,i("luacheck.stages.detect_unused_locals"))aE.warnings={}local bm={"code","line","column","end_column"}local function bn(b1)for bo,aH in pairs(b1)do assert(not aE.warnings[bo])assert(aH.message_format)assert(aH.fields)local bp=s.concat_arrays({bm,aH.fields})aE.warnings[bo]={message_format=aH.message_format,fields=bp,fields_set=s.array_to_set(bp)}end end;bn({["011"]={message_format="{msg}",fields={"msg","prev_line","prev_column","prev_end_column"}},["631"]={message_format="line is too long ({end_column} > {max_length})",fields={}}})for K,bq in ipairs(aE.modules)do if bq.warnings then bn(bq.warnings)end end;function aE.run(br)for K,bq in ipairs(aE.modules)do bq.run(br)end end;return aE end)c("luacheck.stages.detect_unused_locals",function(i,o,c,d)local s=i("luacheck.utils")local bs={}local function bt(aH)if aH.func then if aH.recursive then return"unused recursive function {name!}"elseif aH.mutually_recursive then return"unused mutually recursive function {name!}"else return"unused function {name!}"end else return"unused variable {name!}"end end;local function bu(aH)if aH.name=="..."then return"unused variable length argument"else return"unused argument {name!}"end end;local function bv(aI)return{message_format=function(aH)if aH.overwritten_line then return aI.." is overwritten on line {overwritten_line} before use"else return aI.." is unused"end end,fields={"name","secondary","overwritten_line","overwritten_column","overwritten_end_column"}}end;bs.warnings={["211"]={message_format=bt,fields={"name","func","secondary","useless","recursive","mutually_recursive"}},["212"]={message_format=bu,fields={"name","self"}},["213"]={message_format="unused loop variable {name!}",fields={"name"}},["221"]={message_format="variable {name!} is never set",fields={"name","secondary"}},["231"]={message_format="variable {name!} is never accessed",fields={"name","secondary"}},["232"]={message_format="argument {name!} is never accessed",fields={"name"}},["233"]={message_format="loop variable {name!} is never accessed",fields={"name"}},["241"]={message_format="variable {name!} is mutated but never accessed",fields={"name","secondary"}},["311"]=bv("value assigned to variable {name!}"),["312"]=bv("value of argument {name!}"),["313"]=bv("value of loop variable {name!}"),["331"]={message_format="value assigned to variable {name!} is mutated but never accessed",fields={"name","secondary"}}}local function bw(a5)return a5.secondaries and a5.secondaries.used end;local bx={var="1",func="1",arg="2",loop="3",loopi="3"}local function by(br,a5,bz)br:warn_value("21"..bx[a5.var.type],a5,{secondary=bw(a5)or nil,func=a5.type=="func"or nil,self=a5.var.self,useless=a5.var.name=="_"and bz or nil})end;local function bA(br,bB,bC)local bD=true;for K,a5 in ipairs(bB.values)do if not a5.empty and not bw(a5)then bD=nil;break end end;br:warn_var("2"..(bC and"4"or"3")..bx[bB.type],bB,{secondary=bD})end;local function bE(br,a5,bF)local aH=br:warn_value("3"..(a5.mutated and"3"or"1")..bx[a5.type],a5,{secondary=bw(a5)or nil})if bF then aH.overwritten_line=bF.line;aH.overwritten_column=br:offset_to_column(bF.line,bF.offset)aH.overwritten_end_column=br:offset_to_column(bF.line,bF.end_offset)end end;local function bG(bB)return#bB.values==1 and bB.values[1].type=="func"or#bB.values==2 and bB.values[1].empty and bB.values[2].type=="func"end;local bH=s.array_to_set({"Id","Index","Call","Invoke","Op","Paren","Dots"})local function bI(a5)return a5.type~="var"or a5.node and bH[a5.node.tag]end;local function bJ(O,a5)for K,bK in ipairs(O.lhs)do if bK.var==a5.var then return bK end end end;local function bL(O,a5)local bM;for K,bK in ipairs(O.lhs)do if bK.var==a5.var then if bM then return bK elseif bK==a5.var_node then bM=true end end end end;local function bN(br,bB)if bG(bB)then local a5=bB.values[2]or bB.values[1]if not a5.used then by(br,a5)end elseif#bB.values==1 then local a5=bB.values[1]if not a5.used then if a5.mutated then if not bI(a5)then bA(br,bB,true)end else by(br,a5,a5.empty)end elseif a5.empty then br:warn_var("221",bB)end elseif not bB.accessed and not bB.mutated then bA(br,bB)else local bO=true;for K,a5 in ipairs(bB.values)do if bI(a5)then bO=false end end;if not bB.accessed and bO then bA(br,bB,true)end;for K,a5 in ipairs(bB.values)do if not a5.empty then if not a5.used then if not a5.mutated then local bF;if a5.overwriting_item then if a5.overwriting_item~=a5.item then bF=bJ(a5.overwriting_item,a5)end else bF=bL(a5.item,a5)end;bE(br,a5,bF)elseif not bI(a5)then if bB.accessed or not bO then bE(br,a5)end end end end end end end;local function bP(br,bQ)for K,O in ipairs(bQ.items)do if O.tag=="Local"then for bB in pairs(O.set_variables)do if bB.node.line then bN(br,bB)end end end end end;local function bR(br)for K,bQ in ipairs(br.lines)do bP(br,bQ)end end;local function bS(bT,bU,bQ)for bV in pairs(bT[bQ])do if not bU[bV]then bU[bV]=true;bS(bT,bU,bV)end end end;local function bW(br)local bQ=br.top_line;local bX={[bQ]={}}local bY={[bQ]={}}for K,bZ in ipairs(bQ.lines)do bX[bZ]={}bY[bZ]={}end;for K,bZ in ipairs(bQ.lines)do if bZ.node.value then for b_ in pairs(bZ.node.value.using_lines)do bX[b_][bZ]=true;bY[bZ][b_]=true end elseif bZ.parent then bX[bZ.parent][bZ]=true;bY[bZ][bZ.parent]=true end end;local bU={[bQ]=true}bS(bX,bU,bQ)for K,bZ in ipairs(bQ.lines)do if bZ.node.value and not bZ.node.value.used then bU[bZ]=true;bS(bX,bU,bZ)end end;for K,bZ in ipairs(bQ.lines)do local a5=bZ.node.value;if a5 and a5.used and not bU[bZ]then local c0=setmetatable({},{__index=bU})local c1=setmetatable({},{__index=bU})bS(bX,c0,bZ)bS(bY,c1,bZ)for c2 in pairs(c0)do if rawget(c1,c2)then bU[c2]=true;a5=c2.node.value;if a5 then local c3=bX[c2][c2]if bG(a5.var)then br:warn_value("211",a5,{func=true,mutually_recursive=not c3 or nil,recursive=c3 or nil})else br:warn_value("311",a5)end end end end end end end;function bs.run(br)bR(br)bW(br)end;return bs end)c("luacheck.stages.detect_unused_fields",function(i,o,c,d)local c4=i("luacheck.core_utils")local bs={}local function c5(aH)local c6=aH.index and"index"or"field"return"value assigned to "..c6 .." {field!} is overwritten on line {overwritten_line} before use"end;bs.warnings={["314"]={message_format=c5,fields={"field","index","overwritten_line","overwritten_column","overwritten_end_column"}}}local function c7(br,bK,c8,c9,bF)br:warn_range("314",bK,{field=c8,index=c9,overwritten_line=bF.line,overwritten_column=br:offset_to_column(bF.line,bF.offset),overwritten_end_column=br:offset_to_column(bF.line,bF.end_offset)})end;local function ca(br,bK)local cb=1.0;local cc={}local cd={}local ce={}for K,cf in ipairs(bK)do local cg;local ch;local ci;if cf.tag=="Pair"then ci=cf[1]cg,ch=c4.eval_const_node(ci)else ci=cf;cg=cb;ch=tostring(math.floor(cg))cb=cb+1.0 end;if cg then local cj=cc[cg]local ck=cd[cj]local cl=ce[cj]if cj then c7(br,cj,ck,cl,ci)end;cc[cg]=ci;cd[ci]=ch;if cf.tag~="Pair"then ce[ci]=true end end end end;local function cm(br,cn)for K,bK in ipairs(cn)do if type(bK)=="table"then if bK.tag=="Table"then ca(br,bK)end;cm(br,bK)end end end;function bs.run(br)cm(br,br.ast)end;return bs end)c("luacheck.core_utils",function(i,o,c,d)local co=i("luacheck.decoder")local s=i("luacheck.utils")local c4={}function c4.eval_const_node(bK)if bK.tag=="True"then return true,"true"elseif bK.tag=="False"then return false,"false"elseif bK.tag=="String"then local cp=co.decode(bK[1])return bK[1],cp:get_printable_substring(1,cp:get_length())else local cq;if bK.tag=="Op"and bK[1]=="unm"then cq=true;bK=bK[2]end;if bK.tag~="Number"then return end;local ar=bK[1]if ar:find("[iIuUlL]")then return end;if _VERSION=="Lua 5.3"and not ar:find("[%.eEpP]")then ar=ar..".0"end;local aK=tonumber(ar)if not aK then return end;if cq then aK=-aK end;if aK==aK and aK<1/0 and aK>-1/0 then return aK,(cq and"-"or"")..bK[1]end end end;local cr=s.array_to_set({"Do","While","Repeat","Fornum","Forin","If"})local function cs(br,C,ct,cu,...)for K,O in ipairs(C)do if ct[O.tag]then cu(br,O,...)end;if not O.tag or cr[O.tag]then cs(br,O,ct,cu,...)end end end;function c4.each_statement(br,cv,cu,...)local ct=s.array_to_set(cv)for K,bQ in ipairs(br.lines)do cs(br,bQ.node[2],ct,cu,...)end end;local function cw(cx,cy)if cx.line~=cy.line then return cx.line<cy.line elseif cx.column~=cy.column then return cx.column<cy.column else return cx.code<cy.code end end;function c4.sort_by_location(b1)table.sort(b1,cw)end;return c4 end)c("luacheck.decoder",function(i,o,c,d)local cz=i("luacheck.unicode")local s=i("luacheck.utils")local co={}local cA=string.byte;local cB=string.find;local cC=string.gsub;local cD=string.sub;local cE=s.class()function cE:__init(cF)self._bytes=cF end;function cE:get_codepoint(a4)return cA(self._bytes,a4)end;function cE:get_substring(cG,cH)return cD(self._bytes,cG,cH)end;local function cI(cJ)return("\\\\x%02X"):format(cA(cJ))end;function cE:get_printable_substring(cG,cH)return cC(cD(self._bytes,cG,cH),"[^\\32-\\126]",cI)end;function cE:get_length()return#self._bytes end;function cE:find(at,cG)return cB(self._bytes,at,cG)end;local function cK(cF)local cL={}local cM={}local cN=1;local cO=1;while true do cM[cO]=cN;local cP=cA(cF,cN)if not cP then return cL,cM end;cN=cN+1;if cP>=0x80 then if cP<0xC0 then return end;local cQ=(cA(cF,cN)or 0)-0x80;if cQ<0 or cQ>=0x40 then return end;cN=cN+1;if cP<0xE0 then cP=cQ+(cP-0xC0)*0x40 elseif cP<0xF0 then cP=cQ+(cP-0xE0)*0x40;cQ=(cA(cF,cN)or 0)-0x80;if cQ<0 or cQ>=0x40 then return end;cN=cN+1;cP=cQ+cP*0x40 elseif cP<0xF8 then cP=cQ+(cP-0xF0)*0x40;cQ=(cA(cF,cN)or 0)-0x80;if cQ<0 or cQ>=0x40 then return end;cN=cN+1;cP=cQ+cP*0x40;cQ=(cA(cF,cN)or 0)-0x80;if cQ<0 or cQ>=0x40 then return end;cN=cN+1;cP=cQ+cP*0x40;if cP>0x10FFFF then return end else return end end;cL[cO]=cP;cO=cO+1 end end;local cR=s.class()function cR:__init(cF,cL,cM)self._bytes=cF;self._codepoints=cL;self._byte_offsets=cM end;function cR:get_codepoint(a4)return self._codepoints[a4]end;function cR:get_substring(cG,cH)local cM=self._byte_offsets;return cD(self._bytes,cM[cG],cM[cH+1]-1)end;function cR:get_printable_substring(cG,cH)local ay={}for a4=cG,cH do local cP=self._codepoints[a4]if cz.is_printable(cP)then table.insert(ay,self:get_substring(a4,a4))else table.insert(ay,(cP>255 and"\\\\u{%X}"or"\\\\x%02X"):format(cP))end end;return table.concat(ay)end;function cR:get_length()return#self._codepoints end;function cR:find(at,cG)return cB(self._bytes,at,self._byte_offsets[cG])end;function co.decode(cF)if cB(cF,"[\\128-\\255]")then local cL,cM=cK(cF)if cL then return cR(cF,cL,cM)end end;return cE(cF)end;return co end)c("luacheck.unicode",function(i,o,c,d)local cS=i("luacheck.unicode_printability_boundaries")local cz={}function cz.is_printable(cP)local cT;local cU=1;local cV=#cS+1;while cV-cU>1 do local cW=math.floor((cU+cV)/2)local cX=cS[cW]if cP<cX then cV=cW elseif cP>cX then cU=cW else cT=cW;break end end;cT=cT or cU;return cT%2==0 end;return cz end)c("luacheck.unicode_printability_boundaries",function(i,o,c,d)return{0,32,127,160,173,174,888,890,896,900,907,908,909,910,930,931,1328,1329,1367,1369,1419,1421,1424,1425,1480,1488,1515,1519,1525,1542,1564,1566,1757,1758,1806,1808,1867,1869,1970,1984,2043,2045,2094,2096,2111,2112,2140,2142,2143,2144,2155,2208,2229,2230,2238,2259,2274,2275,2436,2437,2445,2447,2449,2451,2473,2474,2481,2482,2483,2486,2490,2492,2501,2503,2505,2507,2511,2519,2520,2524,2526,2527,2532,2534,2559,2561,2564,2565,2571,2575,2577,2579,2601,2602,2609,2610,2612,2613,2615,2616,2618,2620,2621,2622,2627,2631,2633,2635,2638,2641,2642,2649,2653,2654,2655,2662,2679,2689,2692,2693,2702,2703,2706,2707,2729,2730,2737,2738,2740,2741,2746,2748,2758,2759,2762,2763,2766,2768,2769,2784,2788,2790,2802,2809,2816,2817,2820,2821,2829,2831,2833,2835,2857,2858,2865,2866,2868,2869,2874,2876,2885,2887,2889,2891,2894,2902,2904,2908,2910,2911,2916,2918,2936,2946,2948,2949,2955,2958,2961,2962,2966,2969,2971,2972,2973,2974,2976,2979,2981,2984,2987,2990,3002,3006,3011,3014,3017,3018,3022,3024,3025,3031,3032,3046,3067,3072,3085,3086,3089,3090,3113,3114,3130,3133,3141,3142,3145,3146,3150,3157,3159,3160,3163,3168,3172,3174,3184,3192,3213,3214,3217,3218,3241,3242,3252,3253,3258,3260,3269,3270,3273,3274,3278,3285,3287,3294,3295,3296,3300,3302,3312,3313,3315,3328,3332,3333,3341,3342,3345,3346,3397,3398,3401,3402,3408,3412,3428,3430,3456,3458,3460,3461,3479,3482,3506,3507,3516,3517,3518,3520,3527,3530,3531,3535,3541,3542,3543,3544,3552,3558,3568,3570,3573,3585,3643,3647,3676,3713,3715,3716,3717,3719,3721,3722,3723,3725,3726,3732,3736,3737,3744,3745,3748,3749,3750,3751,3752,3754,3756,3757,3770,3771,3774,3776,3781,3782,3783,3784,3790,3792,3802,3804,3808,3840,3912,3913,3949,3953,3992,3993,4029,4030,4045,4046,4059,4096,4294,4295,4296,4301,4302,4304,4681,4682,4686,4688,4695,4696,4697,4698,4702,4704,4745,4746,4750,4752,4785,4786,4790,4792,4799,4800,4801,4802,4806,4808,4823,4824,4881,4882,4886,4888,4955,4957,4989,4992,5018,5024,5110,5112,5118,5120,5789,5792,5881,5888,5901,5902,5909,5920,5943,5952,5972,5984,5997,5998,6001,6002,6004,6016,6110,6112,6122,6128,6138,6144,6158,6160,6170,6176,6265,6272,6315,6320,6390,6400,6431,6432,6444,6448,6460,6464,6465,6468,6510,6512,6517,6528,6572,6576,6602,6608,6619,6622,6684,6686,6751,6752,6781,6783,6794,6800,6810,6816,6830,6832,6847,6912,6988,6992,7037,7040,7156,7164,7224,7227,7242,7245,7305,7312,7355,7357,7368,7376,7418,7424,7674,7675,7958,7960,7966,7968,8006,8008,8014,8016,8024,8025,8026,8027,8028,8029,8030,8031,8062,8064,8117,8118,8133,8134,8148,8150,8156,8157,8176,8178,8181,8182,8191,8192,8203,8208,8232,8239,8288,8304,8306,8308,8335,8336,8349,8352,8384,8400,8433,8448,8588,8592,9255,9280,9291,9312,11124,11126,11158,11160,11209,11210,11263,11264,11311,11312,11359,11360,11508,11513,11558,11559,11560,11565,11566,11568,11624,11631,11633,11647,11671,11680,11687,11688,11695,11696,11703,11704,11711,11712,11719,11720,11727,11728,11735,11736,11743,11744,11855,11904,11930,11931,12020,12032,12246,12272,12284,12288,12352,12353,12439,12441,12544,12549,12592,12593,12687,12688,12731,12736,12772,12784,12831,12832,13055,13056,19894,19904,40944,40960,42125,42128,42183,42192,42540,42560,42744,42752,42938,42999,43052,43056,43066,43072,43128,43136,43206,43214,43226,43232,43348,43359,43389,43392,43470,43471,43482,43486,43519,43520,43575,43584,43598,43600,43610,43612,43715,43739,43767,43777,43783,43785,43791,43793,43799,43808,43815,43816,43823,43824,43878,43888,44014,44016,44026,44032,55204,55216,55239,55243,55292,63744,64110,64112,64218,64256,64263,64275,64280,64285,64311,64312,64317,64318,64319,64320,64322,64323,64325,64326,64450,64467,64832,64848,64912,64914,64968,65008,65022,65024,65050,65056,65107,65108,65127,65128,65132,65136,65141,65142,65277,65281,65471,65474,65480,65482,65488,65490,65496,65498,65501,65504,65511,65512,65519,65532,65534,65536,65548,65549,65575,65576,65595,65596,65598,65599,65614,65616,65630,65664,65787,65792,65795,65799,65844,65847,65935,65936,65948,65952,65953,66000,66046,66176,66205,66208,66257,66272,66300,66304,66340,66349,66379,66384,66427,66432,66462,66463,66500,66504,66518,66560,66718,66720,66730,66736,66772,66776,66812,66816,66856,66864,66916,66927,66928,67072,67383,67392,67414,67424,67432,67584,67590,67592,67593,67594,67638,67639,67641,67644,67645,67647,67670,67671,67743,67751,67760,67808,67827,67828,67830,67835,67868,67871,67898,67903,67904,67968,68024,68028,68048,68050,68100,68101,68103,68108,68116,68117,68120,68121,68150,68152,68155,68159,68169,68176,68185,68192,68256,68288,68327,68331,68343,68352,68406,68409,68438,68440,68467,68472,68498,68505,68509,68521,68528,68608,68681,68736,68787,68800,68851,68858,68904,68912,68922,69216,69247,69376,69416,69424,69466,69632,69710,69714,69744,69759,69821,69822,69826,69840,69865,69872,69882,69888,69941,69942,69959,69968,70007,70016,70094,70096,70112,70113,70133,70144,70162,70163,70207,70272,70279,70280,70281,70282,70286,70287,70302,70303,70314,70320,70379,70384,70394,70400,70404,70405,70413,70415,70417,70419,70441,70442,70449,70450,70452,70453,70458,70459,70469,70471,70473,70475,70478,70480,70481,70487,70488,70493,70500,70502,70509,70512,70517,70656,70746,70747,70748,70749,70751,70784,70856,70864,70874,71040,71094,71096,71134,71168,71237,71248,71258,71264,71277,71296,71352,71360,71370,71424,71451,71453,71468,71472,71488,71680,71740,71840,71923,71935,71936,72192,72264,72272,72324,72326,72355,72384,72441,72704,72713,72714,72759,72760,72774,72784,72813,72816,72848,72850,72872,72873,72887,72960,72967,72968,72970,72971,73015,73018,73019,73020,73022,73023,73032,73040,73050,73056,73062,73063,73065,73066,73103,73104,73106,73107,73113,73120,73130,73440,73465,73728,74650,74752,74863,74864,74869,74880,75076,77824,78895,82944,83527,92160,92729,92736,92767,92768,92778,92782,92784,92880,92910,92912,92918,92928,92998,93008,93018,93019,93026,93027,93048,93053,93072,93760,93851,93952,94021,94032,94079,94095,94112,94176,94178,94208,100338,100352,101107,110592,110879,110960,111356,113664,113771,113776,113789,113792,113801,113808,113818,113820,113824,118784,119030,119040,119079,119081,119155,119163,119273,119296,119366,119520,119540,119552,119639,119648,119673,119808,119893,119894,119965,119966,119968,119970,119971,119973,119975,119977,119981,119982,119994,119995,119996,119997,120004,120005,120070,120071,120075,120077,120085,120086,120093,120094,120122,120123,120127,120128,120133,120134,120135,120138,120145,120146,120486,120488,120780,120782,121484,121499,121504,121505,121520,122880,122887,122888,122905,122907,122914,122915,122917,122918,122923,124928,125125,125127,125143,125184,125259,125264,125274,125278,125280,126065,126133,126464,126468,126469,126496,126497,126499,126500,126501,126503,126504,126505,126515,126516,126520,126521,126522,126523,126524,126530,126531,126535,126536,126537,126538,126539,126540,126541,126544,126545,126547,126548,126549,126551,126552,126553,126554,126555,126556,126557,126558,126559,126560,126561,126563,126564,126565,126567,126571,126572,126579,126580,126584,126585,126589,126590,126591,126592,126602,126603,126620,126625,126628,126629,126634,126635,126652,126704,126706,126976,127020,127024,127124,127136,127151,127153,127168,127169,127184,127185,127222,127232,127245,127248,127340,127344,127405,127462,127491,127504,127548,127552,127561,127568,127570,127584,127590,127744,128725,128736,128749,128752,128762,128768,128884,128896,128985,129024,129036,129040,129096,129104,129114,129120,129160,129168,129198,129280,129292,129296,129343,129344,129393,129395,129399,129402,129403,129404,129443,129456,129466,129472,129475,129488,129536,129632,129646,131072,173783,173824,177973,177984,178206,178208,183970,183984,191457,194560,195102,917760,918000}end)c("luacheck.stages.detect_unreachable_code",function(i,o,c,d)local bs={}bs.warnings={["511"]={message_format="unreachable code",fields={}},["512"]={message_format="loop is executed at most once",fields={}}}local function cY()end;local function cZ(br,bQ)local c_={}bQ:walk(c_,1,cY)for d0,O in ipairs(bQ.items)do if not c_[d0]then if O.node then br:warn_range(O.loop_end and"512"or"511",O.node)bQ:walk(c_,d0,cY)end end end end;function bs.run(br)for K,bQ in ipairs(br.lines)do cZ(br,bQ)end end;return bs end)c("luacheck.stages.detect_uninit_accesses",function(i,o,c,d)local bs={}bs.warnings={["321"]={message_format="accessing uninitialized variable {name!}",fields={"name"}},["341"]={message_format="mutating uninitialized variable {name!}",fields={"name"}}}local function d1(br,bQ)for K,O in ipairs(bQ.items)do for K,d2 in ipairs({"accesses","mutations"})do local bo=d2=="accesses"and"321"or"341"local d3=O[d2]if d3 then for bB,d4 in pairs(d3)do if O.used_values[bB]then if not(#bB.values==1 and bB.values[1].empty)then local d5=true;for K,d6 in ipairs(O.used_values[bB])do if not d6.empty then d5=false;break end end;if d5 then for K,d7 in ipairs(d4)do br:warn_range(bo,d7,{name=d7[1]})end end end end end end end end end;function bs.run(br)for K,bQ in ipairs(br.lines)do d1(br,bQ)end end;return bs end)c("luacheck.stages.detect_unbalanced_assignments",function(i,o,c,d)local c4=i("luacheck.core_utils")local bs={}bs.warnings={["531"]={message_format="right side of assignment has more values than left side expects",fields={}},["532"]={message_format="right side of assignment has less values than left side expects",fields={}}}local function d8(bK)return bK.tag=="Dots"or bK.tag=="Call"or bK.tag=="Invoke"end;local function d9(br,bK)local da=bK[2]if not da then return end;local db=bK[1]if#da>#db then br:warn_range("531",bK)elseif#da<#db and bK.tag=="Set"and not d8(da[#da])then br:warn_range("532",bK)end end;function bs.run(br)c4.each_statement(br,{"Set","Local"},d9)end;return bs end)c("luacheck.stages.detect_reversed_fornum_loops",function(i,o,c,d)local c4=i("luacheck.core_utils")local bs={}bs.warnings={["571"]={message_format="numeric for loop goes from #(expr) down to {limit} but loop step is not negative",fields={"limit"}}}local function dc(br,bK)if bK[2].tag~="Op"or bK[2][1]~="len"then return end;local dd,de=c4.eval_const_node(bK[3])if not dd or dd>1 then return end;local df=1;if bK[5]then df=c4.eval_const_node(bK[4])end;if df and df>=0 then br:warn_range("571",bK,{limit=de})end end;function bs.run(br)c4.each_statement(br,{"Fornum"},dc)end;return bs end)c("luacheck.stages.detect_globals",function(i,o,c,d)local s=i("luacheck.utils")local bs={}local function dg(bb)return function(aH)if aH.indirect then return"indirectly "..bb else return bb end end end;local function dh(aH)if aH.module then return"setting non-module global variable {name!}"else return"setting non-standard global variable {name!}"end end;local di={"name","indexing","previous_indexing_len","top","indirect"}bs.warnings={["111"]={message_format=dh,fields=di},["112"]={message_format="mutating non-standard global variable {name!}",fields=di},["113"]={message_format="accessing undefined variable {name!}",fields=di},["121"]={message_format="setting read-only global variable {name!}",fields={}},["122"]={message_format=dg("setting read-only field {field!} of global {name!}"),fields={}},["131"]={message_format="unused global variable {name!}",fields={}},["142"]={message_format=dg("setting undefined field {field!} of global {name!}"),fields={}},["143"]={message_format=dg("accessing undefined field {field!} of global {name!}"),fields={}}}local dj={set="1",mutate="2",access="3"}local function dk(br,bK,a4,dl,dm)local dn=a4[1]local dp=dl and(#a4==1 and"set"or"mutate")or"access"local dq;if#a4>1 then dq={}for D,dr in ipairs(a4)do if D>1 then if dr=="unknown"then dq[D-1]=true elseif dr=="not_string"then dq[D-1]=false else dq[D-1]=dr[1]end end end end;br:warn_range("11"..dj[dp],bK,{name=dn[1],indexing=dq,previous_indexing_len=a4.previous_indexing_len,top=dm and dp=="set"or nil,indirect=bK~=dn or nil})end;local function ds(dt)return dt~="unknown"and dt~="not_string"and dt.tag~="String"end;local du=s.array_to_set({"Nil","True","False","Number","String","Table","Function"})local dv;local function dw(bK,O)if bK.tag=="Id"or bK.tag=="Index"then dv(bK,O)return bK.resolution elseif du[bK.tag]then return bK.tag=="String"and bK or"not_string"else return"unknown"end end;function dv(bK,O)if bK.resolution then return end;bK.resolution="unknown"local dx=bK;local dy=bK.tag=="Id"and"Id"or"Index"local ap={}while dy=="Index"do table.insert(ap,1,dx[2])dx=dx[1]dy=dx.tag end;if dy~="Id"then return end;local bB=dx.var;local dz;local dA;if bB then if not O.used_values[bB]or#O.used_values[bB]~=1 then return end;local a5=O.used_values[bB][1]if not a5.node then return end;dz=dw(a5.node,a5.item)if ds(dz)then dA=#dz end else dz={dx}end;if#ap==0 then bK.resolution=dz elseif not ds(dz)then bK.resolution="unknown"else local dt=s.update({},dz)dt.previous_indexing_len=dA;for K,aq in ipairs(ap)do local dB=dw(aq,O)if ds(dB)then dB="unknown"end;table.insert(dt,dB)end;bK.resolution=dt end end;local function dC(br,O,bK,dm,dl)if bK.tag=="Index"or bK.tag=="Invoke"or bK.tag=="Id"then if bK.tag=="Id"and bK.var then return end;dv(bK,O)local dt=bK.resolution;if bK.tag=="Invoke"then for D=3,#bK do dC(br,O,bK[D],dm)end end;if bK.tag~="Id"then repeat dC(br,O,bK[2],dm)bK=bK[1]until bK.tag~="Index"if bK.tag~="Id"then dC(br,O,bK,dm)end end;if ds(dt)then dk(br,bK,dt,dl,dm)end elseif bK.tag~="Function"then for K,dD in ipairs(bK)do if type(dD)=="table"then dC(br,O,dD,dm)end end end end;local function dE(br,O,cn,dm,dl)for K,bK in ipairs(cn)do dC(br,O,bK,dm,dl)end end;local function dF(br,bQ)local dm=bQ==br.top_line;for K,O in ipairs(bQ.items)do if O.tag=="Eval"then dC(br,O,O.node,dm)elseif O.tag=="Local"then if O.rhs then dE(br,O,O.rhs,dm)end elseif O.tag=="Set"then dE(br,O,O.lhs,dm,true)dE(br,O,O.rhs,dm)end end end;function bs.run(br)for K,bQ in ipairs(br.lines)do dF(br,bQ)end end;return bs end)c("luacheck.stages.detect_empty_statements",function(i,o,c,d)local bs={}bs.warnings={["551"]={message_format="empty statement",fields={}}}function bs.run(br)for K,dG in ipairs(br.useless_semicolons)do br:warn_range("551",dG)end end;return bs end)c("luacheck.stages.detect_empty_blocks",function(i,o,c,d)local c4=i("luacheck.core_utils")local bs={}bs.warnings={["541"]={message_format="empty do..end block",fields={}},["542"]={message_format="empty if branch",fields={}}}local function dH(br,dI,bo)if#dI==0 then br:warn_range(bo,dI)end end;local function dJ(br,bK)if bK.tag=="Do"then dH(br,bK,"541")return end;for a4=2,#bK,2 do dH(br,bK[a4],"542")end;if#bK%2==1 then dH(br,bK[#bK],"542")end end;function bs.run(br)c4.each_statement(br,{"Do","If"},dJ)end;return bs end)c("luacheck.stages.detect_cyclomatic_complexity",function(i,o,c,d)local s=i("luacheck.utils")local bs={}local function dK(aH)local dL="cyclomatic complexity of %s is too high ({complexity} > {max_complexity})"local dM;if aH.function_type=="main_chunk"then dM="main chunk"elseif aH.function_name then dM="{function_type} {function_name!}"else dM="function"end;return dL:format(dM)end;bs.warnings={["561"]={message_format=dK,fields={"complexity","function_type","function_name"}}}local function dN(br,bQ,dO)if bQ==br.top_line then br:warn("561",1,1,1,{complexity=dO,function_type="main_chunk"})else local bK=bQ.node;br:warn_range("561",bK,{complexity=dO,function_type=bK[1][1]and bK[1][1].implicit and"method"or"function",function_name=bK.name})end end;local dP=s.class()function dP:incr_decisions(dQ)self.count=self.count+dQ end;function dP:calc_expr(bK)if bK.tag=="Op"and(bK[1]=="and"or bK[1]=="or")then self:incr_decisions(1)end;if bK.tag~="Function"then self:calc_exprs(bK)end end;function dP:calc_exprs(dR)for K,dS in ipairs(dR)do if type(dS)=="table"then self:calc_expr(dS)end end end;function dP:calc_item_Eval(O)self:calc_expr(O.node)end;function dP:calc_item_Local(O)if O.rhs then self:calc_exprs(O.rhs)end end;function dP:calc_item_Set(O)self:calc_exprs(O.rhs)end;function dP:calc_item(O)local aj=self["calc_item_"..O.tag]if aj then aj(self,O)end end;function dP:calc_items(C)for K,O in ipairs(C)do self:calc_item(O)end end;function dP:calc_stmt_If(bK)for D=1,#bK-1,2 do self:incr_decisions(1)self:calc_stmts(bK[D+1])end;if#bK%2==1 then self:calc_stmts(bK[#bK])end end;function dP:calc_stmt_While(bK)self:incr_decisions(1)self:calc_stmts(bK[2])end;function dP:calc_stmt_Repeat(bK)self:incr_decisions(1)self:calc_stmts(bK[1])end;function dP:calc_stmt_Forin(bK)self:incr_decisions(1)self:calc_stmts(bK[3])end;function dP:calc_stmt_Fornum(bK)self:incr_decisions(1)self:calc_stmts(bK[5]or bK[4])end;function dP:calc_stmt(bK)local aj=self["calc_stmt_"..bK.tag]if aj then aj(self,bK)end end;function dP:calc_stmts(dT)for K,dU in ipairs(dT)do self:calc_stmt(dU)end end;function dP:report(br,bQ)self.count=1;self:calc_stmts(bQ.node[2])self:calc_items(bQ.items)dN(br,bQ,self.count)end;function bs.run(br)local dV=dP()for K,bQ in ipairs(br.lines)do dV:report(br,bQ)end end;return bs end)c("luacheck.stages.detect_bad_whitespace",function(i,o,c,d)local bs={}bs.warnings={["611"]={message_format="line contains only whitespace",fields={}},["612"]={message_format="line contains trailing whitespace",fields={}},["613"]={message_format="trailing whitespace in a string",fields={}},["614"]={message_format="trailing whitespace in a comment",fields={}},["621"]={message_format="inconsistent indentation (SPACE followed by TAB)",fields={}}}function bs.run(br)local dW=#br.line_offsets;for dX=1,dW do local dY=br.line_offsets[dX]local dZ=br.line_lengths[dX]if dZ>0 then local d_;if dX==dW then d_="^[^\\r\\n]-()[ \\t\\f\\v]+()[\\r\\n]?$"else d_="^[^\\r\\n]-()[ \\t\\f\\v]+()[\\r\\n]"end;local e0,K,e1,e2=br.source:find(d_,dY)local e3;if e1 then if e1==e0 then e3="611"elseif not br.line_endings[dX]then e3="612"elseif br.line_endings[dX]=="string"then e3="613"elseif br.line_endings[dX]=="comment"then e3="614"end;local e4=e2-1;local e5=dY+dZ-1;local e6=e5-(e4-e1)br:warn(e3,dX,e6,e5)end;if e3~="611"then local e7,e8=br.source:find("^[ \\t\\f\\v]- \\t[ \\t\\f\\v]*",dY)if e7 then local e9=dY;local ea=e9+e8-e7;br:warn("621",dX,dY,ea)end end end end end;return bs end)c("luacheck.stages.resolve_locals",function(i,o,c,d)local bs={}local function eb(ec,bB,a5)if not ec[bB]then ec[bB]={}end;table.insert(ec[bB],a5)end;local function ed(bQ,O,bB,a5,ee)eb(O.used_values,bB,a5)a5[ee and"mutated"or"used"]=true;a5.using_lines[bQ]=true;if a5.secondaries then a5.secondaries.used=true end end;local function ef(bQ,C,bB,a5,ee)if not C then return end;for K,O in ipairs(C)do ed(bQ,O,bB,a5,ee)end end;local function eg(eh,ei)for bB,ej in pairs(ei.set_upvalues)do for K,ek in ipairs(ej)do ef(eh,eh.accessed_upvalues[bB],bB,ek.set_variables[bB])ef(eh,eh.mutated_upvalues[bB],bB,ek.set_variables[bB],true)end end end;local function el(bB,a4)return bB.scope_start<=a4 and a4<=bB.scope_end end;local function em(bQ,a4,O,bB,a5)if not el(bB,a4)then a5.overwriting_item=false;return true end;if O.accesses and O.accesses[bB]then ed(bQ,O,bB,a5)end;if O.mutations and O.mutations[bB]then ed(bQ,O,bB,a5,true)end;if O.lines then for K,en in ipairs(O.lines)do ef(en,en.accessed_upvalues[bB],bB,a5)ef(en,en.mutated_upvalues[bB],bB,a5,true)end end;if O.set_variables and O.set_variables[bB]then if a5.overwriting_item~=false then if a5.overwriting_item and a5.overwriting_item~=O then a5.overwriting_item=false else a5.overwriting_item=O end end;return true end end;local function eo(bQ)for D,O in ipairs(bQ.items)do if O.set_variables then for bB,a5 in pairs(O.set_variables)do if bB.line==bQ then bQ:walk({},D+1,em,bB,a5)end end end end end;local function ep(bQ,K,O,eq)if not O then return true end;if O.set_variables then for bB,a5 in pairs(O.set_variables)do ef(eq,eq.accessed_upvalues[bB],bB,a5)ef(eq,eq.mutated_upvalues[bB],bB,a5,true)end end;if O.lines then for K,en in ipairs(O.lines)do eg(eq,en)eg(en,eq)end end;for bB,ej in pairs(eq.set_upvalues)do if O.accesses and O.accesses[bB]then for K,ek in ipairs(ej)do ed(bQ,O,bB,ek.set_variables[bB])end end;if O.mutations and O.mutations[bB]then for K,ek in ipairs(ej)do ed(bQ,O,bB,ek.set_variables[bB],true)end end end end;local function er(bQ)for D,O in ipairs(bQ.items)do if O.lines then for K,en in ipairs(O.lines)do bQ:walk({},D,ep,en)end end end end;local function es(bQ)eo(bQ)er(bQ)end;function bs.run(br)for K,bQ in ipairs(br.lines)do es(bQ)end end;return bs end)c("luacheck.stages.name_functions",function(i,o,c,d)local bs={}local function et(eu,ci)if ci.tag=="String"then return eu.."."..ci[1]end end;local function ev(bK)if bK.tag=="Id"then return bK[1]elseif bK.tag=="Index"then local eu=ev(bK[1])return eu and et(eu,bK[2])end end;local ew;local function ex(cn)for K,bK in ipairs(cn)do if type(bK)=="table"then ew(bK)end end end;function ew(bK,k)if bK.tag=="Function"then bK.name=k;ex(bK[2])elseif bK.tag=="Set"or bK.tag=="Local"or bK.tag=="Localrec"then local db=bK[1]local da=bK[2]if da then ex(db)for a4,ey in ipairs(da)do local ez=db[a4]local aV=ez and ev(ez)ew(ey,aV)end end elseif bK.tag=="Table"and k then for K,eA in ipairs(bK)do if eA.tag=="Pair"then local ci=eA[1]local eB=eA[2]ew(ci)ew(eB,et(k,ci))else ew(eA)end end else ex(bK)end end;function bs.run(br)ex(br.ast)end;return bs end)c("luacheck.stages.parse_inline_options",function(i,o,c,d)local q=i("luacheck.options")local s=i("luacheck.utils")local bs={}bs.warnings={["021"]={message_format="{msg}",fields={"msg"}},["022"]={message_format="unpaired push directive",fields={}},["023"]={message_format="unpaired pop directive",fields={}}}bs.inline_option_fields={"line","pop_count","options","column","end_column"}local eC=s.array_to_set({"max_line_length","max_code_line_length","max_string_line_length","max_comment_line_length","max_cyclomatic_complexity"})local function eD(k)if k=="std"or q.variadic_inline_options[k]then return true end;k=k:gsub("^no_","")return q.nullary_inline_options[k]or eC[k]end;local function eE(eF)local eG;local eH;local eI;for D,eJ in ipairs(eF)do eG=eG and eG.."_"..eJ or eJ;if eD(eG)then eH=eG;eI=D end end;if not eH then return end;local ak={}for D=eI+1,#eF do table.insert(ak,eF[D])end;return eH,ak end;local function eK(k,ak,eL)return("inline option '%s' expects %d argument%s, %d given"):format(k,eL,eL==1 and""or"s",#ak)end;local function eM(l)local w={}local ay=s.split(l,",")for K,eN in ipairs(ay)do local eF=s.split(eN)local k,ak=eE(eF)if not k then if#eF==0 then return nil,#ay==1 and"empty inline option"or"empty inline option invocation"else return nil,("unknown inline option '%s'"):format(table.concat(eF," "))end end;if k=="std"then if#ak~=1 then return nil,eK(k,ak,1)end;w.std=ak[1]elseif k=="ignore"and#ak==0 then w.ignore={".*"}elseif q.variadic_inline_options[k]then w[k]=ak else local eO=k:gsub("_"," ")local eP;k,eP=k:gsub("^no_","")local eQ=eP==0;if q.nullary_inline_options[k]then if#ak~=0 then return nil,eK(eO,ak,0)end;w[k]=eQ else assert(eC[k])if eQ then if#ak~=1 then return nil,eK(eO,ak,1)end;local a5=tonumber(ak[1])if not a5 then return nil,("inline option '%s' expects number as argument"):format(k)end;w[k]=a5 else if#ak~=0 then return nil,eK(eO,ak,0)end;w[k]=false end end end end;return w end;local function eR(eS)local l=s.after(s.strip(eS),"^luacheck:")if not l then return end;local eT,eU;l=s.strip(l:gsub("%b()"," "))local eV=l:match("^push%s+(.*)")if eV then eU="push"l=eV elseif l=="push"or l=="pop"then return l end;local eW;eT,eW=eM(l)return eT,eW or eU end;local function eX(br)local W={}for K,eY in ipairs(br.comments)do local eT,eU=eR(eY.contents)if eT then table.insert(W,{line=eY.line,column=br:offset_to_column(eY.line,eY.offset),end_column=br:offset_to_column(eY.line,eY.end_offset),options=eT})if eU then table.insert(W,{line=eY.line,column=br:offset_to_column(eY.line,eY.offset),end_column=br:offset_to_column(eY.line,eY.end_offset),options=eU})end elseif eU then br:warn_range("021",eY,{msg=eU})end end;return W end;local function eZ(e_,br)for K,bQ in ipairs(br.top_line.lines)do local f0=bQ.node;table.insert(e_,{line=f0.line,column=br:offset_to_column(f0.line,f0.offset),options="push"})table.insert(e_,{line=f0.end_range.line,column=br:offset_to_column(f0.end_range.line,f0.end_range.offset),options="pop"})end end;local function f1(ao)if ao.options=="push"then return 1 elseif ao.options=="pop"then return 3 else return 2 end end;local function f2(a7,a8)if a7.line~=a8.line then return a7.line<a8.line end;local f3=f1(a7)local f4=f1(a8)if f3~=f4 then return f3<f4 else return a7.column<a8.column end end;local function f5(br,e_)local W={}local f6;local f7=s.Stack()local f8=s.Stack()local f9=0;for K,O in ipairs(e_)do if O.options=="push"then f7:push(O)f8:push(f9)elseif O.options=="pop"then if not f7.top or O.end_column and not f7.top.end_column then br:warn_column_range("023",O)else if not O.end_column then while f7.top and f7.top.end_column do br:warn_column_range("022",f7.top)f7:pop()f8:pop()end end;f7:pop()local fa=f8:pop()local fb=f9-fa;if fb>0 then local bQ=O.line+1;if f6 and f6.line==bQ then f6.pop_count=f6.pop_count+fb else f6={line=bQ,pop_count=fb}table.insert(W,f6)end end;f9=fa end else if f6 and f6.line==O.line then f6.options=O.options;f6.column=O.column;f6.end_column=O.end_column else f6=O;table.insert(W,O)end;if br.code_lines[O.line]then f6={line=O.line+1,pop_count=1}table.insert(W,f6)else f9=f9+1 end end end;while f7.top do br:warn_column_range("022",f7:pop())end;return W end;function bs.run(br)local e_=eX(br)eZ(e_,br)table.sort(e_,f2)br.inline_options=f5(br,e_)end;return bs end)c("luacheck.options",function(i,o,c,d)local q={}local fc=i("luacheck.builtin_standards.init")local fd=i("luacheck.standards")local s=i("luacheck.utils")local fe=s.has_type("boolean")local ff=s.has_type_or_false("number")local fg=s.array_of("string")local function fh(fi,x)local ay=s.split(fi,"+")if ay[1]:match("^%s*$")then ay.add=true;table.remove(ay,1)end;for D,az in ipairs(ay)do ay[D]=s.strip(az)if not x[ay[D]]then return nil,("unknown std '%s'"):format(ay[D])end end;return ay end;local function fj(aB,x)if type(aB)=="string"then local z,A=fh(aB,x)return not not z,A elseif type(aB)=="table"then return fd.validate_std_table(aB)else return false,"string or table expected, got "..type(aB)end end;local function fk(aB)if type(aB)=="table"then return fd.validate_globals_table(aB)else return false,"table expected, got "..type(aB)end end;q.nullary_inline_options={global=fe,unused=fe,redefined=fe,unused_args=fe,unused_secondaries=fe,self=fe,compat=fe,allow_defined=fe,allow_defined_top=fe,module=fe}q.variadic_inline_options={globals=fk,read_globals=fk,new_globals=fk,new_read_globals=fk,not_globals=fg,ignore=fg,enable=fg,only=fg}q.all_options={std=fj,max_line_length=ff,max_code_line_length=ff,max_string_line_length=ff,max_comment_line_length=ff,max_cyclomatic_complexity=ff}s.update(q.all_options,q.nullary_inline_options)s.update(q.all_options,q.variadic_inline_options)function q.validate(fl,w,x)if w==nil then return true end;if type(w)~="table"then return false,"option table expected, got "..type(w)end;x=x or fc;for fm,fn in s.sorted_pairs(fl)do if w[fm]~=nil then local z,A=fn(w[fm],x)if not z then return false,("invalid value of option '%s': %s"):format(fm,A)end end end;return true end;local function fo(fp,x)local fq;local fr={}local fs=false;for K,w in s.ripairs(fp)do if w.compat and not fs then fq=x.max;break elseif w.compat==false then fs=true end;if w.std then if type(w.std)=="table"then fq=w.std;break else local ay=fh(w.std,x)for K,az in ipairs(ay)do table.insert(fr,x[az])end;if not ay.add then fq={}break end end end end;table.insert(fr,1,fq or x.max)return fr end;local function ft(fp,fu)for a4,w in s.ripairs(fp)do if w[fu]then return a4 end end;return 0 end;local function fv(aV)return s.split(aV,"%.")end;local function fw(fx,fy)local fz=fx[1]local fA=fy[1]for D=1,math.max(#fz,#fA)do local fB=fz[D]local fC=fA[D]if not fB then return true elseif not fC then return false end;if fB~=fC then return fB<fC end end;return false end;local function fD(fp,x)local fE={}local fF=fo(fp,x)for K,fG in ipairs(fF)do fd.add_std_table(fE,fG)end;local fH=ft(fp,"new_globals")local fI=ft(fp,"new_read_globals")for a4,w in ipairs(fp)do local fJ=a4>=fH and(w.new_globals or w.globals)local fK=a4>=fI and(w.new_read_globals or w.read_globals)local fL={}if fJ then for K,dn in ipairs(fJ)do table.insert(fL,{fv(dn),false})end end;if fK then for K,fM in ipairs(fK)do table.insert(fL,{fv(fM),true})end end;if fJ and fK then table.sort(fL,fw)end;for K,dr in ipairs(fL)do fd.overwrite_field(fE,dr[1],dr[2])end;fd.add_std_table(fE,{globals=fJ,read_globals=fK},true,true)if w.not_globals then for K,fN in ipairs(w.not_globals)do fd.remove_field(fE,fv(fN))end end end;fd.finalize(fE)return fE end;local function fO(fp,fm,fP)for K,w in s.ripairs(fp)do if w[fm]~=nil then return w[fm]end end;return fP end;local fQ={"max_code_line_length","max_string_line_length","max_comment_line_length"}local function fR(fp)local W={max_line_length=120}for K,fS in ipairs(fQ)do W[fS]=W.max_line_length end;for K,w in ipairs(fp)do if w.max_line_length~=nil then W.max_line_length=w.max_line_length;for K,fS in ipairs(fQ)do W[fS]=w.max_line_length end end;for K,fS in ipairs(fQ)do if w[fS]~=nil then W[fS]=w[fS]end end end;return W end;local function fT(at,fU)if not at then return end;if at:sub(1,1)=="^"or at:sub(-1)=="$"then return at else return"^"..at..(fU and""or"$")end end;local function fV(at)local fW,fX;local fY=at:find("/")if fY then fW=at:sub(1,fY-1)fX=at:sub(fY+1)elseif at:find("[_a-zA-Z]")then fX=at else fW=at end;return{fT(fW,true),fT(fX)}end;local fZ={{"unused_args","21[23]"},{"global","1"},{"unused","[23]"},{"redefined","4"}}local function f_(fp)local g0={}local g1={}for K,w in s.ripairs(fp)do for K,g2 in ipairs(fZ)do local fm,at=g2[1],g2[2]if not g1[fm]then if w[fm]~=nil then table.insert(g0,{{at},w[fm]and"enable"or"disable"})g1[fm]=true end end end;if w.ignore then table.insert(g0,{w.ignore,"disable"})end;if w.only then table.insert(g0,{w.only,"only"})end;if w.enable then table.insert(g0,{w.enable,"enable"})end end;return g0 end;local function g3(g0)local W={}for D,g4 in ipairs(g0)do W[D]={{},g4[2]}for E,at in ipairs(g4[1])do W[D][1][E]=fV(at)end end;return W end;local g5={unused_secondaries=true,self=true,module=false,allow_defined=false,allow_defined_top=false,max_cyclomatic_complexity=false}function q.normalize(fp,x)local W={}x=x or fc;W.std=fD(fp,x)for fm,fP in pairs(g5)do W[fm]=fO(fp,fm,fP)end;local g6=fR(fp)s.update(W,g6)W.rules=g3(f_(fp))return W end;return q end)c("luacheck.standards",function(i,o,c,d)local fd={}local function g7(g8,g9,a4)if g8==nil then return true end;local ga=g9 and"global"or"field"if type(g8)~="table"then return false,("%ss table expected, got %s"):format(ga,type(g8)),a4 end;for aq,a5 in pairs(g8)do if type(aq)=="string"then local gb=(a4 or"").."."..aq;if type(a5)~="table"then return false,("%s description table expected, got %s"):format(ga,type(a5)),gb end;if a5.read_only~=nil and type(a5.read_only)~="boolean"then local A="invalid value of option 'read_only': boolean expected, got "..type(a5.read_only)return false,A,gb end;if a5.other_fields~=nil and type(a5.other_fields)~="boolean"then local A="invalid value of option 'other_fields': boolean expected, got "..type(a5.other_fields)return false,A,gb end;local z,A,gc=g7(a5.fields,false,gb..".fields")if not z then return false,A,gc end elseif type(a5)~="string"then local gd=type(aq)=="number"and("%.20g"):format(aq)or("<%s>"):format(type(aq))local gb=("%s[%s]"):format(a4 or"",gd)return false,("string expected as %s name, got %s"):format(ga,type(a5)),gb end end;return true end;function fd.validate_globals_table(ge)local z,A,gc=g7(ge,true)if z then return true end;local gf=gc and("in field %s: "):format(gc)or""return false,gf..A end;function fd.validate_std_table(fG)local z,A,gc=g7(fG.globals,true,".globals")if z then z,A,gc=g7(fG.read_globals,true,".read_globals")end;if z then return true end;local gf=("in field %s: "):format(gc)return false,gf..A end;local gg={other_fields=true}local function gh(gi,g8,gj,gk,gl)if not g8 then return end;for aV,gm in pairs(g8)do if type(aV)=="string"or not gk then if type(aV)~="string"then aV=gm;gm=gg end;if not gi.fields then gi.fields={}end;if not gi.fields[aV]then gi.fields[aV]={}end;local gn=gi.fields[aV]local go=gm.read_only;if go==nil then go=gl end;if go~=nil then if gj or go==false then gn.read_only=go end end;if gm.other_fields~=nil then if gj or gm.other_fields==true then gn.other_fields=gm.other_fields end end;gh(gn,gm.fields,gj,false,nil)end end end;function fd.add_std_table(fE,fG,gj,gp)gh(fE,fG.globals,gj,gp,false)gh(fE,fG.read_globals,gj,gp,true)end;function fd.overwrite_field(fE,gq,gr)local gm=fE;for K,aV in ipairs(gq)do if not gm.fields then gm.fields={}end;if not gm.fields[aV]then gm.fields[aV]={read_only=gr}end;gm=gm.fields[aV]end;for aq in pairs(gm)do gm[aq]=nil end;gm.read_only=gr;gm.other_fields=true end;function fd.remove_field(fE,gq)local gm=fE;local gs;for K,aV in ipairs(gq)do gs=gm;if not gm.fields or not gm.fields[aV]then return end;gm=gm.fields[aV]end;if gs then gs.fields[gq[#gq]]=nil end end;local function gt(gi,gr)local gu=not gi.other_fields or gr;if gi.fields then for K,gm in pairs(gi.fields)do local gv=gr;if gm.read_only~=nil then gv=gm.read_only end;gt(gm,gv)gu=gu and gv and gm.deep_read_only end end;if gu then gi.deep_read_only=true end end;function fd.finalize(fE)gt(fE,true)end;local gw={}function fd.def_fields(...)local g8={}for K,dr in ipairs({...})do g8[dr]=gw end;return{fields=g8}end;return fd end)c("luacheck.builtin_standards.init",function(i,o,c,d)local gx=i("luacheck.builtin_standards.love")local gy=i("luacheck.builtin_standards.ngx")local fd=i("luacheck.standards")local fc={}local function gz(gi)return{read_globals=gi.fields}end;local function gA(...)local W={}for K,gi in ipairs({...})do fd.add_std_table(W,gz(gi))end;return W end;local gw={}local gB={}gB.min=fd.def_fields("byte","char","dump","find","format","gmatch","gsub","len","lower","match","rep","reverse","sub","upper")gB.lua51=gA(gB.min,fd.def_fields("gfind"))gB.lua52=gB.min;gB.lua53=gA(gB.min,fd.def_fields("pack","packsize","unpack"))gB.luajit=gB.lua51;local gC={}gC.min={fields={__gc=gw,__index={other_fields=true},__tostring=gw,close=gw,flush=gw,lines=gw,read=gw,seek=gw,setvbuf=gw,write=gw}}gC.lua51=gC.min;gC.lua52=gC.min;gC.lua53=gA(gC.min,{fields={__name=gB.lua53}})gC.luajit=gC.min;local function gD(gE)local gF=gB[gE]local gG=gC[gE]return{fields={_G={other_fields=true,read_only=false},_VERSION=gF,arg={other_fields=true},assert=gw,collectgarbage=gw,coroutine=fd.def_fields("create","resume","running","status","wrap","yield"),debug=fd.def_fields("debug","gethook","getinfo","getlocal","getmetatable","getregistry","getupvalue","sethook","setlocal","setmetatable","setupvalue","traceback"),dofile=gw,error=gw,getmetatable=gw,io={fields={close=gw,flush=gw,input=gw,lines=gw,open=gw,output=gw,popen=gw,read=gw,stderr=gG,stdin=gG,stdout=gG,tmpfile=gw,type=gw,write=gw}},ipairs=gw,load=gw,loadfile=gw,math=fd.def_fields("abs","acos","asin","atan","ceil","cos","deg","exp","floor","fmod","huge","log","max","min","modf","pi","rad","random","randomseed","sin","sqrt","tan"),next=gw,os=fd.def_fields("clock","date","difftime","execute","exit","getenv","remove","rename","setlocale","time","tmpname"),package={fields={config=gF,cpath={fields=gF.fields,read_only=false},loaded={other_fields=true,read_only=false},loadlib=gw,path={fields=gF.fields,read_only=false},preload={other_fields=true,read_only=false}}},pairs=gw,pcall=gw,print=gw,rawequal=gw,rawget=gw,rawset=gw,require=gw,select=gw,setmetatable=gw,string=gF,table=fd.def_fields("concat","insert","remove","sort"),tonumber=gw,tostring=gw,type=gw,xpcall=gw}}end;local gH=fd.def_fields("arshift","band","bnot","bor","btest","bxor","extract","lrotate","lshift","replace","rrotate","rshift")local gI={}gI.min=gD("min")gI.lua51=gA(gD("lua52"),{fields={debug=fd.def_fields("getfenv","setfenv"),getfenv=gw,loadstring=gw,math=fd.def_fields("atan2","cosh","frexp","ldexp","log10","pow","sinh","tanh"),module=gw,newproxy=gw,package={fields={loaders={other_fields=true,read_only=false},seeall=gw}},setfenv=gw,table=fd.def_fields("maxn"),unpack=gw}})gI.lua51c=gA(gI.lua51,gD("lua51"),{fields={gcinfo=gw,math=fd.def_fields("mod"),table=fd.def_fields("foreach","foreachi","getn","setn")}})gI.lua52=gA(gD("lua52"),{fields={_ENV={other_fields=true,read_only=false},bit32=gH,debug=fd.def_fields("getuservalue","setuservalue","upvalueid","upvaluejoin"),math=fd.def_fields("atan2","cosh","frexp","ldexp","pow","sinh","tanh"),package={fields={searchers={other_fields=true,read_only=false},searchpath=gw}},rawlen=gw,table=fd.def_fields("pack","unpack")}})gI.lua52c=gA(gI.lua52,{fields={loadstring=gw,math=fd.def_fields("log10"),module=gw,package={fields={loaders={other_fields=true,read_only=false},seeall=gw}},table=fd.def_fields("maxn"),unpack=gw}})gI.lua53=gA(gD("lua53"),{fields={_ENV={other_fields=true,read_only=false},coroutine=fd.def_fields("isyieldable"),debug=fd.def_fields("getuservalue","setuservalue","upvalueid","upvaluejoin"),math=fd.def_fields("maxinteger","mininteger","tointeger","type","ult"),package={fields={searchers={other_fields=true,read_only=false},searchpath=gw}},rawlen=gw,table=fd.def_fields("move","pack","unpack"),utf8={fields={char=gw,charpattern=gB.lua53,codepoint=gw,codes=gw,len=gw,offset=gw}}}})gI.lua53c=gA(gI.lua53,{fields={bit32=gH,math=fd.def_fields("atan2","cosh","frexp","ldexp","log10","pow","sinh","tanh")}})gI.luajit=gA(gD("luajit"),{fields={bit=fd.def_fields("arshift","band","bnot","bor","bswap","bxor","lshift","rol","ror","rshift","tobit","tohex"),coroutine=fd.def_fields("isyieldable"),debug=fd.def_fields("getfenv","setfenv","upvalueid","upvaluejoin"),gcinfo=gw,getfenv=gw,jit={other_fields=true},loadstring=gw,math=fd.def_fields("atan2","cosh","frexp","ldexp","log10","mod","pow","sinh","tanh"),module=gw,newproxy=gw,package={fields={loaders={other_fields=true,read_only=false},searchpath=gw,seeall=gw}},setfenv=gw,table=fd.def_fields("clear","foreach","foreachi","getn","maxn","move","new"),unpack=gw}})gI.ngx_lua=gA(gI.luajit,gy)gI.max=gA(gI.lua51c,gI.lua52c,gI.lua53c,gI.luajit)for k,gi in pairs(gI)do fc[k]=gz(gi)end;local function gJ()if rawget(_G,"jit")then return"luajit"elseif _VERSION=="Lua 5.1"then return"lua51c"elseif _VERSION=="Lua 5.2"then return"lua52c"elseif _VERSION=="Lua 5.3"then return"lua53c"else return"max"end end;fc._G=fc[gJ()]fc.busted={read_globals={"describe","insulate","expose","it","pending","before_each","after_each","lazy_setup","lazy_teardown","strict_setup","strict_teardown","setup","teardown","context","spec","test","assert","spy","mock","stub","finally","randomize"}}fc.love=gx;fc.rockspec={globals={"rockspec_format","package","version","description","dependencies","supported_platforms","external_dependencies","source","build","hooks","deploy","build_dependencies","test_dependencies","test"}}fc.luacheckrc={globals={"global","unused","redefined","unused_args","unused_secondaries","self","compat","allow_defined","allow_defined_top","module","globals","read_globals","new_globals","new_read_globals","not_globals","ignore","enable","only","std","max_line_length","max_code_line_length","max_string_line_length","max_comment_line_length","max_cyclomatic_complexity","quiet","color","codes","ranges","formatter","cache","jobs","files","stds","exclude_files","include_files"}}fc.none={}return fc end)c("luacheck.builtin_standards.ngx",function(i,o,c,d)local fd=i("luacheck.standards")local gw={}local gK=fd.def_fields("byte","char","dump","find","format","gmatch","gsub","len","lower","match","rep","reverse","sub","upper")local gL={fields={ngx={fields={arg={other_fields=true,read_only=false},var={other_fields=true,read_only=false},OK=gw,ERROR=gw,AGAIN=gw,DONE=gw,DECLINED=gw,null=gw,HTTP_GET=gw,HTTP_HEAD=gw,HTTP_PUT=gw,HTTP_POST=gw,HTTP_DELETE=gw,HTTP_OPTIONS=gw,HTTP_MKCOL=gw,HTTP_COPY=gw,HTTP_MOVE=gw,HTTP_PROPFIND=gw,HTTP_PROPPATCH=gw,HTTP_LOCK=gw,HTTP_UNLOCK=gw,HTTP_PATCH=gw,HTTP_TRACE=gw,HTTP_CONTINUE=gw,HTTP_SWITCHING_PROTOCOLS=gw,HTTP_OK=gw,HTTP_CREATED=gw,HTTP_ACCEPTED=gw,HTTP_NO_CONTENT=gw,HTTP_PARTIAL_CONTENT=gw,HTTP_SPECIAL_RESPONSE=gw,HTTP_MOVED_PERMANENTLY=gw,HTTP_MOVED_TEMPORARILY=gw,HTTP_SEE_OTHER=gw,HTTP_NOT_MODIFIED=gw,HTTP_TEMPORARY_REDIRECT=gw,HTTP_BAD_REQUEST=gw,HTTP_UNAUTHORIZED=gw,HTTP_PAYMENT_REQUIRED=gw,HTTP_FORBIDDEN=gw,HTTP_NOT_FOUND=gw,HTTP_NOT_ALLOWED=gw,HTTP_NOT_ACCEPTABLE=gw,HTTP_REQUEST_TIMEOUT=gw,HTTP_CONFLICT=gw,HTTP_GONE=gw,HTTP_UPGRADE_REQUIRED=gw,HTTP_TOO_MANY_REQUESTS=gw,HTTP_CLOSE=gw,HTTP_ILLEGAL=gw,HTTP_INTERNAL_SERVER_ERROR=gw,HTTP_METHOD_NOT_IMPLEMENTED=gw,HTTP_BAD_GATEWAY=gw,HTTP_SERVICE_UNAVAILABLE=gw,HTTP_GATEWAY_TIMEOUT=gw,HTTP_VERSION_NOT_SUPPORTED=gw,HTTP_INSUFFICIENT_STORAGE=gw,STDERR=gw,EMERG=gw,ALERT=gw,CRIT=gw,ERR=gw,WARN=gw,NOTICE=gw,INFO=gw,DEBUG=gw,ctx={other_fields=true,read_only=false},location=fd.def_fields("capture","capture_multi"),status={read_only=false},header={other_fields=true,read_only=false},resp=fd.def_fields("get_headers"),req=fd.def_fields("is_internal","start_time","http_version","raw_header","get_method","set_method","set_uri","set_uri_args","get_uri_args","get_post_args","get_headers","set_header","clear_header","read_body","discard_body","get_body_data","get_body_file","set_body_data","set_body_file","init_body","append_body","finish_body","socket"),exec=gw,redirect=gw,send_headers=gw,headers_sent=gw,print=gw,say=gw,log=gw,flush=gw,exit=gw,eof=gw,sleep=gw,escape_uri=gw,unescape_uri=gw,encode_args=gw,decode_args=gw,encode_base64=gw,decode_base64=gw,crc32_short=gw,crc32_long=gw,hmac_sha1=gw,md5=gw,md5_bin=gw,sha1_bin=gw,quote_sql_str=gw,today=gw,time=gw,now=gw,update_time=gw,localtime=gw,utctime=gw,cookie_time=gw,http_time=gw,parse_http_time=gw,is_subrequest=gw,re=fd.def_fields("match","find","gmatch","sub","gsub"),shared={other_fields=true,read_only=false},socket=fd.def_fields("udp","tcp","connect","stream"),get_phase=gw,thread=fd.def_fields("spawn","wait","kill"),on_abort=gw,timer=fd.def_fields("at","every","running_count","pending_count"),config={fields={subsystem=gK,debug=gw,prefix=gw,nginx_version=gw,nginx_configure=gw,ngx_lua_version=gw}},worker=fd.def_fields("pid","count","id","exiting")}},ndk={fields={set_var={other_fields=true}}}}}return gL end)c("luacheck.builtin_standards.love",function(i,o,c,d)local fd=i("luacheck.standards")local gw={}local gM={read_only=false}local gx={fields={getVersion=gw,conf=gM,directorydropped=gM,draw=gM,errhand=gM,errorhandler=gM,filedropped=gM,focus=gM,gamepadaxis=gM,gamepadpressed=gM,gamepadreleased=gM,handlers=gM,hasDeprecationOutput=gw,joystickadded=gM,joystickaxis=gM,joystickhat=gM,joystickpressed=gM,joystickreleased=gM,joystickremoved=gM,keypressed=gM,keyreleased=gM,load=gM,lowmemory=gM,mousefocus=gM,mousemoved=gM,mousepressed=gM,mousereleased=gM,quit=gM,resize=gM,run=gM,setDeprecationOutput=gw,textedited=gM,textinput=gM,threaderror=gM,touchmoved=gM,touchpressed=gM,touchreleased=gM,update=gM,visible=gM,wheelmoved=gM,audio=fd.def_fields("getDistanceModel","getDopplerScale","getSourceCount","getOrientation","getPosition","getVelocity","getVolume","newSource","pause","play","setDistanceModel","setDopplerScale","setOrientation","setPosition","setVelocity","setVolume","stop","getActiveSourceCount","getRecordingDevices","newQueueableSource","setEffect","getActiveEffects","getEffect","getMaxSceneEffects","getMaxSourceEffects","isEffectsSupported","setMixWithSystem"),data=fd.def_fields("compress","decode","decompress","encode","getPackedSize","hash","newByteData","newDataView","pack","unpack"),event=fd.def_fields("clear","poll","pump","push","quit","wait"),filesystem=fd.def_fields("append","areSymlinksEnabled","createDirectory","exists","getAppdataDirectory","getDirectoryItems","getIdentity","getLastModified","getRealDirectory","getRequirePath","getSaveDirectory","getSize","getSource","getSourceBaseDirectory","getUserDirectory","getWorkingDirectory","init","isDirectory","isFile","isFused","isSymlink","lines","load","mount","newFile","newFileData","read","remove","setIdentity","setRequirePath","setSource","setSymlinksEnabled","unmount","write","getInfo","setCRequirePath","getCRequirePath"),font=fd.def_fields("newImageRasterizer","newGlyphData","newTrueTypeRasterizer","newBMFontRasterizer","newRasterizer"),graphics=fd.def_fields("arc","circle","clear","discard","draw","ellipse","getBackgroundColor","getBlendMode","getCanvas","getCanvasFormats","getColor","getColorMask","getDefaultFilter","getDimensions","getFont","getHeight","getLineJoin","getLineStyle","getLineWidth","getShader","getStats","getStencilTest","getSupported","getSystemLimits","getPointSize","getRendererInfo","getScissor","getWidth","intersectScissor","isGammaCorrect","isWireframe","line","newCanvas","newFont","newMesh","newImage","newImageFont","newParticleSystem","newShader","newText","newQuad","newSpriteBatch","newVideo","origin","points","polygon","pop","present","print","printf","push","rectangle","reset","rotate","scale","setBackgroundColor","setBlendMode","setCanvas","setColor","setColorMask","setDefaultFilter","setFont","setLineJoin","setLineStyle","setLineWidth","setNewFont","setShader","setPointSize","setScissor","setStencilTest","setWireframe","shear","stencil","translate","captureScreenshot","getImageFormats","newArrayImage","newVolumeImage","newCubeImage","getTextureTypes","drawLayer","setDepthMode","setMeshCullMode","setFrontFaceWinding","applyTransform","replaceTransform","transformPoint","inverseTransformPoint","getStackDepth","flushBatch","validateShader","drawInstanced","getDepthMode","getFrontFaceWinding","getMeshCullMode","getDPIScale","getPixelDimensions","getPixelHeight","getPixelWidth","isActive","getDefaultMipmapFilter","setDefaultMipmapFilter"),image=fd.def_fields("isCompressed","newCompressedData","newImageData","newCubeFaces"),joystick=fd.def_fields("getJoystickCount","getJoysticks","loadGamepadMappings","saveGamepadMappings","setGamepadMapping"),keyboard=fd.def_fields("getKeyFromScancode","getScancodeFromKey","hasKeyRepeat","hasTextInput","isDown","isScancodeDown","setKeyRepeat","setTextInput","hasScreenKeyboard"),math=fd.def_fields("compress","decompress","gammaToLinear","getRandomSeed","getRandomState","isConvex","linearToGamma","newBezierCurve","newRandomGenerator","noise","random","randomNormal","setRandomSeed","setRandomState","triangulate","newTransform"),mouse=fd.def_fields("getCursor","getPosition","getRelativeMode","getSystemCursor","getX","getY","hasCursor","isDown","isGrabbed","isVisible","newCursor","setCursor","setGrabbed","setPosition","setRelativeMode","setVisible","setX","setY","isCursorSupported"),physics=fd.def_fields("getDistance","getMeter","newBody","newChainShape","newCircleShape","newDistanceJoint","newEdgeShape","newFixture","newFrictionJoint","newGearJoint","newMotorJoint","newMouseJoint","newPolygonShape","newPrismaticJoint","newPulleyJoint","newRectangleShape","newRevoluteJoint","newRopeJoint","newWeldJoint","newWheelJoint","newWorld","setMeter"),sound=fd.def_fields("newDecoder","newSoundData"),system=fd.def_fields("getClipboardText","getOS","getPowerInfo","getProcessorCount","openURL","setClipboardText","vibrate","hasBackgroundMusic"),thread=fd.def_fields("getChannel","newChannel","newThread"),timer=fd.def_fields("getAverageDelta","getDelta","getFPS","getTime","sleep","step"),touch=fd.def_fields("getPosition","getPressure","getTouches"),video=fd.def_fields("newVideoStream"),window=fd.def_fields("close","fromPixels","getDisplayName","getFullscreen","getFullscreenModes","getIcon","getMode","getPixelScale","getPosition","getTitle","hasFocus","hasMouseFocus","isDisplaySleepEnabled","isMaximized","isOpen","isVisible","maximize","minimize","requestAttention","setDisplaySleepEnabled","setFullscreen","setIcon","setMode","setPosition","setTitle","showMessageBox","toPixels","updateMode","isMinimized","restore","getDPIScale")}}return{read_globals={love=gx}}end)c("luacheck.stages.linearize",function(i,o,c,d)local gN=i("luacheck.parser")local s=i("luacheck.utils")local bs={}local function gO(aI)return{message_format=aI,fields={"name","prev_line","prev_column","prev_end_column","self"}}end;bs.warnings={["411"]=gO("variable {name!} was previously defined on line {prev_line}"),["412"]=gO("variable {name!} was previously defined as an argument on line {prev_line}"),["413"]=gO("variable {name!} was previously defined as a loop variable on line {prev_line}"),["421"]=gO("shadowing definition of variable {name!} on line {prev_line}"),["422"]=gO("shadowing definition of argument {name!} on line {prev_line}"),["423"]=gO("shadowing definition of loop variable {name!} on line {prev_line}"),["431"]=gO("shadowing upvalue {name!} on line {prev_line}"),["432"]=gO("shadowing upvalue argument {name!} on line {prev_line}"),["433"]=gO("shadowing upvalue loop variable {name!} on line {prev_line}"),["521"]={message_format="unused label {label!}",fields={"label"}}}local bx={var="1",func="1",arg="2",loop="3",loopi="3"}local function gP(br,bB,gQ,gR)local bo="4"..(gR and"1"or bB.line==gQ.line and"2"or"3")..bx[gQ.type]br:warn_var(bo,bB,{self=bB.self and gQ.self,prev_line=gQ.node.line,prev_column=br:offset_to_column(gQ.node.line,gQ.node.offset),prev_end_column=br:offset_to_column(gQ.node.line,gQ.node.end_offset)})end;local function gS(br,b5)br:warn_range("521",b5.range,{label=b5.name})end;local gT=s.array_to_set({"do","else","break","end","return"})local gU=s.class()function gU:__init(bK,gV,a5)self.accessed_upvalues={}self.mutated_upvalues={}self.set_upvalues={}self.lines={}self.node=bK;self.parent=gV;self.value=a5;self.items=s.Stack()end;function gU:walk(gW,a4,cu,...)if gW[a4]then return end;gW[a4]=true;local O=self.items[a4]if cu(self,a4,O,...)then return end;if not O then return elseif O.tag=="Jump"then return self:walk(gW,O.to,cu,...)elseif O.tag=="Cjump"then self:walk(gW,O.to,cu,...)end;return self:walk(gW,a4+1,cu,...)end;local function gX(bQ)return{vars={},labels={},gotos={},line=bQ}end;local function gY(bQ,bK,aA)return{name=bK[1],node=bK,type=aA,self=bK.implicit,line=bQ,scope_start=bQ.items.size+1,values={}}end;local function gZ(g_,eB,O,h0)local a5={var=g_.var,var_node=g_,type=h0 and g_.var.type or"var",node=eB,using_lines={},empty=h0 and not eB and g_.var.type=="var",item=O}if eB and eB.tag=="Function"then a5.type="func"eB.value=a5 end;return a5 end;local function h1(bQ,k,dG)return{name=k,range=dG,index=bQ.items.size+1}end;local function h2(k,h3,dG)return{name=k,jump=h3,range=dG}end;local function h4(h5)return{tag=h5 and"Cjump"or"Jump"}end;local function h6(bK)return{tag="Eval",node=bK,accesses={},used_values={},lines={}}end;local function h7(bK,h8)return{tag="Noop",node=bK,loop_end=h8}end;local function h9(bK)return{tag="Local",node=bK,lhs=bK[1],rhs=bK[2],accesses=bK[2]and{},used_values=bK[2]and{},lines=bK[2]and{}}end;local function ha(bK)return{tag="Set",node=bK,lhs=bK[1],rhs=bK[2],accesses={},mutations={},used_values={},lines={}}end;local function d8(bK)return bK.tag=="Dots"or bK.tag=="Call"or bK.tag=="Invoke"end;local hb=s.class()function hb:__init(br)self.chstate=br;self.lines=s.Stack()self.scopes=s.Stack()end;function hb:enter_scope()self.scopes:push(gX(self.lines.top))end;function hb:leave_scope()local hc=self.scopes:pop()local hd=self.scopes.top;for K,he in ipairs(hc.gotos)do local b5=hc.labels[he.name]if b5 then he.jump.to=b5.index;b5.used=true else if not hd or hd.line~=self.lines.top then if he.name=="break"then gN.syntax_error("'break' is not inside a loop",he.range)else gN.syntax_error(("no visible label '%s'"):format(he.name),he.range)end end;table.insert(hd.gotos,he)end end;for k,b5 in pairs(hc.labels)do if not b5.used and not gT[k]then gS(self.chstate,b5)end end;for K,bB in pairs(hc.vars)do bB.scope_end=self.lines.top.items.size end end;function hb:register_var(bK,aA)local bB=gY(self.lines.top,bK,aA)local gQ=self:resolve_var(bB.name)if gQ then local gR=self.scopes.top.vars[bB.name]if bB.name~="..."then gP(self.chstate,bB,gQ,gR)end;if gR then gQ.scope_end=self.lines.top.items.size end end;self.scopes.top.vars[bB.name]=bB;bK.var=bB;return bB end;function hb:register_vars(cn,aA)for K,bK in ipairs(cn)do self:register_var(bK,aA)end end;function hb:resolve_var(k)for K,hf in s.ripairs(self.scopes)do local bB=hf.vars[k]if bB then return bB end end end;function hb:check_var(bK)if not bK.var then bK.var=self:resolve_var(bK[1])end;return bK.var end;function hb:register_label(k,dG)local hg=self.scopes.top.labels[k]if hg then assert(not gT[k])gN.syntax_error(("label '%s' already defined on line %d"):format(k,hg.range.line),dG,hg.range)end;self.scopes.top.labels[k]=h1(self.lines.top,k,dG)end;function hb:emit(O)self.lines.top.items:push(O)end;function hb:emit_goto(k,h5,dG)local h3=h4(h5)self:emit(h3)table.insert(self.scopes.top.gotos,h2(k,h3,dG))end;local hh={Nil=false,False=false,True=true,Number=true,String=true,Table=true,Function=true}function hb:emit_cond_goto(k,hi)local hj=hh[hi.tag]if hj~=true then self:emit_goto(k,hj~=false)end end;function hb:emit_noop(bK,h8)self:emit(h7(bK,h8))end;function hb:emit_stmt(dU)self["emit_stmt_"..dU.tag](self,dU)end;function hb:emit_stmts(dT)for K,dU in ipairs(dT)do self:emit_stmt(dU)end end;function hb:emit_block(dI)self:enter_scope()self:emit_stmts(dI)self:leave_scope()end;function hb:emit_stmt_Do(bK)self:emit_noop(bK)self:emit_block(bK)end;function hb:emit_stmt_While(bK)self:emit_noop(bK)self:enter_scope()self:register_label("do")self:emit_expr(bK[1])self:emit_cond_goto("break",bK[1])self:emit_block(bK[2])self:emit_noop(bK,true)self:emit_goto("do")self:register_label("break")self:leave_scope()end;function hb:emit_stmt_Repeat(bK)self:emit_noop(bK)self:enter_scope()self:register_label("do")self:enter_scope()self:emit_stmts(bK[1])self:emit_expr(bK[2])self:leave_scope()self:emit_cond_goto("do",bK[2])self:register_label("break")self:leave_scope()end;function hb:emit_stmt_Fornum(bK)self:emit_noop(bK)self:emit_expr(bK[2])self:emit_expr(bK[3])if bK[5]then self:emit_expr(bK[4])end;self:enter_scope()self:register_label("do")self:emit_goto("break",true)self:enter_scope()self:emit(h9({{bK[1]}}))self:register_var(bK[1],"loopi")self:emit_stmts(bK[5]or bK[4])self:leave_scope()self:emit_noop(bK,true)self:emit_goto("do")self:register_label("break")self:leave_scope()end;function hb:emit_stmt_Forin(bK)self:emit_noop(bK)self:emit_exprs(bK[2])self:enter_scope()self:register_label("do")self:emit_goto("break",true)self:enter_scope()self:emit(h9({bK[1]}))self:register_vars(bK[1],"loop")self:emit_stmts(bK[3])self:leave_scope()self:emit_noop(bK,true)self:emit_goto("do")self:register_label("break")self:leave_scope()end;function hb:emit_stmt_If(bK)self:emit_noop(bK)self:enter_scope()for D=1,#bK-1,2 do self:enter_scope()self:emit_expr(bK[D])self:emit_cond_goto("else",bK[D])self:emit_block(bK[D+1])self:emit_goto("end")self:register_label("else")self:leave_scope()end;if#bK%2==1 then self:emit_block(bK[#bK])end;self:register_label("end")self:leave_scope()end;function hb:emit_stmt_Label(bK)self:register_label(bK[1],bK)end;function hb:emit_stmt_Goto(bK)self:emit_noop(bK)self:emit_goto(bK[1],false,bK)end;function hb:emit_stmt_Break(bK)self:emit_goto("break",false,bK)end;function hb:emit_stmt_Return(bK)self:emit_noop(bK)self:emit_exprs(bK)self:emit_goto("return")end;function hb:emit_expr(bK)local O=h6(bK)self:scan_expr(O,bK)self:emit(O)end;function hb:emit_exprs(dR)for K,dS in ipairs(dR)do self:emit_expr(dS)end end;hb.emit_stmt_Call=hb.emit_expr;hb.emit_stmt_Invoke=hb.emit_expr;function hb:emit_stmt_Local(bK)local O=h9(bK)self:emit(O)if bK[2]then self:scan_exprs(O,bK[2])end;self:register_vars(bK[1],"var")end;function hb:emit_stmt_Localrec(bK)local O=h9(bK)self:register_var(bK[1][1],"var")self:emit(O)self:scan_expr(O,bK[2][1])end;function hb:emit_stmt_Set(bK)local O=ha(bK)self:scan_exprs(O,bK[2])for K,dS in ipairs(bK[1])do if dS.tag=="Id"then local bB=self:check_var(dS)if bB then self:register_upvalue_action(O,bB,"set_upvalues")end else assert(dS.tag=="Index")self:scan_lhs_index(O,dS)end end;self:emit(O)end;function hb:scan_expr(O,bK)local hk=self["scan_expr_"..bK.tag]if hk then hk(self,O,bK)end end;function hb:scan_exprs(O,cn)for K,bK in ipairs(cn)do self:scan_expr(O,bK)end end;function hb:register_upvalue_action(O,bB,aq)for K,bQ in s.ripairs(self.lines)do if bQ==bB.line then break end;if not bQ[aq][bB]then bQ[aq][bB]={}end;table.insert(bQ[aq][bB],O)end end;function hb:mark_access(O,bK)bK.var.accessed=true;if not O.accesses[bK.var]then O.accesses[bK.var]={}end;table.insert(O.accesses[bK.var],bK)self:register_upvalue_action(O,bK.var,"accessed_upvalues")end;function hb:mark_mutation(O,bK)bK.var.mutated=true;if not O.mutations[bK.var]then O.mutations[bK.var]={}end;table.insert(O.mutations[bK.var],bK)self:register_upvalue_action(O,bK.var,"mutated_upvalues")end;function hb:scan_expr_Id(O,bK)if self:check_var(bK)then self:mark_access(O,bK)end end;function hb:scan_expr_Dots(O,bK)local hl=self:check_var(bK)if not hl or hl.line~=self.lines.top then gN.syntax_error("cannot use '...' outside a vararg function",bK)end;self:mark_access(O,bK)end;function hb:scan_lhs_index(O,bK)if bK[1].tag=="Id"then if self:check_var(bK[1])then self:mark_mutation(O,bK[1])end elseif bK[1].tag=="Index"then self:scan_lhs_index(O,bK[1])else self:scan_expr(O,bK[1])end;self:scan_expr(O,bK[2])end;hb.scan_expr_Index=hb.scan_exprs;hb.scan_expr_Call=hb.scan_exprs;hb.scan_expr_Invoke=hb.scan_exprs;hb.scan_expr_Paren=hb.scan_exprs;hb.scan_expr_Table=hb.scan_exprs;hb.scan_expr_Pair=hb.scan_exprs;function hb:scan_expr_Op(O,bK)self:scan_expr(O,bK[2])if bK[3]then self:scan_expr(O,bK[3])end end;function hb:register_set_variables()local bQ=self.lines.top;for K,O in ipairs(bQ.items)do if O.tag=="Local"or O.tag=="Set"then O.set_variables={}local h0=O.tag=="Local"local hm;if O.rhs then local hn=O.rhs[#O.rhs]if d8(hn)then hm=hn end end;local ho;if hm and#O.lhs>#O.rhs then ho={}end;for D,bK in ipairs(O.lhs)do local a5;if bK.var then a5=gZ(bK,O.rhs and O.rhs[D]or hm,O,h0)O.set_variables[bK.var]=a5;table.insert(bK.var.values,a5)end;if ho and D>=#O.rhs then if a5 then a5.secondaries=ho;table.insert(ho,a5)else ho.used=true end end end end end end;function hb:build_line(bK)self.lines:push(gU(bK,self.lines.top))self:enter_scope()self:emit(h9({bK[1]}))self:enter_scope()self:register_vars(bK[1],"arg")self:emit_stmts(bK[2])self:leave_scope()self:register_label("return")self:leave_scope()self:register_set_variables()local bQ=self.lines:pop()for K,hp in ipairs(self.lines)do table.insert(hp.lines,bQ)end;return bQ end;function hb:scan_expr_Function(O,bK)local bQ=self:build_line(bK)table.insert(O.lines,bQ)for K,bZ in ipairs(bQ.lines)do table.insert(O.lines,bZ)end end;function bs.run(br)local hq=hb(br)br.top_line=hq:build_line({{{tag="Dots","..."}},br.ast})assert(hq.lines.size==0)assert(hq.scopes.size==0)br.lines={br.top_line}for K,bZ in ipairs(br.top_line.lines)do table.insert(br.lines,bZ)end end;return bs end)c("luacheck.parser",function(i,o,c,d)local hr=i("luacheck.lexer")local s=i("luacheck.utils")local gN={}gN.SyntaxError=s.class()function gN.SyntaxError:__init(H,dG,hs)self.msg=H;self.line=dG.line;self.offset=dG.offset;self.end_offset=dG.end_offset;if hs then self.prev_line=hs.line;self.prev_offset=hs.offset;self.prev_end_offset=hs.end_offset end end;function gN.syntax_error(H,dG,hs)error(gN.SyntaxError(H,dG,hs),0)end;local function ht(hu,hv)for bQ=hu.line,hu.lexer.line-1 do hu.line_endings[bQ]=hv end end;local function hw(hu)while true do local eJ,hx,bQ,hy,hz=hr.next_token(hu.lexer)hu.token=eJ;hu.token_value=hx;hu.line=bQ;hu.offset=hy;hu.end_offset=hz or hu.lexer.offset-1;if not eJ then gN.syntax_error(hx,hu)end;if eJ=="short_comment"then hu.comments[#hu.comments+1]={contents=hx,line=bQ,offset=hy,end_offset=hu.end_offset}hu.line_endings[bQ]="comment"elseif eJ=="long_comment"then ht(hu,"comment")else if eJ~="eof"then ht(hu,"string")hu.code_lines[bQ]=true;hu.code_lines[hu.lexer.line]=true end;return end end end;local function hA(eJ)return eJ=="name"and"identifier"or(eJ=="eof"and"<eof>"or"'"..eJ.."'")end;local function hB(hu,H,hs,hC,hD)local hE;if hu.token=="eof"then hE="<eof>"else hE=hr.get_quoted_substring_or_line(hu.lexer,hu.line,hu.offset,hu.end_offset)end;if hC then hE=hC.." "..hE end;H=H.." near "..hE;if hD then H=H.." "..hD end;gN.syntax_error(H,hu,hs)end;local function hF(hu,eJ)if hu.token~=eJ then hB(hu,"expected "..hA(eJ))end end;local function hG(hu,eJ)hF(hu,eJ)hw(hu)end;local function hH(hu,eJ)if hu.token==eJ then hw(hu)return true end end;local function hI(dG)return{line=dG.line,offset=dG.offset,end_offset=dG.end_offset}end;local hJ;local hK;local hL;local hM={["("]=")",["["]="]",["{"]="}",["do"]="end",["if"]="end",["else"]="end",["elseif"]="end",["while"]="end",["repeat"]="until",["for"]="end",["function"]="end"}local function hN(hu,bQ)local hO,hP=hu.lexer.src:find("^[ \\t\\v\\f]*",hu.lexer.line_offsets[bQ])return hP-hO end;local hQ=s.class()function hQ:__init(hu,hR,hS)self.old_state=hu;self.error_offset=hu.offset;self.error_opening_range=hR;self.error_closing_token=hS;self.opening_tokens_stack=s.Stack()end;function hQ:guess()self.state=hJ(self.old_state.lexer.src)self.state.unpaired_token_guesser=self;hw(self.state)hK(self.state)error("No syntax error in second parse",0)end;function hQ:on_block_start(hT,hU)local hV=hI(hT)hV.token=hU;hV.closing_token=hM[hU]hV.eligible=hV.closing_token==self.error_closing_token;hV.indentation=hN(self.state,hT.line)self.opening_tokens_stack:push(hV)end;function hQ:set_guessed()if self.guessed then return end;self.guessed=self.opening_tokens_stack.top;self.guessed.error_token=self.state.token;self.guessed.error_range=hI(self.state)end;function hQ:check_token()local hW=self.opening_tokens_stack.top;if hW and hW.eligible and self.state.line>hW.line then local hX=hN(self.state,self.state.line)if hX<hW.indentation then self:set_guessed()elseif hX==hW.indentation then local eJ=self.state.token;if eJ~=hW.closing_token and(hW.token~="if"and hW.token~="elseif"or eJ~="elseif"and eJ~="else")then self:set_guessed()end end end;if self.state.offset==self.error_offset then if self.guessed and self.guessed.error_range.offset~=self.state.offset then self.state.line=self.guessed.error_range.line;self.state.offset=self.guessed.error_range.offset;self.state.end_offset=self.guessed.error_range.end_offset;self.state.token=self.guessed.error_token;hL(self.state,self.guessed,self.guessed.token,self.guessed.closing_token,true)end end end;function hQ:on_block_end()self:check_token()self.opening_tokens_stack:pop()if not self.opening_tokens_stack.top then self.guessed=nil end end;function hQ:on_statement()self:check_token()end;function hL(hu,hY,hU,hZ,h_)local H="expected "..hA(hZ)if hY and hY.line~=hu.line then H=H.." (to close "..hA(hU).." on line "..tostring(hY.line)..")"end;local hC;local hD;if h_ then if hu.token==hZ then hC="less indented"end;hD="(indentation-based guess)"end;hB(hu,H,hY,hC,hD)end;local function i0(hu,hY,hU)local hZ=hM[hU]or"eof"if hu.token==hZ then return end;if(hU=="if"or hU=="elseif")and(hu.token=="else"or hu.token=="elseif")then return end;if hZ=="end"or hZ=="until"then if not hu.unpaired_token_guesser then hQ(hu,hY,hZ):guess()end end;hL(hu,hY,hU,hZ)end;local function i1(hu,hY,hU)i0(hu,hY,hU)hw(hu)end;local function i2(hu)hF(hu,"name")return hu.token_value end;local function i3(dG,i4,bK)bK=bK or{}bK.line=dG.line;bK.offset=dG.offset;bK.end_offset=dG.end_offset;bK.tag=i4;return bK end;local function i5(i6,i7,i4,bK)bK=bK or{}bK.line=i6.line;bK.offset=i6.offset;bK.end_offset=i7.end_offset;bK.tag=i4;return bK end;local i8;local function i9(hu,ia)ia=ia or{}repeat ia[#ia+1]=i8(hu)until not hH(hu,",")return ia end;local function ib(hu,i4)local ic=i3(hu,i4 or"Id")ic[1]=i2(hu)hw(hu)return ic end;local function id(i4)return function(hu)local ic=i3(hu,i4)ic[1]=hu.token_value;hw(hu)return ic end end;local ie={}ie.number=id("Number")ie.string=id("String")ie["nil"]=id("Nil")ie["true"]=id("True")ie["false"]=id("False")ie["..."]=id("Dots")ie["{"]=function(hu)local i6=hI(hu)local ic={}hw(hu)repeat if hu.token=="}"then break end;local ci,eB;local ig=hI(hu)if hu.token=="name"then local k=hu.token_value;hw(hu)if hH(hu,"=")then ci=i3(ig,"String",{k})eB=i8(hu)else hu.lexer.line=ig.line;hu.lexer.offset=ig.offset;hw(hu)eB=i8(hu)end elseif hu.token=="["then hw(hu)ci=i8(hu)i1(hu,ig,"[")hG(hu,"=")eB=i8(hu)else eB=i8(hu)end;if ci then ic[#ic+1]=i5(ig,eB,"Pair",{ci,eB})else ic[#ic+1]=eB end until not(hH(hu,",")or hH(hu,";"))i5(i6,hu,"Table",ic)i1(hu,i6,"{")return ic end;local function ih(hu,ii)local ij=hI(hu)hG(hu,"(")local ak={}if hu.token~=")"then repeat if hu.token=="name"then ak[#ak+1]=ib(hu)elseif hu.token=="..."then ak[#ak+1]=ie["..."](hu)break else hB(hu,"expected argument")end until not hH(hu,",")end;i1(hu,ij,"(")local l=hK(hu,ii,"function")local i7=hI(hu)hw(hu)return i5(ii,i7,"Function",{ak,l,end_range=i7})end;ie["function"]=function(hu)local ii=hI(hu)hw(hu)return ih(hu,ii)end;local ik={}ik["("]=function(hu,il,i4,bK)local ij=hI(hu)hw(hu)if hu.token~=")"then i9(hu,bK)end;i5(il,hu,i4,bK)i1(hu,ij,"(")return bK end;ik["{"]=function(hu,il,i4,bK)local im=ie[hu.token](hu)bK[#bK+1]=im;return i5(il,im,i4,bK)end;ik.string=ik["{"]local ip={}ip["."]=function(hu,il)hw(hu)local iq=ib(hu,"String")return i5(il,iq,"Index",{il,iq})end;ip["["]=function(hu,il)local ir=hI(hu)hw(hu)local iq=i8(hu)local ic=i5(il,hu,"Index",{il,iq})i1(hu,ir,"[")return ic end;ip[":"]=function(hu,il)hw(hu)local is=ib(hu,"String")local it=ik[hu.token]if not it then hB(hu,"expected method arguments")end;return it(hu,il,"Invoke",{il,is})end;ip["("]=function(hu,il)return ik[hu.token](hu,il,"Call",{il})end;ip["{"]=ip["("]ip.string=ip["("]local function iu(hu,iv,iw)local ix;if hu.token=="("then local ij=hI(hu)hw(hu)local iy=i8(hu)ix=i5(ij,hu,"Paren",{iy})i1(hu,ij,"(")elseif hu.token=="name"then ix=ib(hu)else local iz=ie[hu.token]if not iz or iw then hB(hu,"expected "..(iv or"expression"))end;return iz(hu)end;while true do local iA=ip[hu.token]if iA then ix=iA(hu,ix)else return ix end end end;local iB={["not"]="not",["-"]="unm",["~"]="bnot",["#"]="len"}local iC=12;local iD={["+"]="add",["-"]="sub",["*"]="mul",["%"]="mod",["^"]="pow",["/"]="div",["//"]="idiv",["&"]="band",["|"]="bor",["~"]="bxor",["<<"]="shl",[">>"]="shr",[".."]="concat",["~="]="ne",["=="]="eq",["<"]="lt",["<="]="le",[">"]="gt",[">="]="ge",["and"]="and",["or"]="or"}local iE={add=10,sub=10,mul=11,mod=11,pow=14,div=11,idiv=11,band=6,bor=4,bxor=5,shl=7,shr=7,concat=9,ne=3,eq=3,lt=3,le=3,gt=3,ge=3,["and"]=2,["or"]=1}local iF={add=10,sub=10,mul=11,mod=11,pow=13,div=11,idiv=11,band=6,bor=4,bxor=5,shl=7,shr=7,concat=8,ne=3,eq=3,lt=3,le=3,gt=3,ge=3,["and"]=2,["or"]=1}local function iG(hu,dd,iv)local ix;local iH=iB[hu.token]if iH then local iI=hI(hu)hw(hu)local iJ=iG(hu,iC)ix=i5(iI,iJ,"Op",{iH,iJ})else ix=iu(hu,iv)end;while true do local iK=iD[hu.token]if not iK or iE[iK]<=dd then break end;hw(hu)local iL=iG(hu,iF[iK])ix=i5(ix,iL,"Op",{iK,ix,iL})end;return ix end;function i8(hu,iv)return iG(hu,0,iv)end;local iM={}iM["if"]=function(hu)local i6=hI(hu)hw(hu)local ic={}local iN="if"local iO=i6;while true do ic[#ic+1]=i8(hu,"condition")local iP=hI(hu)hG(hu,"then")ic[#ic+1]=hK(hu,iO,iN,iP)if hu.token=="else"then iP=hI(hu)iN="else"iO=iP;hw(hu)ic[#ic+1]=hK(hu,iO,iN,iP)break elseif hu.token=="elseif"then iN="elseif"iO=hI(hu)hw(hu)else break end end;i5(i6,hu,"If",ic)hw(hu)return ic end;iM["while"]=function(hu)local i6=hI(hu)hw(hu)local iQ=i8(hu,"condition")hG(hu,"do")local dI=hK(hu,i6,"while")local ic=i5(i6,hu,"While",{iQ,dI})hw(hu)return ic end;iM["do"]=function(hu)local i6=hI(hu)hw(hu)local dI=hK(hu,i6,"do")local ic=i5(i6,hu,"Do",dI)hw(hu)return ic end;iM["for"]=function(hu)local i6=hI(hu)hw(hu)local ic={}local i4;local iR=ib(hu)if hu.token=="="then i4="Fornum"hw(hu)ic[1]=iR;ic[2]=i8(hu)hG(hu,",")ic[3]=i8(hu)if hH(hu,",")then ic[4]=i8(hu)end;hG(hu,"do")ic[#ic+1]=hK(hu,i6,"for")elseif hu.token==","or hu.token=="in"then i4="Forin"local iS={iR}while hH(hu,",")do iS[#iS+1]=ib(hu)end;ic[1]=iS;hG(hu,"in")ic[2]=i9(hu)hG(hu,"do")ic[3]=hK(hu,i6,"for")else hB(hu,"expected '=', ',' or 'in'")end;i5(i6,hu,i4,ic)hw(hu)return ic end;iM["repeat"]=function(hu)local i6=hI(hu)hw(hu)local dI=hK(hu,i6,"repeat")hw(hu)local iQ=i8(hu,"condition")return i5(i6,iQ,"Repeat",{dI,iQ})end;iM["function"]=function(hu)local i6=hI(hu)hw(hu)local db=ib(hu)local iT;while not iT and(hu.token=="."or hu.token==":")do iT=hu.token==":"and hI(hu)hw(hu)local iq=ib(hu,"String")db=i5(db,iq,"Index",{db,iq})end;local iU=ih(hu,i6)if iT then local iV=i3(iT,"Id",{"self",implicit=true})table.insert(iU[1],1,iV)end;return i5(i6,iU,"Set",{{db},{iU}})end;iM["local"]=function(hu)local i6=hI(hu)hw(hu)if hu.token=="function"then local ii=hI(hu)hw(hu)local bB=ib(hu)local iU=ih(hu,ii)return i5(i6,iU,"Localrec",{{bB},{iU}})end;local db={}local da;repeat db[#db+1]=ib(hu)until not hH(hu,",")if hH(hu,"=")then da=i9(hu)end;return i5(i6,da and da[#da]or db[#db],"Local",{db,da})end;iM["::"]=function(hu)local i6=hI(hu)hw(hu)local k=i2(hu)hw(hu)local ic=i5(i6,hu,"Label",{k})hG(hu,"::")return ic end;local iW=s.array_to_set({"end","eof","else","elseif","until"})iM["return"]=function(hu)local i6=hI(hu)hw(hu)if iW[hu.token]or hu.token==";"then return i3(i6,"Return")else local iX=i9(hu)return i5(i6,iX[#iX],"Return",iX)end end;iM["break"]=function(hu)local ic=i3(hu,"Break")hw(hu)return ic end;iM["goto"]=function(hu)local i6=hI(hu)hw(hu)local k=i2(hu)local ic=i3(i6,"Goto",{k})hw(hu)return ic end;local function iY(hu)local db;local i6=hI(hu)repeat local iZ=db and hI(hu)or i6;local eL=db and"identifier or field"or"statement"local i_=iu(hu,eL,true)if i_.tag=="Paren"then gN.syntax_error("expected "..eL.." near '('",iZ)end;if i_.tag=="Call"or i_.tag=="Invoke"then if db then hB(hu,"expected call or indexing")else return i_ end end;db=db or{}db[#db+1]=i_ until not hH(hu,",")hG(hu,"=")local da=i9(hu)return i5(i6,da[#da],"Set",{db,da})end;local function j0(hu)return(iM[hu.token]or iY)(hu)end;function hK(hu,hT,hU,dI)local j1=hu.unpaired_token_guesser;if j1 and hU then j1:on_block_start(hT,hU)end;dI=dI or{}local j2=false;while not iW[hu.token]do local j3=hu.token;if j3==";"then if not j2 then table.insert(hu.hanging_semicolons,hI(hu))end;hw(hu)j2=false else if j1 then j1:on_statement()end;local j4=j0(hu)j2=true;dI[#dI+1]=j4;if j4.tag=="Return"then hH(hu,";")break end end end;if j1 and hU then j1:on_block_end()end;i0(hu,hT,hU)return dI end;function hJ(G,j5,j6)return{lexer=hr.new_state(G,j5,j6),code_lines={},line_endings={},comments={},hanging_semicolons={}}end;function gN.parse(G,j5,j6)local hu=hJ(G,j5,j6)hw(hu)local j7=hK(hu)return j7,hu.comments,hu.code_lines,hu.line_endings,hu.hanging_semicolons,hu.lexer.line_offsets,hu.lexer.line_lengths end;return gN end)c("luacheck.lexer",function(i,o,c,d)local s=i("luacheck.utils")local hr={}local cA=string.byte;local j8=string.char;local j9=string.reverse;local ja=table.concat;local jb=math.floor;local jc,jd,je,jf=cA("0"),cA("9"),cA("f"),cA("F")local jg,jh,ji,jj=cA("x"),cA("X"),cA("i"),cA("I")local jk,jl,jm,jn=cA("l"),cA("L"),cA("u"),cA("U")local jo,jp,jq,jr=cA("e"),cA("E"),cA("p"),cA("P")local js,jt,ju,jv=cA("a"),cA("z"),cA("A"),cA("Z")local jw,jx=cA("."),cA(":")local jy,jz=cA("["),cA("]")local jA,jB=cA("{"),cA("}")local jC,jD=cA("'"),cA('"')local jE,jF,jG=cA("+"),cA("-"),cA("_")local jH,jI=cA("/"),cA("\\\\")local jJ,jK=cA("="),cA("~")local jL,jM=cA("<"),cA(">")local jN,jO=cA("\\n"),cA("\\r")local jP,jQ,jR,jS=cA(" "),cA("\\f"),cA("\\t"),cA("\\v")local function jT(jU)if jc<=jU and jU<=jd then return jU-jc elseif js<=jU and jU<=je then return 10+jU-js elseif ju<=jU and jU<=jf then return 10+jU-ju else return nil end end;local function jV(jU)if jc<=jU and jU<=jd then return jU-jc else return nil end end;local function jW(cP)if cP<0x80 then return j8(cP)end;local bd={}local jX=0x3F;repeat bd[#bd+1]=j8(cP%0x40+0x80)cP=jb(cP/0x40)jX=jb(jX/2)until cP<=jX;bd[#bd+1]=j8(0xFE-jX*2+cP)return j9(ja(bd))end;local function jY(jU)return js<=jU and jU<=jt or ju<=jU and jU<=jv or jU==jG end;local function jZ(jU)return jU==jN or jU==jO end;local function j_(jU)return jU==jP or jU==jQ or jU==jR or jU==jS end;local k0=s.array_to_set({"and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while"})local k1={[cA("a")]=cA("\\a"),[cA("b")]=cA("\\b"),[cA("f")]=cA("\\f"),[cA("n")]=cA("\\n"),[cA("r")]=cA("\\r"),[cA("t")]=cA("\\t"),[cA("v")]=cA("\\v"),[jI]=jI,[jC]=jC,[jD]=jD}local function k2(hu)local hy=hu.offset+1;hu.offset=hy;return hu.src:get_codepoint(hy)end;local function k3(hu,k4)local k5=hu.offset;local jU=k2(hu)if jU~=k4 and jZ(jU)then jU=k2(hu)end;local bQ=hu.line;local j5=hu.line_offsets;hu.line_lengths[bQ]=k5-j5[bQ]bQ=bQ+1;hu.line=bQ;j5[bQ]=hu.offset;return jU end;local function k6(hu,jU)while not jZ(jU)and jU do jU=k2(hu)end;return jU end;local function k7(hu,jU)while j_(jU)or jZ(jU)do if jZ(jU)then jU=k3(hu,jU)else jU=k2(hu)end end;return jU end;local function k8(hu)local k9=hu.offset;local jU=k2(hu)while jU==jJ do jU=k2(hu)end;return jU,hu.offset-k9-1 end;local function ka(hu,kb,eJ)local jU=k2(hu)if jZ(jU)then jU=k3(hu,jU)end;local kc={}local kd=hu.offset;while true do if jZ(jU)then kc[#kc+1]=hu.src:get_substring(kd,hu.offset-1)jU=k3(hu,jU)kd=hu.offset elseif jU==jz then local ke;jU,ke=k8(hu)if jU==jz and ke==kb then break end elseif jU==nil then return nil,eJ=="string"and"unfinished long string"or"unfinished long comment"else jU=k2(hu)end end;kc[#kc+1]=hu.src:get_substring(kd,hu.offset-kb-2)hu.offset=hu.offset+1;return eJ,ja(kc,"\\n")end;local function kf(hu,kg)local jU=k2(hu)local kh;local ki=hu.offset;while jU~=kg do if jU==jI then if not kh then kh={}end;if ki~=hu.offset then kh[#kh+1]=hu.src:get_substring(ki,hu.offset-1)end;jU=k2(hu)local kj;local kk=k1[jU]if kk then jU=k2(hu)kj=j8(kk)elseif jZ(jU)then jU=k3(hu,jU)kj="\\n"elseif jU==jg then jU=k2(hu)local kl,km;if jU then kl=jT(jU)end;if not kl then return nil,"invalid hexadecimal escape sequence",-2 end;jU=k2(hu)if jU then km=jT(jU)end;if not km then return nil,"invalid hexadecimal escape sequence",-3 end;jU=k2(hu)kj=j8(kl*16+km)elseif jU==jm then jU=k2(hu)if jU~=jA then return nil,"invalid UTF-8 escape sequence",-2 end;jU=k2(hu)local cP;if jU then cP=jT(jU)end;if not cP then return nil,"invalid UTF-8 escape sequence",-3 end;local kn=0;while true do jU=k2(hu)local ko;if jU then ko=jT(jU)end;if ko then kn=kn+1;cP=cP*16+ko;if cP>0x10FFFF then return nil,"invalid UTF-8 escape sequence",-kn-3 end else break end end;if jU~=jB then return nil,"invalid UTF-8 escape sequence",-kn-4 end;jU=k2(hu)kj=jW(cP)elseif jU==jt then jU=k7(hu,k2(hu))else local kp;if jU then kp=jV(jU)end;if not kp then return nil,"invalid escape sequence",-1 end;jU=k2(hu)if jU then local km=jV(jU)if km then kp=10*kp+km;jU=k2(hu)if jU then local kq=jV(jU)if kq then kp=10*kp+kq;if kp>255 then return nil,"invalid decimal escape sequence",-3 end;jU=k2(hu)end end end end;kj=j8(kp)end;if kj then kh[#kh+1]=kj end;ki=hu.offset elseif jU==nil or jZ(jU)then return nil,"unfinished string"else jU=k2(hu)end end;local kr;if kh then if ki~=hu.offset then kh[#kh+1]=hu.src:get_substring(ki,hu.offset-1)end;kr=ja(kh)else kr=hu.src:get_substring(ki,hu.offset-1)end;hu.offset=hu.offset+1;return"string",kr end;local function ks(hu,jU)local k9=hu.offset;local kt,ku=jo,jp;local kv=jV;local kw=false;local kx=false;if jU==jc then jU=k2(hu)if jU==jg or jU==jh then kt,ku=jq,jr;kv=jT;jU=k2(hu)else kw=true end end;while jU~=nil and kv(jU)do jU=k2(hu)kw=true end;if jU==jw then kx=true;jU=k2(hu)while jU~=nil and kv(jU)do jU=k2(hu)kw=true end end;if jU==kt or jU==ku then kx=true;jU=k2(hu)if jU==jE or jU==jF then jU=k2(hu)end;if jU==nil or not jV(jU)then return nil,"malformed number"end;repeat jU=k2(hu)until jU==nil or not jV(jU)end;if not kw then return nil,"malformed number"end;if jU==ji or jU==jj then hu.offset=hu.offset+1 else if not kx then if jU==jm or jU==jn then local ky=hu.src:get_codepoint(hu.offset+1)if ky==jk or ky==jl then local kz=hu.src:get_codepoint(hu.offset+2)if kz==jk or kz==jl then hu.offset=hu.offset+3 end end elseif jU==jk or jU==jl then local ky=hu.src:get_codepoint(hu.offset+1)if ky==jk or ky==jl then local kz=hu.src:get_codepoint(hu.offset+2)if kz==jm or kz==jn then hu.offset=hu.offset+3 else hu.offset=hu.offset+2 end end end end end;return"number",hu.src:get_substring(k9,hu.offset-1)end;local function kA(hu)local k9=hu.offset;local jU=k2(hu)while jU~=nil and(jY(jU)or jV(jU))do jU=k2(hu)end;local kB=hu.src:get_substring(k9,hu.offset-1)if k0[kB]then return kB else return"name",kB end end;local function kC(hu)local jU=k2(hu)if jU~=jF then return"-"end;jU=k2(hu)local k9=hu.offset;if jU==jy then local ke;jU,ke=k8(hu)if jU==jy then return ka(hu,ke,"long_comment")end end;k6(hu,jU)local kD=hu.src:get_substring(k9,hu.offset-1)return"short_comment",kD end;local function kE(hu)local jU,ke=k8(hu)if jU==jy then return ka(hu,ke,"string")elseif ke==0 then return"["else return nil,"invalid long string delimiter"end end;local function kF(hu)local jU=k2(hu)if jU==jJ then hu.offset=hu.offset+1;return"=="else return"="end end;local function kG(hu)local jU=k2(hu)if jU==jJ then hu.offset=hu.offset+1;return"<="elseif jU==jL then hu.offset=hu.offset+1;return"<<"else return"<"end end;local function kH(hu)local jU=k2(hu)if jU==jJ then hu.offset=hu.offset+1;return">="elseif jU==jM then hu.offset=hu.offset+1;return">>"else return">"end end;local function kI(hu)local jU=k2(hu)if jU==jH then hu.offset=hu.offset+1;return"//"else return"/"end end;local function kJ(hu)local jU=k2(hu)if jU==jJ then hu.offset=hu.offset+1;return"~="else return"~"end end;local function kK(hu)local jU=k2(hu)if jU==jx then hu.offset=hu.offset+1;return"::"else return":"end end;local function kL(hu)local jU=k2(hu)if jU==jw then jU=k2(hu)if jU==jw then hu.offset=hu.offset+1;return"...","..."else return".."end elseif jU and jV(jU)then hu.offset=hu.offset-2;return ks(hu,k2(hu))else return"."end end;local function kM(hu,jU)hu.offset=hu.offset+1;if jU>255 then jU=255 end;return j8(jU)end;local kN={[jw]=kL,[jx]=kK,[jy]=kE,[jC]=kf,[jD]=kf,[jF]=kC,[jH]=kI,[jJ]=kF,[jK]=kJ,[jL]=kG,[jM]=kH,[jG]=kA}for jU=jc,jd do kN[jU]=ks end;for jU=js,jt do kN[jU]=kA end;for jU=ju,jv do kN[jU]=kA end;function hr.new_state(G,j5,j6)local hu={src=G,line=1,line_offsets=j5 or{},line_lengths=j6 or{},offset=1}hu.line_offsets[1]=1;if G:get_length()>=2 and G:get_substring(1,2)=="#!"then hu.offset=2;k6(hu,k2(hu))end;return hu end;function hr.get_quoted_substring_or_line(hu,bQ,hy,kO)local dZ=hu.line_lengths[bQ]if dZ then local kP=hu.line_offsets[bQ]+dZ-1;if kP<kO then kO=kP end end;return"'"..hu.src:get_printable_substring(hy,kO).."'"end;function hr.next_token(hu)local j5=hu.line_offsets;local jU=k7(hu,hu.src:get_codepoint(hu.offset))local kQ=hu.line;local dY=j5[kQ]local kR=hu.offset;if not jU then hu.offset=hu.offset+1;hu.line_lengths[kQ]=kR-dY;return"eof",nil,kQ,kR end;local eJ,hx,kS=(kN[jU]or kM)(hu,jU)if kS then local kT=hu.offset+kS;local hz=math.min(hu.offset,hu.src:get_length())local kU=hx.." "..hr.get_quoted_substring_or_line(hu,hu.line,kT,hz)return nil,kU,hu.line,kT,hz end;return eJ,hx,kQ,kR,not eJ and kR end;return hr end)c("luacheck.stages.unwrap_parens",function(i,o,c,d)local bs={}local function ex(cn,kV)local kW=#cn;for a4=1,kW do local bK=cn[a4]if type(bK)=="table"then local i4=bK.tag;if i4=="Table"or i4=="Return"then ex(bK,1)elseif i4=="Call"then ex(bK,2)elseif i4=="Invoke"then ex(bK,3)elseif i4=="Forin"then ex(bK[2],1)ex(bK[3])elseif i4=="Local"then if bK[2]then ex(bK[2])end elseif i4=="Set"then ex(bK[1])ex(bK[2],1)else ex(bK)if i4=="Paren"and(not kV or a4<kV or a4~=kW)then local kX=bK[1]if kX.tag~="Call"and kX.tag~="Invoke"and kX.tag~="Dots"then cn[a4]=kX end end end end end end;function bs.run(br)ex(br.ast)end;return bs end)c("luacheck.stages.parse",function(i,o,c,d)local co=i("luacheck.decoder")local gN=i("luacheck.parser")local bs={}function bs.run(br)br.source=co.decode(br.source_bytes)br.line_offsets={}br.line_lengths={}local j7,kY,kZ,k_,l0=gN.parse(br.source,br.line_offsets,br.line_lengths)br.ast=j7;br.comments=kY;br.code_lines=kZ;br.line_endings=k_;br.useless_semicolons=l0 end;return bs end)c("luacheck.filter",function(i,o,c,d)local c4=i("luacheck.core_utils")local co=i("luacheck.decoder")local q=i("luacheck.options")local s=i("luacheck.utils")local p={}local function l1(at,bo,k)local l2,l3;local fW,fX=at[1],at[2]if fW then l2=s.pmatch(bo,fW)end;if fX then if not k then l3=false else l3=s.pmatch(k,fX)end end;return l2,l3 end;local function l4(g0,bo,k)local l5,l6=false,false;for K,g4 in ipairs(g0)do local l7=false;for K,at in ipairs(g4[1])do local l2,l3=l1(at,bo,k)if l5 then l2=g4[2]~="disable"end;if l6 then l2=g4[2]~="disable"end;if l2 and l3~=false or l3 and l2~=false then l7=true end;if g4[2]=="enable"then if l2 then l5=true end;if l3 then l6=true end;if l5 and l6 then return true end elseif g4[2]=="disable"then if l7 then return false end end end;if g4[2]=="only"and not l7 then return false end end;return true end;local function l8(aH)local ay={}if aH.indexing then for K,a4 in ipairs(aH.indexing)do local az;if type(a4)=="string"then local cp=co.decode(a4)az=cp:get_printable_substring(1,cp:get_length())else az="?"end;table.insert(ay,az)end end;return table.concat(ay,".")end;local function l9(w,aH,la)local gi=w.std;local lb=true;local gr=true;for D=1,la or(aH.indexing and#aH.indexing or 0)+1 do local lc=D==1 and aH.name or aH.indexing[D-1]if lc==true then if gi.fields and next(gi.fields)or gi.other_fields then if gi.deep_read_only then gr=true else gr=false end else lb=false end;break elseif lc==false then if not gi.other_fields then lb=false end;break else if gi.fields and gi.fields[lc]then gi=gi.fields[lc]if gi.read_only~=nil then gr=gi.read_only end else if not gi.other_fields then lb=false end;break end end end;return lb and(gr and"read_only"or"global")or"undefined"end;local function ld(le,aH)if aH.code=="561"then local lf=le.max_cyclomatic_complexity;if not lf or aH.complexity<=lf then return false end;aH.max_complexity=lf elseif aH.code:find("^[234]")and aH.name=="_"and not aH.useless then return false elseif aH.code:find("^1[14]")then if aH.indirect and l9(le,aH,aH.previous_indexing_len)=="undefined"then return false end;if not aH.module and l9(le,aH)~="undefined"then return false end end;if aH.code:find("^1[24][23]")then aH.field=l8(aH)end;if aH.secondary and not le.unused_secondaries then return false end;if aH.self and not le.self then return false end;return l4(le.rules,aH.code,aH.name)end;local lg={}local function lh(li,x,lj,bQ,lk)local ll=li.inline_options[lk]if not ll or ll.line>bQ then return lk end;lk=lk+1;if ll.pop_count then for K=1,ll.pop_count do table.remove(lj)end end;if not ll.options then return lk end;local lm,eW=q.validate(q.all_options,ll.options,x)if not lm then ll.options=nil;ll.code="021"ll.msg=eW;table.insert(li.filtered_warnings,ll)table.insert(lj,lg)else table.insert(lj,ll.options)end;return lk end;local function ln(li,le,bQ)local dZ=li.line_lengths[bQ]local lo=li.line_endings[bQ]local lp=le["max_"..(lo or"code").."_line_length"]if lp and dZ>lp then if l4(le.rules,"631")then table.insert(li.filtered_warnings,{code="631",line=bQ,column=lp+1,end_column=dZ,max_length=lp,line_ending=lo})end end end;local function lq(li,le,bQ,lk)while true do local aH=li.warnings[lk]if not aH or aH.line>bQ then break end;if aH.code:find("^1")then li.normalized_options[bQ]=le elseif ld(le,aH)then table.insert(li.filtered_warnings,aH)end;lk=lk+1 end;return lk end;local lr=s.class()function lr:__init()self.result_trie={}end;function lr:normalize_options(x,lj)local ls=self.result_trie;for K,lt in ipairs(lj)do if not ls[lt]then ls[lt]={}end;ls=ls[lt]end;if ls.result then return ls.result end;local lu=q.normalize(lj,x)ls.result=lu;return lu end;local function lv(li,lw,x,lj)li.filtered_warnings={}li.normalized_options={}local lx=1;local ly=1;for bQ in ipairs(li.line_lengths)do ly=lh(li,x,lj,bQ,ly)local le=lw:normalize_options(x,lj)ln(li,le,bQ)lx=lq(li,le,bQ,lx)end end;local function lz(lA)for aq in pairs(lA)do if type(aq)=="string"then return true end end;return false end;local function lB(w,lC)local W={w}if w and w[lC]then if lz(w[lC])then table.insert(W,w[lC])end;for K,F in ipairs(w[lC])do table.insert(W,F)end end;return W end;local function lD(lE,w,x)local lF=lr()for lC,li in ipairs(lE)do if not li.fatal then if li.warnings[1]and li.warnings[1].code=="011"then li.filtered_warnings=li.warnings;li.normalized_options={}else local lG=lB(w,lC)lv(li,lF,x,lG)end end end end;local function lH(le,aH)return le.allow_defined or le.allow_defined_top and aH.top end;local function lI(li)local lb={}local lJ={}local lK={}for K,aH in ipairs(li.warnings)do if aH.code:find("^11")then if aH.code=="111"then local le=li.normalized_options[aH.line]if lH(le,aH)then if le.module then lb[aH.name]=true else lJ[aH.name]=true end end else lK[aH.name]=true end end end;return lb,lJ,lK end;local function lL(lE)local lM={}local lN={}local lO={}for lC,li in ipairs(lE)do if not li.fatal then local lb,lJ,lK=lI(li)s.update(lM,lJ)s.update(lN,lK)lO[lC]=lb end end;return lM,lN,lO end;local function lP(lM,lN,lO,le,aH)if not aH.code:find("^11")then return aH end;if aH.code=="111"then if le.module then if lO[aH.name]then return end;aH.module=true else if lH(le,aH)then if lN[aH.name]then return end;aH.code="131"aH.top=nil else if lM[aH.name]then return end end end else if lM[aH.name]or lO[aH.name]then return end end;return aH end;local function lQ(li,lM,lN,lO)for K,aH in ipairs(li.warnings)do if aH.code:find("^1")then local le=li.normalized_options[aH.line]aH=lP(lM,lN,lO,le,aH)if aH then if aH.code:find("^11[12]")and not aH.module and l9(le,aH)=="read_only"then aH.code="12"..aH.code:sub(3,3)elseif aH.code:find("^11[23]")and l9(le,aH,1)~="undefined"then aH.code="14"..aH.code:sub(3,3)end;if aH.code:match("11[23]")and l9(le,aH,1)~="undefined"then aH.code="14"..aH.code:sub(3,3)end;if ld(le,aH)then table.insert(li.filtered_warnings,aH)end end end end end;local function lR(lE)local lM,lN,lO=lL(lE)for lC,li in ipairs(lE)do if not li.fatal then lQ(li,lM,lN,lO[lC])end end end;function p.filter(lE,w,x)lD(lE,w,x)lR(lE)local J={}for lC,li in ipairs(lE)do if li.fatal then J[lC]=li else c4.sort_by_location(li.filtered_warnings)J[lC]=li.filtered_warnings end end;return J end;return p end)c("luacheck.check",function(i,o,c,d)local lS=i("luacheck.check_state")local c4=i("luacheck.core_utils")local lT=i("luacheck.stages.parse_inline_options")local gN=i("luacheck.parser")local aE=i("luacheck.stages.init")local s=i("luacheck.utils")local lU=s.array_to_set(lT.inline_option_fields)local function g7(lV,lW)for K,ao in ipairs(lV)do local lX;if lW then if not ao.code then error("Warning has no code",0)end;local lY=aE.warnings[ao.code]if not lY then error("Unknown issue code "..ao.code,0)end;lX=lY.fields_set else lX=lU end;for dr in pairs(ao)do if not lX[dr]then error("Unknown field "..dr.." in "..(lW and"issue with code "..ao.code or"inline option table"),0)end end end end;local function check(lZ)local br=lS.new(lZ)local z,l_=s.try(aE.run,br)local b1,m0,j6,k_;if z then b1=br.warnings;c4.sort_by_location(b1)m0=br.inline_options;j6=br.line_lengths;k_=br.line_endings else local A=l_.err;if not s.is_instance(A,gN.SyntaxError)then error(l_,0)end;local m1={code="011",line=A.line,column=br:offset_to_column(A.line,A.offset),end_column=br:offset_to_column(A.line,A.end_offset),msg=A.msg}if A.prev_line then m1.prev_line=A.prev_line;m1.prev_column=br:offset_to_column(A.prev_line,A.prev_offset)m1.prev_end_column=br:offset_to_column(A.prev_line,A.prev_end_offset)end;b1={m1}m0={}j6={}k_={}end;g7(b1,true)g7(m0)return{warnings=b1,inline_options=m0,line_lengths=j6,line_endings=k_}end;return check end)c("luacheck.check_state",function(i,o,c,d)local s=i("luacheck.utils")local lS={}local m2=s.class()function m2:__init(m3)self.source_bytes=m3;self.warnings={}end;function m2:offset_to_column(bQ,hy)local dZ=self.line_lengths[bQ]local m4=hy-self.line_offsets[bQ]+1;if not dZ then return m4 end;return math.max(1,math.min(dZ,m4))end;function m2:warn_column_range(bo,dG,aH)aH=aH or{}aH.code=bo;aH.line=dG.line;aH.column=dG.column;aH.end_column=dG.end_column;table.insert(self.warnings,aH)return aH end;function m2:warn(bo,bQ,hy,kO,aH)aH=aH or{}aH.code=bo;aH.line=bQ;aH.column=self:offset_to_column(bQ,hy)aH.end_column=self:offset_to_column(bQ,kO)table.insert(self.warnings,aH)return aH end;function m2:warn_range(bo,dG,aH)return self:warn(bo,dG.line,dG.offset,dG.end_offset,aH)end;function m2:warn_var(bo,bB,aH)aH=self:warn_range(bo,bB.node,aH)aH.name=bB.name;return aH end;function m2:warn_value(bo,a5,aH)aH=self:warn_range(bo,a5.var_node,aH)aH.name=a5.var.name;return aH end;function lS.new(m3)return m2(m3)end;return lS end)local t=a("__root")local fi={read_globals={'_G','_VERSION','assert','error','getfenv','getmetatable','ipairs','next','pairs','pcall','rawequal','rawget','rawset','select','setmetatable','tonumber','tostring','type','unpack','xpcall','require',debug={fields={traceback={}}},math={fields={abs={},acos={},asin={},atan={},atan2={},ceil={},cos={},cosh={},deg={},exp={},floor={},fmod={},frexp={},huge={},ldexp={},log={},log10={},max={},min={},modf={},pi={},pow={},rad={},random={},randomseed={},sin={},sinh={},sqrt={},tan={},tanh={}}},os={fields={clock={},date={},difftime={},time={}}},package={fields={loaded={},loaders={},preload={},seeall={}}},string={fields={byte={},char={},find={},format={},gmatch={},gsub={},len={},lower={},match={},rep={},reverse={},sub={},ulower={},upper={},uupper={}}},table={fields={concat={},insert={},maxn={},remove={},sort={}}},mw={fields={addWarning={},allToString={},clone={},getCurrentFrame={},incrementExpensiveFunctionCount={},isSubsting={},loadData={},loadJsonData={},dumpObject={},log={},logObject={},hash={fields={hashValue={},listAlgorithms={}}},html={fields={create={}}},language={fetchLanguageName={},fetchLanguageNames={},getContentLanguage={},getFallbacksFor={},isKnownLanguageTag={},isSupportedLanguage={},isValidBuiltInCode={},isValidCode={},new={}},message={fields={new={},newFallbackSequence={},newRawMessage={},rawParam={},numParam={},getDefaultLanguage={}}},site={fields={currentVersion={},scriptPath={},server={},siteName={},stylePath={},namespaces={},contentNamespaces={},subjectNamespaces={},talkNamespaces={},stats={fields={pages={},articles={},files={},edits={},users={},activeUsers={},admins={},pagesInCategory={},pagesInNamespace={},usersInGroup={},interwikiMap={}}}}},text={fields={decode={},encode={},jsonDecode={},jsonEncode={},killMarkers={},listToText={},nowiki={},split={},gsplit={},tag={},trim={},truncate={},unstripNoWiki={},unstrip={}}},title={fields={equals={},compare={},getCurrentTitle={},new={},makeTitle={}}},uri={fields={encode={},decode={},anchorEncode={},buildQueryString={},parseQueryString={},canonicalUrl={},fullUrl={},localUrl={},new={},validate={}}},ustring={fields={maxPatternLength={},maxStringLength={},byte={},byteoffset={},char={},codepoint={},find={},format={},gcodepoint={},gmatch={},gsub={},isutf8={},len={},lower={},match={},rep={},sub={},toNFC={},toNFD={},toNFKC={},toNFKD={},upper={}}},ext={}}}}}local m5={std=fi,max_line_length=false,max_code_line_length=false,max_string_line_length=false,max_comment_line_length=false}function check(ar)return t.check_strings({ar},m5)[1]end`});var{LuaFactory:La}=Ut(),ja=Mt(),Oa={"011":"Syntax error","021":"Invalid inline option","022":"Unpaired inline push directive","023":"Unpaired inline pop directive",111:"Setting an undefined global variable",112:"Mutating an undefined global variable",113:"Accessing an undefined global variable",121:"Setting a read-only global variable",122:"Seeting a read-only field of a global variable",131:"Unused implicitly defined global variable",142:"Setting an undefined field of a global variable",143:"Accessing an undefined field of a global variable",211:"Unused local $1",212:"Unused argument",214:"Unused variable",221:"Local variable is accessed but never set",231:"Local variable is set but never accessed",232:"Argument is set but never accessed",233:"Loop variable is set but never accessed",241:"Local variable is mutated but never accessed",311:"Value assigned to a local variable is unused",312:"Value of an argument is unused",313:"Value of a loop variable is unused",314:"Value of a field in a table literal is unused",321:"Accessing uninitialized local variable",331:"Value assigned to a local variable is mutated but never accessed",341:"Mutating uninitialized local variable",411:"Redefining a local variable",412:"Redefining an argument",413:"Redefining a loop variable",421:"Shadowing a local variable",422:"Shadowing an argument",423:"Shadowing a loop variable",431:"Shadowing an upvalue",432:"Shadowing an upvalue argument",433:"Shadowing an upvalue loop variable",511:"Unreachable code",512:"Loop can be executed at most once",521:"Unused label",531:"Left-hand side of an assignment is too short",532:"Left-hand side of an assignment is too long",571:"A numeric for loop goes from #(expr) down to 1 or less without negative step",581:"Negation of a relational operator: operator can be flipped",582:"Error prone negation: negation has a higher priority than equality"},Ka=h=>{var F;let T=h.filter(({code:V})=>!/^(?:6|5[45]|213)/u.test(V));for(let V of T)(F=V.msg)!=null||(V.msg=Oa[V.code].replace("$1",V.func?"function":"variable")),V.severity=/^[01]/u.test(V.code)?2:1;return T},Pe,se,Ve,An=class{constructor(T){tn(this,Pe);tn(this,se);tn(this,Ve);Me(this,Ve,T)}queue(T){var F;return Me(this,Pe,T),(F=me(this,se))!=null||Me(this,se,this.lint(T)),me(this,se)}async lint(T){let F=me(this,Ve).call(this,T);return me(this,Pe)===T?(setTimeout(()=>{Me(this,se,void 0)},0),Array.isArray(F)?Ka(F):[]):(Me(this,se,this.lint(me(this,Pe))),me(this,se))}};Pe=new WeakMap,se=new WeakMap,Ve=new WeakMap;(async()=>{let h=await new La().createEngine();await h.doString(ja),Object.assign(globalThis,{luacheck:new An(h.global.get("check"))})})();})();
